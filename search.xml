<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>物理层和数据链路层(通俗版)</title>
      <link href="/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E7%89%A9%E7%90%86%E5%B1%82%E7%9A%84%E9%80%9A%E4%BF%97%E7%90%86%E8%A7%A3/"/>
      <url>/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E7%89%A9%E7%90%86%E5%B1%82%E7%9A%84%E9%80%9A%E4%BF%97%E7%90%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h2 id="物理层的易懂理解"><a href="#物理层的易懂理解" class="headerlink" title="物理层的易懂理解"></a>物理层的易懂理解</h2><h3 id="数据通信"><a href="#数据通信" class="headerlink" title="数据通信"></a>数据通信</h3><pre><code>名词概念：数据(data)——运送消息的实体。信号(signal)——数据的电气或电磁表现。 “模拟的”——消息的参数的取值是连续的。 “数字的”(digital)——消息的参数的取值是离散的，比如0、1。 码元(code)——用波形表示数字信号时，代表不同离散数值的基本波形。如：0、1是两种码元。模拟数据和数字数据是什么？模拟数据就是连续变化的数据，比如，温度计的读数、音乐声音的波形、收音机接收到的无线电信号等都是模拟数据的例子。模拟数据在时间和值上都是连续的，它可以在一个范围内的任意值。通常用无限个可能的值来表示，因此需要无限的精度来准确地描述。举个例子：比如你的汽车速度表，它会在一个范围内（比如0到120 mph）连续变化。当你加速或减速时，速度指针会平滑地移动，而不是突然跳跃到一个新的速度值。数字数据是离散的，它是用一系列的离散值来表示的举例来说，计算机的文本、图像、音频文件，以及数字信号（如数字音频或数字电视信号）等都是数字数据。数字数据是通过离散的数值来表示的，这些数值被编码成二进制形式，只能是0和1。每个数字的值都与一组二进制位（0和1的序列）相对应。举个例子：当你看到计算机屏幕上的文本时，你实际上看到的是由许多小点（像素）组成的图案，每个点的颜色和位置决定了字母、数字或符号。这些颜色和位置的组合被编码成数字，以便计算机可以理解并在屏幕上显示。总结以下：--------------模拟数据常用于声音、视频、传感器信号等连续变化的场合，而数字数据则常用于计算机和数字设备中，用于表示文本、图像、音频等。--------------</code></pre><h4 id="数据通信系统的模型"><a href="#数据通信系统的模型" class="headerlink" title="数据通信系统的模型"></a>数据通信系统的模型</h4><p><img src="D:/Soft/github/YouXiuM-blog/source/images/image-20240325210246575.png" alt="image-20240325210246575"></p><h4 id="编码与调制"><a href="#编码与调制" class="headerlink" title="编码与调制"></a><strong>编码与调制</strong></h4><p>为什么需要编码和调制呢？</p><pre><code>一般情况，数字信号是在数字信道传输，模拟信号在模拟信道传输。如果需要在不同信道传输，就需要编码和调制，不然就会受到噪声和失真的影响。1、频谱效率和带宽利用编码和调制可以有效地利用信道的频谱资源。通过改变信号的特性，可以在有限的频谱范围内传输更多的数据，提高频谱效率和带宽利用率。2、不同设备之间的互联我们互联一般都是不同设备之间的，经常需要将信息传输到不同类型的设备之间，编码和调制可以使得不同设备之间的通信更加可靠和高效。3、噪声和失真的影响信号在传输过程中会受到噪声和失真的影响，这可能导致信号的质量下降。通过编码和调制可以增加信号的鲁棒性和抗干扰能力，减少数据传输中的错误。4、保护隐私和安全编码可以用于加密数据，保护通信中的隐私和安全。通过在传输前对数据进行编码，可以防止未经授权的访问者窃听或篡改数据。</code></pre><p><img src="D:/Soft/github/YouXiuM-blog/source/images/image-20240325211504778.png" alt="image-20240325211504778"></p><p>模拟—–&gt; 数字    &#x3D;&#x3D;&#x3D;&#x3D;编码</p><p>数字—–&gt; 模拟    &#x3D;&#x3D;&#x3D;&#x3D;调制</p><h4 id="数字数据用数字信号表示"><a href="#数字数据用数字信号表示" class="headerlink" title="数字数据用数字信号表示"></a><strong>数字数据用数字信号表示</strong></h4><p>不（非）归零编码</p><p>Ø用负电平表示逻辑“0”；</p><p>Ø用正电平表示逻辑“1”；</p><p>Ø也可以有其他表示方法。</p><p><img src="D:/Soft/github/YouXiuM-blog/source/images/image-20240325212100565.png" alt="image-20240325212100565"></p><p>归零编码</p><p>正脉冲代表1，负脉冲代表0</p><p>曼彻斯特编码</p><p>Ø每个比特的中间有一次电平跳变； </p><p>Ø“1”定义为由高电平到低电平的跳变；</p><p>Ø“0”定义为由低电平到高电平的跳变。</p><p><img src="D:/Soft/github/YouXiuM-blog/source/images/image-20240325212638505.png" alt="image-20240325212638505"></p><p>差（微）分曼彻斯特编码</p><p>Ø差分曼彻斯特编码是对曼彻斯特编码的改变。</p><p>Ø“0”和“1”是根据两比特之间有没有跳变来区分。</p><p>Ø如果下一个数是“0”，则在两比特中间有一次跳变；</p><p>Ø如果下一个数据是“1”，则在两比特中间没有电平跳变。</p><p><img src="D:/Soft/github/YouXiuM-blog/source/images/image-20240325212508577.png" alt="image-20240325212508577"></p><p><strong>数字数据常用编码方式（小结）</strong></p><p><img src="D:/Soft/github/YouXiuM-blog/source/images/image-20240325212721709.png" alt="image-20240325212721709"></p><h4 id="数字数据用模拟信号表示"><a href="#数字数据用模拟信号表示" class="headerlink" title="数字数据用模拟信号表示"></a><strong>数字数据用模拟信号表示</strong></h4><p><strong>基带信号****（基本频带信号）——</strong>矩形脉冲波形的数字信号。含较多的低频成分和直流成分。**</p><p><img src="D:/Soft/github/YouXiuM-blog/source/images/image-20240325212926587-17172319784612.png" alt="image-20240325212926587"></p><p><strong>带通信号</strong>——把基带信号经过载波调制后，<strong>将信号的频率范围搬移到较高的频段以便在模拟信道中传输。</strong></p><pre><code>最基本的调制方法有以下几种：调幅（AM）：载波的振幅随基带数字信号而变化。 调频（FM）：载波的频率随基带数字信号而变化。调相（PM）：载波的初始相位随基带数字信号而变化。  </code></pre><p><img src="D:/Soft/github/YouXiuM-blog/source/images/image-20240325213107645.png" alt="image-20240325213107645"></p><h3 id="传输方式"><a href="#传输方式" class="headerlink" title="传输方式"></a>传输方式</h3><p>1、并行传输 与 串行传输</p><pre><code>并行传输，一次发送n个比特串行传输，一个比特一个比特依次发送。特点:并行 速率快，适合短距离，占用成本高串行 速率慢，适合长距离，占用成本低</code></pre><p><img src="D:/Soft/github/YouXiuM-blog/source/images/image-20240325131247261.png" alt="image-20240325131247261"></p><p>2、异步传输和同步传输</p><pre><code>同步思想：就是指收发双方在时间基准上保持一致的过程可分为：异步传输：以字节为单位，字节之间时间不固定。同步传输：以比特流的形式传输，字节之间无间隔。什么是同步传输？举例子，比如要传输3个文件，接收端第一个文件接收完，再传输第二个文件。</code></pre><p>3、单工、半双工、全双工通信</p><pre><code>单向（工）通信--只能一个方向  例如广播双向交替通信（半双工通信）--不能双方同时  例如对讲机双向同时通信（全双工通信）--双方同时   例如手机打电话</code></pre><h3 id="信道的极限容量"><a href="#信道的极限容量" class="headerlink" title="信道的极限容量"></a>信道的极限容量</h3><pre><code>什么是码元？码元是承载信息的基本信息单位，一个码元能够承载的信息量多少，是由码元信号所能表示的数据有效值状态个数决定的。为了提高信息的传输速率，有人肯定想&quot;在一定的时间内能够传输尽可能多的码元&quot;，这是对的嘛？这个想法是错误的。通俗地讲，一个&quot;行李箱&quot;肯定有承受重量的范围，你一直往&quot;行李箱&quot;一直塞，肯定&quot;行李箱&quot;承受不住，就会丢弃一些，使得“行李箱”能够保持它能够承受的范围。失真严重是什么？是指输出信号波形的形态，如图4</code></pre><p><img src="D:/Soft/github/YouXiuM-blog/source/images/image-20240325133324183.png" alt="image-20240325133324183"></p><pre><code>信道输出端的波形的失真影响因素有？1、码元信号承载的信息大多，码元传输速率太高。2、信号传输的距离太远3、噪声干扰大4、传输媒体质量差解释:①信号传输的距离太远,好比你跑步，越跑就越累，不可能全程无损耗②噪声干扰大什么是噪声是指该信道中不需要的电信号，通俗地说，就是除该信道自身要传输的数据外，其他数据在该通道传输通称为噪声。</code></pre><h3 id="奈氏准则"><a href="#奈氏准则" class="headerlink" title="奈氏准则"></a>奈氏准则</h3><pre><code>码元的传输速率是有限的。则这个范围界限可推导：推导者：奈奎斯特公式：理想低通道信道的最高码元传输速率=2W(波特)W = 信道带宽，简称：带宽，单位为赫兹(Hz)波特(Baud)是码元传输速率的单位，1波特为每秒传送1一个码元什么是理想低通道？就是信号的所有低频分量，只要其频率不超过某一个上限值，都能够不失真地通过此通道。</code></pre><h3 id="香农定理"><a href="#香农定理" class="headerlink" title="香农定理"></a>香农定理</h3><pre><code>香农公式指出： 信道的极限信息传输速率C是C = Wlog2^(1+S/N) (bit/s)w = 信道的带宽(Hz)S = 信道内所传信号的平均功率，也就是传输平均功率N = 信道内部的高斯噪声功率S/N = 信噪比，也就是信道/噪声，简称信噪比C = 光速(在理想条件下)香农公式表明：1、信道的带宽或信道中的信噪比越大，则信息的极限传输速率就越高。2、只要信息传输速率低于信道的极限信息传输速率，就一定可以找到某种办法来实现无差错的传输。3、若信道带宽 W 或信噪比 S/N 没有上限（当然实际信道不可能是这样的），则信道的极限信息传输速率 C 也就没有上限。4、实际信道上能够达到的信息传输速率要比香农的极限传输速率低不少（因为在实际信道中，信号还要受到其他一些损伤，如各种脉冲干扰和在传输中产生的失真等等，这些因素在香农公式中并未考虑到）------------注意：对于频带宽度已确定的信道，如果信噪比不能再提高了，并且码元传输速率也达到了上限值，那么还有办法提高信息的传输速率，即：用编码的方法让每一个码元携带更多比特的信息量。比如要传输101011000110111010…这个基带信号，如果直接传输则每个码元所携带的信息量是1bit，现在将信号进行编码，每3个比特编为1组，即101，011，000，110，111，010…3个比特共有8种不同组合，我们可以用不同的调制方法来表示这样的信号，例如用8种不同的振幅，或8种不同的频率，这样就能表示3个bit的8种组合，这样就能达到1个bit传输原来3个bit才能传输的信息。</code></pre><h3 id="传输媒体"><a href="#传输媒体" class="headerlink" title="传输媒体"></a>传输媒体</h3><pre><code>传输媒体是数据传输系统中在发送器和接收器之间的物理通路。分类为：</code></pre><p><img src="D:/Soft/github/YouXiuM-blog/source/images/image-20240325161703083.png" alt="image-20240325161703083"></p><p>非引导型：§短波通信(高频通信)：多径效应，通信质量差。蓝牙也是非引导型。</p><p>多路径效应是指可以直线传播也可以曲线传播。就比如你在教室讲话，为什么隔着墙外面的人也能听见。类似这样比喻。。。</p><h4 id="电磁波"><a href="#电磁波" class="headerlink" title="电磁波"></a>电磁波</h4><p>电磁波在传输媒体上的传输。电信领域使用的电磁波的频谱：</p><p><img src="D:/Soft/github/YouXiuM-blog/source/images/image-20240325162050101.png" alt="image-20240325162050101"></p><pre><code>电磁波的波长（λ）与频率（f）之间的关系可以通过以下公式来表示:公式：c=λ×f其中：c 是光速，即电磁波在真空中的传播速度，约为 3 x 10⁸ 米/秒（m/s）λ 是波长，单位通常是米（m）f 是频率，单位是赫兹（Hz）解释以及值大小的意义~~~公式中，c=λ×fc是固定的，光速是固定的，无法达到的(实际)然而，波长和频率成为互相&quot;平衡&quot;的状态！！！λ(波长)较长时，f(频率)就会较低。f(频率)较长时，λ(波长)就会较低。---------------------------------那问题来了，波长还是频率值的大小有什么含义呢？当波长较长时，频率就会较低。波长越长代表着波的周期性更大，也就意味着波动的振荡次数（频率）较低。通俗地说就是，图的描述就是，波浪本来是10次一个周期，现在波浪是小于10次一个周期。应用场景：波长较长（低频）：电磁波的波长越长，穿透力越强。这意味着长波长的信号可以更好地穿过障碍物，如建筑物、墙壁、树木等，因此在需要穿透障碍物的通信和雷达应用中更为实用。当频率较大时，波长较低。对于无线电通信和其他电磁波应用，频率的增加通常意味着更高的数据传输速率。例如，5G和4G哪个上网速度快；肯定是5G网速快，4G用的频率是2.4GHz,5G用的是5GHz，所以提供更大的带宽和更快的数据传输速度。但是5G穿透性比较差，因为波长较低。还有个场景，雷达和卫星通信，两个国家都有通信基站，为什么两个基站不直接通信，还需要用到雷达或卫星来转发？高频率信号在穿透障碍物（如墙壁或建筑物）时的能力会相对较低，因为它们更容易被障碍物吸收或反射。这可能会导致在某些环境中信号的覆盖范围减少，需要更多的信号中继器或增强器来保持连接的质量。有没有发现，基站到中转站是直线发送的，其实是有原因的高频率信号更容易聚焦，在雷达和通信系统中，高频率信号的波束更容易集中在特定方向上，从而提高了信号的定向性和精确度。</code></pre><p><img src="D:/Soft/github/YouXiuM-blog/source/images/image-20240325201642670.png" alt="image-20240325201642670"></p><h4 id="传输媒体-1"><a href="#传输媒体-1" class="headerlink" title="传输媒体"></a>传输媒体</h4><h5 id="双绞线"><a href="#双绞线" class="headerlink" title="双绞线"></a>双绞线</h5><p>分为：</p><p>无屏蔽双绞线 UTP</p><p>屏蔽双绞线 STP</p><p><img src="/.com//Soft\github\YouXiuM-blog\source\images\image-20240325202412942.png" alt="image-20240325202412942"></p><p><img src="D:/Soft/github/YouXiuM-blog/source/images/image-20240325202557813.png" alt="image-20240325202557813"></p><p>五类双绞线的最大传输距离为100m。加中继器最多加4个到500m</p><h5 id="同轴电缆"><a href="#同轴电缆" class="headerlink" title="同轴电缆"></a>同轴电缆</h5><p>主要用于居民小区的有线电视</p><p><img src="D:/Soft/github/YouXiuM-blog/source/images/image-20240325202412942.png" alt="image-20240325202730531"></p><h5 id="光纤"><a href="#光纤" class="headerlink" title="光纤"></a>光纤</h5><p>分为：单模光纤和多模光纤</p><p><img src="D:/Soft/github/YouXiuM-blog/source/images/image-20240325203055814.png" alt="image-20240325203055814"></p><pre><code>光纤特点：1)传输损耗小，中继距离长，对远距离传输特别经济.2)抗雷电和电磁干扰性能好.(3)无串音干扰，保密性好，也不易被窃听或截取数据。(4)体积小，重量轻。单模光纤特点：低损耗、传输远、成本高、窄的芯径和光束、单一的波长传输多模光纤特点：低成本、适合短距离、较大的芯径、多模波长传输------------------怎么理解 芯径和光束 以及 波长传输？？？窄的芯径和光束：单模光纤的光芯（core）非常细小，使得光信号在光纤中只沿着一个路径传播，而不是多个路径。较大的芯径：多模光纤的光芯比单模光纤要大，这意味着光信号在光纤中可以沿着多个路径传播（多个模式）。单一波长传输：单模光纤通常用于传输单一波长的激光光信号。多模波长传输：多模光纤通常使用 LED（发光二极管）或激光二极管作为光源，这些光源可以发出多个波长的光。因此，多模光纤可以支持多个波长的光信号传输。</code></pre><h5 id="集线器与交换机"><a href="#集线器与交换机" class="headerlink" title="集线器与交换机"></a>集线器与交换机</h5><pre><code>集线器共享宽带，交换机独享宽带怎么理解？？有100M宽带，4个人使用情景1，使用集线器当他们共同使用时，每个人只能享受25M情景2，使用交换机当她们共同使用时，每个人能独享100M，但不包括同一时间</code></pre>]]></content>
      
      
      <categories>
          
          <category> Network - 网工中级 </category>
          
          <category> Blog </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Network </tag>
            
            <tag> 网工中级 </tag>
            
            <tag> 物理层 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>存储与RAID</title>
      <link href="/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E5%AD%98%E5%82%A8%E4%B8%8ERAID/"/>
      <url>/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E5%AD%98%E5%82%A8%E4%B8%8ERAID/</url>
      
        <content type="html"><![CDATA[<h1 id="存储与RAID"><a href="#存储与RAID" class="headerlink" title="存储与RAID"></a>存储与RAID</h1><h2 id="存储"><a href="#存储" class="headerlink" title="存储"></a>存储</h2><h3 id="存储系统层次结构"><a href="#存储系统层次结构" class="headerlink" title="存储系统层次结构"></a>存储系统层次结构</h3><p>存储体系结构：</p><p><strong>寄存器、告诉缓存存储器、主存储器、外存储器</strong></p><p><img src="/../../../../images/image-20240521094220951.png" alt="image-20240521094220951"></p><h3 id="存储介质选择"><a href="#存储介质选择" class="headerlink" title="存储介质选择"></a>存储介质选择</h3><p><img src="/../../../../images/image-20240521094508175.png" alt="image-20240521094508175"></p><h3 id="HHD机械硬盘与SSD固态硬盘"><a href="#HHD机械硬盘与SSD固态硬盘" class="headerlink" title="HHD机械硬盘与SSD固态硬盘"></a>HHD机械硬盘与SSD固态硬盘</h3><p>机械硬盘的连续读写性好，但随机读写性能很差。</p><p>G固态硬盘，读写性能好，但数据盘损坏，恢复极难。</p><p><img src="/../../../../images/image-20240521094841302.png" alt="image-20240521094841302"></p><p><strong>常见存储</strong></p><p>NVRAM：非易失存储器，用来保存启动配置文件。</p><p>Flash：闪存，用来保存华为VRP&#x2F;思科IOS系统软件。</p><p>ROM：只读，用来存储引导程序。</p><p>RAM：随机存储器，即内存，保存当前运行的配置程序，系统关闭或重启信息会丢失。</p><p><img src="/../../../../images/image-20240521095320924.png" alt="image-20240521095320924"></p><h2 id="传统RAID技术"><a href="#传统RAID技术" class="headerlink" title="传统RAID技术"></a>传统RAID技术</h2><p>RAID：<strong>独立磁盘冗余阵列。</strong></p><p><strong>RAID技术将多个单独的物理硬盘以不同的方式组合成一个逻辑硬盘，从而提高了硬盘的读写性能和数据安全性</strong></p><h3 id="RAID数据组织及存取方式"><a href="#RAID数据组织及存取方式" class="headerlink" title="RAID数据组织及存取方式"></a>RAID数据组织及存取方式</h3><p><img src="/../../../../images/image-20240521095631527.png" alt="image-20240521095631527"></p><p><img src="/../../../../images/image-20240521095622119.png" alt="image-20240521095622119"></p><h3 id="RAID热备和重构"><a href="#RAID热备和重构" class="headerlink" title="RAID热备和重构"></a>RAID热备和重构</h3><p><strong>热备(HotSpare)<strong>：当冗余的RAID组中某个硬盘失效时，在不影响当前RAID系统的正常使用的情况下，用RAID系统中的</strong>备用硬盘自动顶替失效硬盘</strong>，及时保证RAID系统的冗余性。</p><p>热备分为：</p><p>​全局式：备用硬盘为系统中所有的冗余RAID组共享</p><p>​专用式：备用硬盘为系统中某一组冗余RAID组专用</p><p><img src="/../../../../images/image-20240521100033049.png" alt="image-20240521100033049"></p><h3 id="RAID-逻辑卷-LUN"><a href="#RAID-逻辑卷-LUN" class="headerlink" title="RAID-逻辑卷(LUN)"></a>RAID-逻辑卷(LUN)</h3><p><img src="/../../../../images/image-20240521100110001.png" alt="image-20240521100110001"></p><h3 id="常用RAID技术"><a href="#常用RAID技术" class="headerlink" title="常用RAID技术"></a>常用RAID技术</h3><h4 id="RAID-0"><a href="#RAID-0" class="headerlink" title="RAID 0"></a>RAID 0</h4><p><img src="/../../../../images/image-20240521100236207.png" alt="image-20240521100236207"></p><p>利用率：100%，不允许坏硬盘，最少两块</p><h4 id="RAID-1"><a href="#RAID-1" class="headerlink" title="RAID 1"></a>RAID 1</h4><p><img src="/../../../../images/image-20240521100547815.png" alt="image-20240521100547815"></p><p>利用率：50%，最少两块，最多允许坏一半硬盘</p><h4 id="RAID-3和RAID-5"><a href="#RAID-3和RAID-5" class="headerlink" title="RAID 3和RAID 5"></a>RAID 3和RAID 5</h4><p><img src="/../../../../images/image-20240521100707070.png" alt="image-20240521100707070"></p><p>RAID 3利用率：N-1&#x2F;N，最少3块，允许坏1块硬盘</p><p>RAID 5利用率：N-1&#x2F;N，最少3块，允许坏1块硬盘</p><p>共同点：均采用奇偶校验</p><p>不同点：</p><p>RAID 3 有专用校验硬盘来存储校验数据</p><p>RAID 5 把数据块和对应的校验信息存放在不同的硬盘上。</p><h4 id="RAID-6"><a href="#RAID-6" class="headerlink" title="RAID 6"></a>RAID 6</h4><p><img src="/../../../../images/image-20240521101424972.png" alt="image-20240521101424972"></p><p>利用率：N-2&#x2F;N，最少4块硬盘，允许坏2块硬盘。</p><h4 id="RAID-10-和-RAID-50"><a href="#RAID-10-和-RAID-50" class="headerlink" title="RAID 10 和 RAID 50"></a>RAID 10 和 RAID 50</h4><p><img src="/../../../../images/image-20240521101611101.png" alt="image-20240521101611101"></p><h4 id="常用RAID技术对比"><a href="#常用RAID技术对比" class="headerlink" title="常用RAID技术对比"></a>常用RAID技术对比</h4><p><img src="/../../../../images/image-20240521101638781.png" alt="image-20240521101638781"></p><h2 id="RAID-2-0技术"><a href="#RAID-2-0技术" class="headerlink" title="RAID 2.0技术"></a>RAID 2.0技术</h2><h3 id="传统RAID和RAID-2-0区别"><a href="#传统RAID和RAID-2-0区别" class="headerlink" title="传统RAID和RAID 2.0区别"></a>传统RAID和RAID 2.0区别</h3><p><img src="/../../../../images/image-20240521110116844.png" alt="image-20240521110116844"></p><p><img src="/../../../../images/image-20240521110129724.png" alt="image-20240521110129724"></p><h3 id="RAID-2-0优势"><a href="#RAID-2-0优势" class="headerlink" title="RAID 2.0优势"></a>RAID 2.0优势</h3><p>1、快速重构</p><p>2、硬盘负载均衡</p><p>3、硬盘利用率高</p><p>4、存储管理效率</p><h2 id="网络存储体系DAS-NAS-SAN"><a href="#网络存储体系DAS-NAS-SAN" class="headerlink" title="网络存储体系DAS&#x2F;NAS&#x2F;SAN"></a>网络存储体系DAS&#x2F;NAS&#x2F;SAN</h2><p>存储发展过程</p><p><img src="/../../../../images/image-20240521110922822.png" alt="image-20240521110922822"></p><p>DAS起源</p><p><img src="/../../../../images/image-20240521111013816.png" alt="image-20240521111013816"></p><p>FC-SAN起源(DAS -&gt; FC SAN)</p><p><img src="/../../../../images/image-20240521111059476.png" alt="image-20240521111059476"></p><p>IP SAN起源(FC SAN -&gt; IP SAN)</p><p><img src="/../../../../images/image-20240521111218291.png" alt="image-20240521111218291"></p><p>NAS起源(网络数据共享与交换需求)</p><p><img src="/../../../../images/image-20240521111300963.png" alt="image-20240521111300963"></p><h3 id="几种存储对比"><a href="#几种存储对比" class="headerlink" title="几种存储对比"></a>几种存储对比</h3><p><img src="/../../../../images/image-20240521111410294.png" alt="image-20240521111410294"></p><h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><p><img src="/../../../../images/image-20240521111556802.png" alt="image-20240521111556802"></p><p><img src="/../../../../images/image-20240521111606664.png" alt="image-20240521111606664"></p><p><img src="/../../../../images/image-20240521111615283.png" alt="image-20240521111615283"></p><h2 id="分布式存储-超融合"><a href="#分布式存储-超融合" class="headerlink" title="分布式存储&#x2F;超融合"></a>分布式存储&#x2F;超融合</h2><h3 id="分布式存储组成与特点："><a href="#分布式存储组成与特点：" class="headerlink" title="分布式存储组成与特点："></a>分布式存储组成与特点：</h3><p>分布式存储系统一般由3个部分组成:</p><p><strong>客户端、元数据节点和数据存储节点。</strong></p><p>元数据节点相当于目录数据存储节点采用<strong>多副本或纠删码技术</strong>实现数据冗余。</p><p>分布式存储有如下特点:</p><p><strong>(1)高性能。</strong>相比传统集中式存储，可以提供更高的IOPS和吞吐量，并且随着存储节点的增加而线性增长，可以满足高并发业务需求，比如12306购票业务。<br><strong>(2)高可靠。</strong>分布式存储系统中单台服务器可以部署RAID技术来提升可靠性，同时多台服务器组成的分布式存储系统可以采用多副本等技术保证数据冗余，单个节点出现故障能快速重建。<br><strong>(3)容量大。</strong>可以根据需要扩展服务器硬盘数量或服务器数量，提供海量存储资源池。<br><strong>(4)成本低。</strong>分布式存储系统的核心硬件是插有大量硬盘传统服务器，相对于传统集中式存储，成本更低。</p><h3 id="数据备份策略"><a href="#数据备份策略" class="headerlink" title="数据备份策略"></a>数据备份策略</h3><p>备份类型：完全备份、差量备份、增量备份</p><p><img src="/../../../../images/image-20240521112416923.png" alt="image-20240521112416923"></p><p><img src="/../../../../images/image-20240521112424066.png" alt="image-20240521112424066"></p><p>备份时间(快 -&gt; 慢)：增量备份 - 差量备份 - 完全备份</p><p>恢复时间(快 -&gt; 慢)：完全备份 - 差量备份 - 增量备份</p><h3 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h3><p><img src="/../../../../images/image-20240521112551605.png" alt="image-20240521112551605"></p><p><img src="/../../../../images/image-20240521112635252.png" alt="image-20240521112635252"></p><h3 id="数据备份网络架构"><a href="#数据备份网络架构" class="headerlink" title="数据备份网络架构"></a>数据备份网络架构</h3><p><img src="/../../../../images/image-20240521112903212.png" alt="image-20240521112903212"></p><h3 id="数据备份网络架构：Server-Free"><a href="#数据备份网络架构：Server-Free" class="headerlink" title="数据备份网络架构：Server-Free"></a>数据备份网络架构：Server-Free</h3><p><img src="/../../../../images/image-20240521112949272.png" alt="image-20240521112949272"></p><h3 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h3><p><img src="/../../../../images/image-20240521113051874.png" alt="image-20240521113051874"></p><p><img src="/../../../../images/image-20240521114009850.png" alt="image-20240521114009850"></p><p><img src="/../../../../images/image-20240521114015637.png" alt="image-20240521114015637"></p><p><img src="/../../../../images/image-20240521114024858.png" alt="image-20240521114024858"></p><p><img src="/../../../../images/image-20240521114034980.png" alt="image-20240521114034980"></p><p><img src="/../../../../images/image-20240521114041883.png" alt="image-20240521114041883"></p><p><img src="/../../../../images/image-20240521114117074.png" alt="image-20240521114117074"></p><p><img src="/../../../../images/image-20240521114127309.png" alt="image-20240521114127309"></p>]]></content>
      
      
      <categories>
          
          <category> Network - 网工中级 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Network </tag>
            
            <tag> 网工中级 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IP子网划分</title>
      <link href="/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/IP%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86/"/>
      <url>/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/IP%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86/</url>
      
        <content type="html"><![CDATA[<h1 id="IP子网划分"><a href="#IP子网划分" class="headerlink" title="IP子网划分"></a>IP子网划分</h1><h2 id="IP地址"><a href="#IP地址" class="headerlink" title="IP地址"></a>IP地址</h2><p>IPv4地址：32位，点分十进制方式表示</p><p>IP地址组成：网络位+主机位</p><p><img src="/../../../../images/image-20240510110624771.png" alt="image-20240510110624771"></p><p>例如：</p><p>192.168.0.1 - &gt; 11000000 10101000 00000000 00000001</p><p><img src="/../../../../images/image-20240510110719602.png" alt="image-20240510110719602"></p><h3 id="IP地址分类"><a href="#IP地址分类" class="headerlink" title="IP地址分类"></a>IP地址分类</h3><p><img src="/../../../../images/image-20240510110833383.png" alt="image-20240510110833383"></p><p><img src="/../../../../images/image-20240510110840324.png" alt="image-20240510110840324"></p><h3 id="网络掩码"><a href="#网络掩码" class="headerlink" title="网络掩码"></a>网络掩码</h3><p>作用：用于描述IP地址中网络位和主机位的分界线</p><p>掩码两种表示方法:255.255.255.0&#x3D;&#x2F;24  255.255.255.128&#x3D;&#x2F;25</p><p><img src="/../../../../images/image-20240510111039229.png" alt="image-20240510111039229"></p><h3 id="三类地址"><a href="#三类地址" class="headerlink" title="三类地址"></a>三类地址</h3><p>**网络地址: **</p><p>指代网络的地址。在网络的IPv4 地址范围内，最小地址保留为网络地址。此地址的主机部分的每个主机位均为0。</p><p>**广播地址: **</p><p>用于向网络中的所有主机发送数据的特殊地址。广播地址使用该网络范围内的最大地址。<br>即主机部分的各比特位全部为1的地址。</p><p><strong>主机地址:</strong> </p><p>可分配给网络中终端设备的地址。</p><p><img src="/../../../../images/image-20240510111243336.png" alt="image-20240510111243336"></p><h2 id="VLSM和CIDR"><a href="#VLSM和CIDR" class="headerlink" title="VLSM和CIDR"></a>VLSM和CIDR</h2><p>VLSM(变长子网掩码，Variable Length Subnet Mask）</p><p>就是”子网掩码值”变大。</p><p>例如：172.16.10.0&#x2F;24  —VLSM —&gt; 172.16.10.0&#x2F;30</p><p>作用：有效利用IP地址，减小广播风暴。</p><p>CIDR(无类域间路由，超网 ClasslessInter-Domain Routing )</p><p>就是”IP地址聚合”</p><p>例如：</p><p>200.200.192.0&#x2F;24</p><p>200.200.193.0&#x2F;24</p><p>200.200.194.0&#x2F;24</p><p>200.200.195.0&#x2F;24</p><p>超网聚合：200.200.192.0&#x2F;22</p><p>作用：减小骨干路由器表项压力。</p><h2 id="子网划分-VLSM"><a href="#子网划分-VLSM" class="headerlink" title="子网划分 VLSM"></a>子网划分 VLSM</h2><p>为什么子网划分呢？</p><p>某公司有500台PC，分配一个标准C类网段(254个可用)，IP地址不够用，分配一个标准B类网IP又会产生大量的浪费(65534个可用，利用率不足1%)。标准ABC类地址存在如下问题:</p><p><strong>(1)标准主类网络划分，造成IP地址空间浪费。<br>(2)广播域中PC数量过多，广播风暴会消耗网络资源。</strong></p><p>IP子网划分和VLAN的关系：</p><p>1、都是隔离技术。</p><p>2、子网划分是针对IP(网络层)，VLAN是针对以太网(数据链路层)。</p><p>3、一般VLAN与子网对应，每个子网主机数量建议一个C类地址(254台)，最大不超4个C类地址(1016台)</p><p><img src="/../../../../images/image-20240510112541606.png" alt="image-20240510112541606"></p><h3 id="子网划分原理"><a href="#子网划分原理" class="headerlink" title="子网划分原理"></a>子网划分原理</h3><p>原理：网络位向主机位借位</p><p>网络位向主机位借位，即网络部分的位数加长，借用的位表示子网位。</p><p>如果借用1位，则可以划分为21&#x3D;2个子网，借用2位可以划分为22&#x3D;4个子网，借用3位，可以划分为23&#x3D;8个子网。</p><p><img src="/../../../../images/image-20240510113007143.png" alt="image-20240510113007143"></p><p><img src="/../../../../images/image-20240510113058784.png" alt="image-20240510113058784"></p><h3 id="类1：已知子网主机数量，进行子网划分"><a href="#类1：已知子网主机数量，进行子网划分" class="headerlink" title="类1：已知子网主机数量，进行子网划分"></a><strong>类1</strong>：已知子网主机数量，进行子网划分</h3><p>某公司有6个部门，给出IP地址段192.168.1.0&#x2F;24，如何进行子网划分?</p><p><img src="/../../../../images/image-20240510113305879.png" alt="image-20240510113305879"></p><p>扩展1:进行子网划分后，第一个子网广播地址是多少?</p><p><img src="/../../../../images/image-20240510113357127.png" alt="image-20240510113357127"></p><p>扩展2:192.168.1.159属于什么地址?</p><p><img src="/../../../../images/image-20240510113411005.png" alt="image-20240510113411005"></p><h3 id="类2：掩码转换"><a href="#类2：掩码转换" class="headerlink" title="类2：掩码转换"></a><strong>类2</strong>：掩码转换</h3><p>PC1的IP地址为192.168.5.16，PC2的IP地址为192.168.5.100，PC1和PC2在同一网段中，其子网掩<br>码可能是( D )。<br>A.255.255.255.240                                         B.255.255.255.224<br>C.255.255.255.192<br>D.255.255.255.128</p><p>【解析】100-16&#x3D;84，那么地址块需要大于84，只有D满足要求。A可以转换为&#x2F;28，地址块是232-28&#x3D;16，B可以转换为&#x2F;27，地址块是232-27&#x3D;32;C转换为126，地址块是232-26&#x3D;64;D可以转换为&#x2F;25地址块是232-25&#x3D;128。</p><p>某校园网的地址是202.115.192.0&#x2F;19，要把该网络分成30个子网，则子网掩码应该是( D )</p><p>A.255.255.200.0                                                     B.255.255.224.0<br>C.255.255.254.0<br>D.255.255.255.0</p><p>记住：128 64 32 16 8 4 2 1 0</p><p><img src="/../../../../images/image-20240510113927559.png" alt="image-20240510113927559"></p><p>对IPv4地址段192.168.10.0&#x2F;24进行子网划分，<br>要求每个子网至少50个可用IP地址其主机位数最少需要<br>(52)位，(53)属于所划分子网的网络号。</p><p>(52)A.7 B.5 C.8 D.6</p><p>(53 )                                                                     A.192.168.10.32<br>C.192.168.10.160<br>B.192.168.10.0<br>D.192.168.10.96</p><p>答案： D B</p><p>【解析】要满足每个子网50台主机，即主机位至少为6(2^6-2&#x3D;62)，网络号是&#x2F;26,地址块是2^(32-26)&#x3D;64，故子网地址肯定是64的倍数，即192.168.10.64n(n&#x3D;0,1,2,3…)。</p><h3 id="类3：掩码作用位置与地址块计算"><a href="#类3：掩码作用位置与地址块计算" class="headerlink" title="类3：掩码作用位置与地址块计算"></a>类3：掩码作用位置与地址块计算</h3><p>如下图所示，如果网络掩码是x，那么:</p><p>如果x范围是25-32，那么掩码作用于第四段，地址块&#x3D;2^(32-x),例如掩码是28，地址块&#x3D;2^(32-28)&#x3D;2^4&#x3D;16</p><p>如果x范围是17-24，那么掩码作用于第三段，地址块&#x3D;2^(24-x),例如掩码是22，地址块&#x3D;2^(24-22)&#x3D;2^2&#x3D;4</p><p>如果x范围是9-16,那么掩码作用于第二段，地址块&#x3D;2^(16-x),例如掩码是12，地址块&#x3D;2^(16-12)&#x3D;2^4&#x3D;16</p><p>如果x范围是0-8，那么掩码作用于第一段，地址块&#x3D;2^(8-x),例如掩码是7，地址块&#x3D;2^(8-7)&#x3D;2^1&#x3D;2</p><p><img src="/../../../../images/image-20240510114550154.png" alt="image-20240510114550154"></p><p>下面的IP地址中，不属于同一网络的是(52)。A.172.20.34.28&#x2F;21 B.172.20.39.100&#x2F;21  C.172.20.32.176&#x2F;21D.172.20.40.177&#x2F;21</p><p>【解析】求给出几个选项的网络地址。121掩码地址块都是224-21&#x3D;8，那么可以推出子网部分肯定是8的倍数，且作用于第三段。故172.20.32.0和172.20.40.0是网络地址，ABC都属于前者，只有D属于后者。</p><p>属于网络215.17.204.0&#x2F;22的地址是(51)。B      A.215.17.208.200<br>B.215.17.206.10<br>C.215.17.203.0<br>D.215.17.224.0</p><p>【summer解析】215.17.204.0&#x2F;22掩码是&#x2F;22，作用位在第三段，且地址块为224-22&#x3D;22&#x3D;4。可以写出所有子网地址:</p><p><img src="/../../../../images/image-20240510114734848.png" alt="image-20240510114734848"></p><p>有4个网络地址:192.168.224.1、192.168.223.255、192.168.232.25和192.168.216.5，如果子网掩码为 255.255.240.0，则这4个地址分别属于(54)个子网。下面列出的地址对中，属于同一个子网的是(55)。<br>(54)A.1B.2 C3 D.4<br>(55)                                                                      A.192.168.224.1和192.168.223.255<br>C.192.168.232.25 和192.168.216.5<br>B.192.168.223.255和192.168.232.25        D.192.168.223.255 和192.168.216.5</p><p>B D</p><p><img src="/../../../../images/image-20240510114906356.png" alt="image-20240510114906356"></p><h3 id="类4应用型子网划分"><a href="#类4应用型子网划分" class="headerlink" title="类4应用型子网划分"></a>类4应用型子网划分</h3><p>某公司为多个部门划分了不同的局域网，每个局域网中的主机数量如下表所示，计划使用地址段192.168.10.0&#x2F;24划分子网，以满足公司每个局域网的IP地址需求，请为各部门选择最经济的地址段或子网掩码长度。</p><p><img src="/../../../../images/image-20240510115630177.png" alt="image-20240510115630177"></p><p>答案： D A C</p><p>【summer解析】子网划分一般先满足主机量需求大的部门,题目中应先满足财务部需求，一共60台主机，而2^6-2&#x3D;62,刚好满足，那么主机位建议6位,地址块为2^6&#x3D;64。网络位32-6&#x3D;26，原来的网络位是24位，则相当于新增了2位子网位，可以分成4个子网，分别为:                                     192.168.10.0&#x2F;26、192.168.10.64&#x2F;26、192.168.10.128&#x2F;26、192.168.10.192&#x2F;26。<br>财务部使用这四个子网地址中的哪一个,直接看(53)题选项,只有A答案属于这四个子网，故(53)选A。接着计算营销部的掩码，由于20台主机需求，主机位为5位即可,那么子网掩码是&#x2F;27，选D。管理部主机数量为8，主机位至少为4为，掩码是&#x2F;28。计算完成后，最好带入题目进行检验，实际划分如下图所示:</p><p><img src="/../../../../images/image-20240510115716066.png" alt="image-20240510115716066"></p><p>分支机构有营销部、市场部、生产部、人事部四个部门，每个部门需要访问互联网主机数量如表所示，现计划对网段10.11.230.0&#x2F;24 进行子网划分，为以上四个部分规划IP 地址，请补充表中的空(1)-(4)。</p><p><img src="/../../../../images/image-20240510115733372.png" alt="image-20240510115733372"></p><p>[答案]     (1)10.11.230.0(2)255.255.255.192(3)10.11.230.224(4)255.255.255.240</p><p><img src="/../../../../images/image-20240510115827007.png" alt="image-20240510115827007"></p><p>该企业办公网络采用172.16.1.0&#x2F;24地址段，部门终端数量如表1-1所示，请将网络地址规划补充完整。</p><p><img src="/../../../../images/image-20240510115853079.png" alt="image-20240510115853079"></p><p>【参考答案】<br>(1)255.255.255.224<br>(3)172.16.1.33<del>172.16.1.62<br>(2)172.16.1.65</del>172.16.1.126<br>(4)255.255.255.128</p><p><img src="/../../../../images/image-20240510115926144.png" alt="image-20240510115926144"></p><p><img src="/../../../../images/image-20240510120021439.png" alt="image-20240510120021439"></p><p>(1)28<br>(2)172.16.1.17~172.16.1.30<br>(3)172.16.1.33 ~172.16.1.62<br>(4)26</p><p>假设某公司有8000台主机，采用CIDR方法进行划分，则至少给它分配(51)个C类网络。如果192.168.210.181是其中一台主机地址，则其网络地址为(52)<br>(51)A.8 B.10 C.16 D.32<br>(52)A.192.168.192.0&#x2F;19 B192.168.192.0&#x2F;20 C.192.168.208.0&#x2F;19 D.192.168.208.0&#x2F;20</p><p><a href="51">参考答案</a>D A<br>【解析】<br>(51)1个C类地址有254个可用地址，4个C即接近1000个，那么8000台PC，合计约32个C类地址</p><p>(52)8000台主机，那么主机位至少是13位，2^13-2&#x3D;8190，网络位最多32-13&#x3D;19，直接排除BD.&#x2F;19掩码作用于第3段，地址块是224-19&#x3D;25&#x3D;32，则子网必须是32的倍数。192132&#x3D;6,208&#x2F;32&#x3D;6.5<br>故排除C。</p><p>路由器收到一个数据报文，其目标地址为20.112.17.12，该地址属于(53)子网。<br>A.20.112.17.8&#x2F;30<br>C.20.96.0.0&#x2F;11<br>B.20.112.16.0&#x2F;24<br>D.20.112.18.0&#x2F;23</p><p>【参考答案】C<br>【解析】思路与上题第二问类似，A选项可用地址20.112.17.9-11，B选项可用地址是20.112.16.1-254。</p><p>C选项&#x2F;11作用于第2段，地址块是216-11&#x3D;25&#x3D;32，即可用地址区间是20.96.0.1-20.127.255.254</p><p>D选项&#x2F;23作用于第3段，地址块是224-23&#x3D;21&#x3D;2，即可用地址:20.112.18.1-20.112.19.254。</p><h2 id="无类域间路由CIDR"><a href="#无类域间路由CIDR" class="headerlink" title="无类域间路由CIDR"></a>无类域间路由CIDR</h2><p>计算过程：</p><p><img src="/../../../../images/image-20240510120319332.png" alt="image-20240510120319332"></p><p>某企业分配给产品部的IP地址块为192.168.31.192&#x2F;26，分配给市场部的IP地址块为192.168.31.160&#x2F;27，分配给财务部的IP地址块为192.168.31.128&#x2F;27，那么这三个地址块经过聚合后的地址为()。                                                 A.192.168.31.0&#x2F;25<br>B.192.168.31.0&#x2F;26<br>C.192.168.31.128&#x2F;25<br>D.192.168.31.128&#x2F;26</p><p><img src="/../../../../images/image-20240510120341224.png" alt="image-20240510120341224"></p><p>对下面4个网络:110.125.129.0&#x2F;24、110.125.130.0&#x2F;24、110.125.132.0&#x2F;24和110.125.133.0&#x2F;24进行路由汇聚，能覆盖这4个网络的地址是(26)。                                   A.110.125.128.0&#x2F;21<br>B.110.125.128.0&#x2F;22<br>C.110.125.130.0&#x2F;22<br>D.110.125.132.0&#x2F;23</p><p>【参考答案】 A<br>【解析】</p><p>110.125.10000  001.0</p><p>110.125.10000  010.0</p><p>110.125.10000  100.0</p><p>110.125.10000  101.0</p><p><strong>汇总后为110.125.128.0&#x2F;21</strong></p>]]></content>
      
      
      <categories>
          
          <category> Network - 网工中级 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Network </tag>
            
            <tag> 网工中级 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>路由策略和流量控制</title>
      <link href="/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E8%B7%AF%E7%94%B1%E7%AD%96%E7%95%A5%E5%92%8C%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6/"/>
      <url>/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E8%B7%AF%E7%94%B1%E7%AD%96%E7%95%A5%E5%92%8C%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="路由策略和流量控制"><a href="#路由策略和流量控制" class="headerlink" title="路由策略和流量控制"></a>路由策略和流量控制</h1><h2 id="路由控制"><a href="#路由控制" class="headerlink" title="路由控制"></a>路由控制</h2><p>可以通过路由策略(Route-Policy)实现。以下常用方式：</p><p>控制路由的发布:通过路由策略对发布的路由进行过滤，只发布满足条件的路由。</p><p>控制路由的接收:通过路由策略对接收的路由进行过滤，只接收满足条件的路由。</p><p>控制路由的引入:通过路由策略控制从其他路由协议引入的路由条目，只有满足条件的路由才会被引入。</p><h3 id="匹配工具1：访问控制列表"><a href="#匹配工具1：访问控制列表" class="headerlink" title="匹配工具1：访问控制列表"></a>匹配工具1：访问控制列表</h3><p>访问控制列表(Access Control List,ACL)是一个匹配工具，能够对报文及路由进行匹配和区分。</p><p><img src="/../../../../images/image-20240518084412880.png" alt="image-20240518084412880"></p><p><img src="/../../../../images/image-20240518084459974.png" alt="image-20240518084459974"></p><p>“ACL只能匹配路由的前缀，无法匹配路由的网络掩码。”是什么意思？</p><p>比如：</p><p>1.1.1.0&#x2F;24，1.1.2.0&#x2F;24，1.1.3.0&#x2F;24</p><p>acl 2000 permit source 1.1.2.0 0.0.0.255</p><p>能够匹配1.1.2.0&#x2F;24 ，匹配前缀以1.1.2开头的路由</p><p>1.1.2.8&#x2F;29，1.1.2.0&#x2F;30都能够匹配成功</p><h3 id="匹配工具2：IP前缀列表"><a href="#匹配工具2：IP前缀列表" class="headerlink" title="匹配工具2：IP前缀列表"></a>匹配工具2：IP前缀列表</h3><p>IP前缀列表(IP-Prefix List)是将路由条目的网络地址、掩码长度作为匹配条件的过滤器，可在各路由协议发布和接收路由时使用。<br><strong>不同于ACL，IP-Prefix List能够同时匹配IP地址前缀长度以及掩码长度，增强了匹配的精确度。</strong></p><p><img src="/../../../../images/image-20240518085138688.png" alt="image-20240518085138688"></p><p>1、ip-prefix-name:地址前缀列表名称</p><p>2、序号:本匹配项在地址前缀列表中的序号，匹配时根据序号从小到大进行顺序匹配</p><p>3、动作:permit&#x2F;deny，地址前缀列表的匹配模式为允许&#x2F;拒绝，表示匹配&#x2F;不匹配</p><p>4、IP网段与掩码:匹配路由的网络地址，以及限定网络地址的前多少位需严格匹配</p><p>5、掩码范围:匹配路由前缀长度，掩码长度的匹配范围 mask-length&lt;&#x3D;greater-equal-value&lt;&#x3D;less-equal-value&lt;&#x3D;32</p><p><strong>IP-Prefix的配置举例</strong></p><p><img src="/../../../../images/image-20240518085548219.png" alt="image-20240518085548219"></p><p><img src="/../../../../images/image-20240518085600222.png" alt="image-20240518085600222"></p><p><img src="/../../../../images/image-20240518085620385.png" alt="image-20240518085620385"></p><p><img src="/../../../../images/image-20240518085629918.png" alt="image-20240518085629918"></p><p><img src="/../../../../images/image-20240518085649289.png" alt="image-20240518085649289"></p><p><img src="/../../../../images/image-20240518085655946.png" alt="image-20240518085655946"></p><p>IP-Prefix一些特殊用法</p><p><img src="/../../../../images/image-20240518085731192.png" alt="image-20240518085731192"></p><h3 id="IP-Prefix和ACL的区别"><a href="#IP-Prefix和ACL的区别" class="headerlink" title="IP-Prefix和ACL的区别"></a>IP-Prefix和ACL的区别</h3><p><strong>(1)产生背景</strong><br>    ACL的产生最初目的是为了过滤数据包而诞生的。</p><p>​IP-Prefix的产生是用于精确匹配路由条目</p><p><strong>(2)实现功能</strong><br>    ACL既可以用来匹配路由，又可以用来过滤数据包。</p><p>​IP-Prefix只能用来匹配路由，不能用于过滤数据包</p><p><strong>(3)匹配路由精确度</strong><br>    ACL不能进行精确匹配路由，匹配路由时只能匹配路由的网络号但无法匹配掩码。</p><p>​地址前缀列表比ACL更灵活，可以精确匹配路由，对于前缀相同而掩码不同的路由可以精确匹配</p><h3 id="策略工具：Route-Policy"><a href="#策略工具：Route-Policy" class="headerlink" title="策略工具：Route-Policy"></a>策略工具：Route-Policy</h3><p>Route-Policy是一个策略工具，用于过滤路由信息，以及为过滤后的路由信息设置路由属性。</p><p>-个Route-Policy由一个或多个节点(Node)构成，每个节点都可以是一系列条件语句(匹配条件)以及执行语句(执行动作)的集合，这些集合按照编号从小到大的顺序排列。</p><p><img src="/../../../../images/image-20240518090624518.png" alt="image-20240518090624518"></p><h4 id="Route-Policy的组成"><a href="#Route-Policy的组成" class="headerlink" title="Route-Policy的组成"></a><strong>Route-Policy的组成</strong></h4><p>-个Route-Policy由一个或多个节点构成，每个节点包括多个if-match和apply子句。</p><p><img src="/../../../../images/image-20240518090731895.png" alt="image-20240518090731895"></p><p>路由策略使用不同的匹配条件和匹配模式选择路由和改变路由属性</p><p><img src="/../../../../images/image-20240518090823316.png" alt="image-20240518090823316"></p><h4 id="Route-Policy的基础命令"><a href="#Route-Policy的基础命令" class="headerlink" title="Route-Policy的基础命令"></a>Route-Policy的基础命令</h4><p><img src="/../../../../images/image-20240518091246301.png" alt="image-20240518091246301"></p><p><img src="/../../../../images/image-20240518091253264.png" alt="image-20240518091253264"></p><p><img src="/../../../../images/image-20240518091310301.png" alt="image-20240518091310301"></p><h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><h4 id="案例1：修改路由属性"><a href="#案例1：修改路由属性" class="headerlink" title="案例1：修改路由属性"></a>案例1：修改路由属性</h4><p><img src="/../../../../images/image-20240518091349398.png" alt="image-20240518091349398"></p><p>[R1] ip ip-prefix external index 10 permit 192.168.1.0 24</p><p>[R1]route-policy RP permit node 10<br>[R1-route-policy] if match ip prefix external<br>[R1-route-policy] apply cost-type type-1<br>[R1-route-policy] quit</p><p>[R1] ospf<br>[R1-ospf-1] import-route direct route-policy RP</p><ul><li><p><code>[R1]route-policy RP permit node 10</code>: 这条命令创建了一个名为“RP”的路由策略，节点标识为 10，该策略允许匹配此策略的路由。</p></li><li><p><code>[R1-route-policy] if match ip prefix external</code>: 在路由策略中，这行指定该策略将根据前面创建的名为“external”的 IP 前缀列表来匹配路由。</p></li><li><p><code>[R1-route-policy] apply cost-type type-1</code>: 这条命令为匹配策略的路由应用特定的 OSPF 成本类型（type-1）。</p></li><li><p><code>LK1] ospf</code>: 这条命令可能是进入设备的 OSPF 配置模式。</p></li><li><p><code>[R1-ospf-1]import-route direct route-policy RP</code>: 这条命令使用名为“RP”的路由策略将直连路由导入 OSPF 进程。这意味着只有匹配“RP”策略的路由才会被导入 OSPF。</p></li></ul><p><strong>回顾</strong></p><p>在 OSPF（开放最短路径优先）协议中，类型 1 和类型 2 的区别主要与外部路由（External Routes）的度量值（Metric Type）有关，这些度量值决定了路由的优先级和计算路径成本的方式。</p><ol><li><strong>类型 1 路由（Type 1 External Routes）：</strong><ul><li><strong>度量值累加（Metric Additive）：</strong> 类型 1 路由的总成本是外部路由的成本加上从当前路由器到达外部路由的内部 OSPF 路径成本。换句话说，OSPF 会把外部路径的成本和内部 OSPF 网络到达该路径的成本累加起来。</li><li><strong>应用场景：</strong> 适用于需要准确反映整个路径成本的场景，特别是在路径中不同链路的成本差异较大时。</li><li><strong>计算公式：</strong> 总成本 &#x3D; 内部路径成本 + 外部路径成本。</li></ul></li><li><strong>类型 2 路由（Type 2 External Routes）：</strong><ul><li><strong>度量值不累加（Metric Non-Additive）：</strong> 类型 2 路由的总成本仅为外部路由的成本，不包括从当前路由器到达外部路由的内部 OSPF 路径成本。OSPF 认为外部路径的成本已经足够高，因此不再增加内部 OSPF 路径的成本。</li><li><strong>应用场景：</strong> 适用于外部路径成本已经很高，并且可以忽略内部 OSPF 网络成本的场景，比如当外部路径的带宽或延迟远高于内部路径时。</li><li><strong>计算公式：</strong> 总成本 &#x3D; 外部路径成本。</li></ul></li></ol><p><strong>如何选择使用类型 1 或类型 2 路由</strong></p><p>选择使用类型 1 还是类型 2 取决于网络的设计和管理需求：</p><ul><li><strong>类型 1</strong>：适合需要精细控制路由选择的场景，特别是当你希望 OSPF 考虑到所有链路的成本（包括内部和外部）时。</li><li><strong>类型 2</strong>：适合简单和快速的路由选择场景，尤其是当外部路由的成本已经很高，内部网络的成本相对可以忽略不计时。</li></ul><h4 id="案例2：解决次优路径问题"><a href="#案例2：解决次优路径问题" class="headerlink" title="案例2：解决次优路径问题"></a>案例2：解决次优路径问题</h4><p><img src="/../../../../images/image-20240518092405179.png" alt="image-20240518092405179"></p><p>当10.1.1.0&#x2F;24引入OSPF里面，R2学到，R3,R4又学到；</p><p>1.10.1.0&#x2F;24是外部引入的，OSPF的AES是优先级是150，而IS-IS的优先级为15，当流量进来时，R3会选择R3-R4-R2-R1这条路由，而不是选择R4-R1，这样路由不是最优的。</p><p>解决方案:R3通过ACL匹配10,1.1.0&#x2F;24路由，在Route-Policy中调用该条ACL，将匹配这条ACL的路由的优先级设置为14(优于IS-IS)。在OSPF视图下使用preference ase命令调用Route-Policy修改外部路由的优先级。</p><p>在R3上执行以下操作:<br>[R3]acl 2000</p><p>[R3-acl-basic-2000] rule permit source 10.1.1.0 0</p><p>[R3-acl-basic-2000]quit</p><p>[R3]route-policy hcip permit node 10</p><p>[R3-route-policy]if-match acl 2000</p><p>[R3-route-policy] apply preference 14</p><p>[R3-route-policy] quit</p><p>[R3] ospf 1</p><p>[R3]ospf 1R3-ospf-1] preference ase route-policy hcip</p><h2 id="策略路由"><a href="#策略路由" class="headerlink" title="策略路由"></a>策略路由</h2><h3 id="PBR"><a href="#PBR" class="headerlink" title="PBR"></a>PBR</h3><p>现在有流量要去192.168.1.0&#x2F;24，根据路由表是走RTB这条链路，但是我又有特殊业务要求，先需要一部分流量走RTC这条链路，这时候需要PBR来做策略路由，使得一部分流量走RTC这条链路</p><p><img src="/../../../../images/image-20240518094819322.png" alt="image-20240518094819322"></p><p>PBR(Policy-Based Routing，策略路由):PBR使得网络设备不仅能够基于报文的目的IP地址进行数据转发，更能基于其他元素进行数据转发，例如源IP地址、源MAC地址、目的MAC地址、源端口号、目的端口号、VLAN-ID等等。</p><p>用户还可以使用ACL匹配特定的报文，然后针对该ACL进行PBR部署。<br>若设备部署了PBR，则被匹配的报文优先根据PBR的策略进行转发，即PBR策略的优先级高于传统路由表。</p><h4 id="命令语法"><a href="#命令语法" class="headerlink" title="命令语法"></a>命令语法</h4><p><img src="/../../../../images/image-20240518095208976.png" alt="image-20240518095208976"></p><h4 id="PBR的分类"><a href="#PBR的分类" class="headerlink" title="PBR的分类"></a>PBR的分类</h4><p>接口路由</p><p><img src="/../../../../images/image-20240518095349074.png" alt="image-20240518095349074"></p><p>本地PBR</p><p><img src="/../../../../images/image-20240518095405790.png" alt="image-20240518095405790"></p><h3 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h3><p><img src="/../../../../images/image-20240518095645329.png" alt="image-20240518095645329"></p><p><img src="/../../../../images/image-20240518095652136.png" alt="image-20240518095652136"></p><p><strong>1. 创建 ACL 以匹配流量</strong></p><p><strong>ACL 3000：匹配网段 10.1.1.0&#x2F;24</strong></p><pre><code>plaintext复制代码[RTA] acl number 3000[RTA-acl-adv-3000] rule 10 permit ip source 10.1.1.0 0.0.0.255[RTA-acl-adv-3000] quit</code></pre><p><strong>ACL 3001：匹配网段 10.1.2.0&#x2F;24</strong></p><pre><code>plaintext复制代码[RTA] acl number 3001[RTA-acl-adv-3001] rule 10 permit ip source 10.1.2.0 0.0.0.255[RTA-acl-adv-3001] quit</code></pre><p><strong>2. 创建 PBR 策略</strong></p><p><strong>为网段1配置 PBR（ISP1：202.1.2.3）</strong></p><pre><code>plaintext复制代码[RTA] policy-based-route hcip permit node 10[RTA-policy-based-route-hcip-10] if-match acl 3000[RTA-policy-based-route-hcip-10] apply ip address next-hop 202.1.2.3[RTA-policy-based-route-hcip-10] quit</code></pre><p><strong>为网段2配置 PBR（ISP2：154.1.2.3）</strong></p><pre><code>plaintext复制代码[RTA] policy-based-route hcip permit node 20[RTA-policy-based-route-hcip-20] if-match acl 3001[RTA-policy-based-route-hcip-20] apply ip address next-hop 154.1.2.3[RTA-policy-based-route-hcip-20] quit</code></pre><p><strong>3. 在接口 GE0&#x2F;1&#x2F;0 上应用 PBR</strong></p><pre><code>plaintext复制代码[RTA] interface GigabitEthernet 0/1/0[RTA-GigabitEthernet0/1/0] ip policy-based-route hcip[RTA-GigabitEthernet0/1/0] quit</code></pre><h3 id="MQC"><a href="#MQC" class="headerlink" title="MQC"></a>MQC</h3><p>MQC(Modular QoS Command-Line Interface，模块化QoS命令行)是指通过将具有某类共同特征的数据流划分为一类，并为同一类数据流提供相同的服务，也可以对不同类的数据流提供不同的服务。</p><p>MQC包含三个要素:流分类(traffic classifier)、流行为(traffic behavior)和流策略(traffic policy)。</p><p>MQC的流行为支持重定向报文，因此可以使用MQC实现IP单播策略路由。</p><p><img src="/../../../../images/image-20240518101329608.png" alt="image-20240518101329608"></p><p><strong>流策略</strong></p><p>流策略:将流分类和流行为绑定，对分类后的报文执行对应流行为中定义的动作。<br>一个流策略可以绑定多个流分类和流行为。</p><p><img src="/../../../../images/image-20240518101425009.png" alt="image-20240518101425009"></p><p><strong>流分类</strong></p><p>流分类:定义一组流量匹配规则，以对报文进行分类。流分类支持的匹配项如下所示。</p><p><img src="/../../../../images/image-20240518101530560.png" alt="image-20240518101530560"></p><p><strong>流策略</strong></p><p>流策略:流策略支持在接口上调用。</p><p>流策略存在方向(inbound、outbound)的概念，策略中的流行为匹配入、出方向的报文对匹配中的报文执行相应的流动作。</p><p><img src="/../../../../images/image-20240518101950375.png" alt="image-20240518101950375"></p><h3 id="配置命令"><a href="#配置命令" class="headerlink" title="配置命令"></a>配置命令</h3><p>1、创建流分类<br>[Huawei] traffic classifier classifer-name [ operator { and | or } ]<br>缺省情况下，流分类中各规则之间的关系为“或”(or)。流分类中的匹配规则配置可查阅产品手册</p><p>2、创建流行为<br>[Huawei] traffic behavior behavior-name<br>根据实际情况定义流行为中的动作，只要各动作不冲突，都可以在同一流行为中配置。流行为具体配置可查阅产品手册。</p><p>3、创建流策略，并绑定流分类与流行为3.<br>[Huawei] traffic policy policy-name </p><p>[Huawei-trafficpolicy-policyname] classifier classifier-name behavior behavior-name</p><h3 id="案例-2"><a href="#案例-2" class="headerlink" title="案例"></a>案例</h3><h4 id="案例1：MQC实现策略路由"><a href="#案例1：MQC实现策略路由" class="headerlink" title="案例1：MQC实现策略路由"></a>案例1：MQC实现策略路由</h4><p><img src="/../../../../images/image-20240518102630070.png" alt="image-20240518102630070"></p><p><img src="/../../../../images/image-20240518102635280.png" alt="image-20240518102635280"></p><p><img src="/../../../../images/image-20240518102651643.png" alt="image-20240518102651643"></p><p><img src="/../../../../images/image-20240518102705707.png" alt="image-20240518102705707"></p><h4 id="案例2：MQC过滤流量"><a href="#案例2：MQC过滤流量" class="headerlink" title="案例2：MQC过滤流量"></a>案例2：MQC过滤流量</h4><p><img src="/../../../../images/image-20240518103010306.png" alt="image-20240518103010306"></p><p><img src="/../../../../images/image-20240518103024548.png" alt="image-20240518103024548"></p><p><img src="/../../../../images/image-20240518103037066.png" alt="image-20240518103037066"></p><p>为充分利用两个运营商的带宽，请提供至少4种多出口链路负载策略。</p><p><img src="/../../../../images/image-20240518103204465.png" alt="image-20240518103204465"></p>]]></content>
      
      
      <categories>
          
          <category> Network - 网工中级 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Network </tag>
            
            <tag> 网工中级 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>华为设备登录配置</title>
      <link href="/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E5%8D%8E%E4%B8%BA%E8%AE%BE%E5%A4%87%E9%85%8D%E7%BD%AE/"/>
      <url>/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E5%8D%8E%E4%B8%BA%E8%AE%BE%E5%A4%87%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="华为设备配置"><a href="#华为设备配置" class="headerlink" title="华为设备配置"></a>华为设备配置</h2><p><strong>system-view</strong> &#x2F;&#x2F;进入系统模式<br><strong>sysname</strong> xxx &#x2F;&#x2F;设备重命名<br>telnet server enable **&#x2F;&#x2F;开启设备telnet功能<br>user-interface vty 0 4 &#x2F;&#x2F;开启登录端口0-4<br>protocol inbound telnet  &#x2F;&#x2F;通过telnet协议登录<br>authentication-mode <strong>aaa</strong>  &#x2F;&#x2F;认证方式aaa</p><p>aaa  &#x2F;&#x2F;启动aaa</p><p>local-user admin123 password admin123  &#x2F;&#x2F;配置用户名密码</p><p>local-user admin123 service-type <strong>telnet</strong> &#x2F;&#x2F;用户用于telnet</p><p>local-user admin123 privilege level 15 &#x2F;&#x2F;用户等级为15</p><p><strong>quit</strong>  </p><h2 id="VLAN与VLANIF地址配置"><a href="#VLAN与VLANIF地址配置" class="headerlink" title="VLAN与VLANIF地址配置"></a>VLAN与VLANIF地址配置</h2><p>VLAN 和 VLANIF 有什么区别？</p><p>VLAN 是在二层交换机配置的，在交换机中的端口划分为逻辑上的多个虚拟网络</p><p>VLANIF 是在三层交换机或路由器配置的，VLANIF是用于不同VLAN之间的通信，一般在VLANIF配置IP，作为VLAN的网关地址</p><p><img src="/../../../../images/image-20240427104856251.png" alt="image-20240427104856251"></p><pre><code>完整命令：LSW1system-viewvlan batch 10 20int g0/0/2port link-type access //把交换机接口模式设置为accessport default vlan 10 //把接口划入vlan10int g0/0/3port link-type accessport default vlan 20int g0/0/1port link-type trunkport trunk allow-pass vlan 10 20LSW2vlan batch 10 20int vlanif 10    //进入三层vlanif接口ip address 172.25.250.1 24  //要与PC机的网关一致int vlanif 20ip address 172.26.250.1 24int g0/0/1port link-type trunkport turnk allow-pass vlan 10 20</code></pre><h2 id="DHCP配置命令"><a href="#DHCP配置命令" class="headerlink" title="DHCP配置命令"></a>DHCP配置命令</h2><p>DHCP工作原理</p><p><img src="/../../../../images/image-20240427142145631.png" alt="image-20240427142145631"></p><p>DHCP租期更新</p><p><img src="/../../../../images/image-20240427142225375.png" alt="image-20240427142225375"></p><p><strong>基于接口地址池的DHCP配置</strong></p><p><img src="/../../../../images/image-20240427140743295.png" alt="image-20240427140743295"></p><p>dhcp enable  &#x2F;&#x2F;开启DHCP功能</p><p>int g0&#x2F;0&#x2F;0  </p><p>dhcp select interface  &#x2F;&#x2F;采用接口地址池的DHCP服务器端功能</p><p>dhcp server dns-list 10.1.1.2  &#x2F;&#x2F;指定接口地址池下的DNS服务器地址</p><p>dhcp server excluded-ip-address 10.1.1.2 &#x2F;&#x2F;配置接口池中不参与自动分配的IP地址范围</p><p>dhcp server lease day 3 &#x2F;&#x2F;接口地址池中IP地址的租用有效期</p><p>#注意每个接口的地址池可以网段，但一般是不同网段，容易IP冲突</p><p><strong>基于全局地址池的DHCP配置</strong></p><p><img src="/../../../../images/image-20240427141207127.png" alt="image-20240427141207127"></p><p>dhcp enable  </p><p>ip pool pool2 &#x2F;&#x2F;创建全局地址池名字为pool2</p><p>network 1.1.1.0 mask 24 &#x2F;&#x2F;设置IP地址范围</p><p>gateway-list 1.1.1.1 &#x2F;&#x2F;配置DHCP客户端的网关地址</p><p>dns-list 1.1.1.1 &#x2F;&#x2F;配置DHCP客户端的DNS服务器的IP地址</p><p>lease day 10  &#x2F;&#x2F; IP地址租期</p><p>int g0&#x2F;0&#x2F;0</p><p>dhcp select global  &#x2F;&#x2F;使能让接口DHCP服务器的功能</p><p>#最后在具体的接口中配置选择全局地址池。当GE0&#x2F;0&#x2F;0收到DHCP请求就会从全局地址池中进行IP地址分配。</p><hr><p><strong>DHCP-VLAN配置</strong></p><p><img src="/../../../../images/image-20240427151144856.png" alt="image-20240427151144856"></p><p>interface GigabitEthernet0&#x2F;0&#x2F;1<br> port link-type access<br> port default vlan 10</p><p>interface GigabitEthernet0&#x2F;0&#x2F;2<br> port link-type access<br> port default vlan 20</p><p>dhcp enable</p><p>interface Vlanif10<br> ip address 172.25.250.254 255.255.255.0<br> dhcp select interface<br> dhcp server excluded-ip-address 172.25.250.120 172.25.250.253<br> dhcp server lease day 3 hour 0 minute 0<br> dhcp server dns-list 8.8.8.8</p><p>interface Vlanif20<br> ip address 172.26.250.254 255.255.255.0<br> dhcp select global</p><p>[Huawei]ip pool pool2<br>[Huawei-ip-pool-pool2]network 172.26.250.0 mask 24<br>[Huawei-ip-pool-pool2]gateway-list 172.26.250.254<br>[Huawei-ip-pool-pool2]dns-list 8.8.8.8<br>[Huawei-ip-pool-pool2]lease day 10</p><h2 id="dhcp-relay-dhcp中继"><a href="#dhcp-relay-dhcp中继" class="headerlink" title="dhcp-relay(dhcp中继)"></a>dhcp-relay(dhcp中继)</h2><p>dhcp-relay(dhcp中继)的作用场景：dhcp客户端和dhcp服务器之间有很多设备，想要发送dhcp广播，中间有路由器，路由器能够隔离广播，所以发不了到dhcp服务器，所以需要dhcp-relay能够把dhcp广播转换会单播发给dhcp服务器</p><p>通俗地说，就是把dhcp广播转换为单播，从而发给dhcp服务器</p><p><img src="/../../../../images/image-20240427174409154.png" alt="image-20240427174409154"></p><p>R1</p><p><img src="/../../../../images/image-20240427174631228.png" alt="image-20240427174631228"></p><p>注意：只有一个DHCP服务器，选择DHCP relay server-ip</p><p>多个DHCP服务器，选择DHCP relay server-select </p><p>R2</p><p><img src="/../../../../images/image-20240427174700578.png" alt="image-20240427174700578"></p><h2 id="DHCP-Snooping"><a href="#DHCP-Snooping" class="headerlink" title="DHCP Snooping"></a>DHCP Snooping</h2><p>为什么需要DHCP snooping？</p><p>现实当中，除了有安全的DHCP服务器，可能还有”流氓”的DHCP服务器，当PC发送dhcp广播时，有可能”流氓”的DHCP服务器先收到，然后她给你先响应，对你的电脑造成影响。</p><p>如果配置了DHCP snooping，尽管”流氓”服务器她先响应，但是她不是trusted区域，响应包发给她，就被丢弃，根本到不了PC。</p><p>防止网络中非法DHCP服务器分配IP地址，从而有效防范DHCP攻击</p><p><img src="/../../../../images/image-20240427164919233.png" alt="image-20240427164919233"></p><p>R1</p><p><img src="/../../../../images/image-20240427175053356.png" alt="image-20240427175053356"></p><h2 id="ACL"><a href="#ACL" class="headerlink" title="ACL"></a>ACL</h2><h3 id="ACL原理"><a href="#ACL原理" class="headerlink" title="ACL原理"></a>ACL原理</h3><p><strong>作用：实现流量过滤</strong></p><p>ACL是由一系列permit或deny语句组成的，有序规则的列表。</p><p><img src="/../../../../images/image-20240427232056629.png" alt="image-20240427232056629"></p><p>每一条语句就说该ACL的一条规则。ACL则是规则的集合</p><hr><p>子网掩码：用来区分主机位和网络位</p><p>通配符掩码：ACL中使用。用来标识或检查IP地址的位，里面的0或1可以不是连续的</p><p>例如： source 1.1.1.0  0.0.0.255</p><p>0表示要检查，255表示任意</p><p>反掩码：OSPF中使用。里面的0和1必须是连续的</p><hr><p><strong>通配符</strong></p><p>通配符是一个32比特长度的数值，用于指示IP地址中哪些比特位需要严格匹配，哪些比特位无需匹配。</p><p>通配符通常采用类似网络掩码的点分十进制形式表示，但是含义却与网络掩码完全不同。</p><p>通配符中的1或者0可以不连续</p><p><img src="/../../../../images/image-20240427181827873.png" alt="image-20240427181827873"></p><p>匹配规则：   <strong>“0” 表示 “严格匹配”    “1” 表示 “任意”</strong></p><p>上图中：</p><p>rule 5中 匹配对象是：10.1.1.1</p><p>rule10中 匹配对象是：10.1.1.2</p><p>rule 15中 匹配对象是：10.1.1.0网段</p><p>如何匹配192.168.1.1&#x2F;24对应网段的地址?</p><p><img src="/../../../../images/image-20240427182324210.png" alt="image-20240427182324210"></p><p>如果匹配192.168.1.0网段的奇数地址或者偶数地址呢，该怎么写？</p><p>奇数：192.168.1.10.0.0.254</p><p>偶数：192.168.1.00.0.0.254</p><p><strong>分析：</strong></p><p>“0” 表示 “严格匹配”    “1” 表示 “任意”</p><p>那么通配符：</p><p>通配符：0.0.0.2540.0.0.11111110</p><p>IP地址：192.168.1.1  192.168.1.00000001</p><p>00000001，1~7位对应的通配符是1， “1” 表示 “任意”。</p><p>而最后一位”1”，对应的通配符是0，”0” 表示 “严格匹配”  </p><p>那好，为啥是奇数呢？</p><p>因为二进制转换成十进制，都是2^0+2^1+…</p><p>所以，只要最后一位是奇数，那么整个就是奇数</p><p>偶数同理。</p><h3 id="ACL分类"><a href="#ACL分类" class="headerlink" title="ACL分类"></a>ACL分类</h3><p>基于ACL规则定义方式的分类</p><p><img src="/../../../../images/image-20240427232410688.png" alt="image-20240427232410688"></p><p>基于ACL标识方法的分类</p><p><img src="/../../../../images/image-20240427232427994.png" alt="image-20240427232427994"></p><p><strong>基本ACL和高级ACL</strong></p><p><img src="/../../../../images/image-20240427232508478.png" alt="image-20240427232508478"></p><p><img src="/../../../../images/image-20240427232522098.png" alt="image-20240427232522098"></p><p>ACL的匹配顺序及匹配结果</p><p><strong>配置顺序(config模式)</strong></p><p>​系统按照ACL规则编号从小到大的顺序进行报文匹配，规则编号越小越容易被匹配</p><p><img src="/../../../../images/image-20240427232714333.png" alt="image-20240427232714333"></p><p>auto模式</p><p>它会根据颗粒度，自动调整规则顺序</p><p>例如：</p><p>acl 2000 match-order auto</p><p>rule permit source any</p><p>rule permit source 192.168.1.1 0.0.0.255</p><p>#她会自动调整顺序，不然这个没有啥意义</p><h3 id="ACL配置"><a href="#ACL配置" class="headerlink" title="ACL配置"></a>ACL配置</h3><p>基础ACL</p><p><img src="/../../../../images/image-20240427234341048.png" alt="image-20240427234341048"></p><p><img src="/../../../../images/image-20240427234359050.png" alt="image-20240427234359050"></p><p>高级ACL</p><p><img src="/../../../../images/image-20240427234445236.png" alt="image-20240427234445236"></p><p><img src="/../../../../images/image-20240427234452380.png" alt="image-20240427234452380"></p><p><img src="/../../../../images/image-20240427234511735.png" alt="image-20240427234511735"></p><h2 id="NAT网络地址转换"><a href="#NAT网络地址转换" class="headerlink" title="NAT网络地址转换"></a>NAT网络地址转换</h2><p>产生原因：IP地址不够用。</p><p>意义：能够有效节约IPv4地址</p><p>NAT：是对IP数据报文中的IP地址在进行转换，一般部署在网络出口设备，例如路由器或防火墙上。</p><h3 id="静态NAT"><a href="#静态NAT" class="headerlink" title="静态NAT"></a>静态NAT</h3><p>私有地址和公有地址进行一对一的映射。</p><p>支持双向互访: 私有地址访问Internet经过出口设备NAT转换时，会被转换成对应的公有地址。</p><p>同时，外部网络访问内部网络时，其报文中携带的公有地址(目的地址)也会被NAT设备转换成对应的私有地址。</p><p><img src="/../../../../images/image-20240429155947027.png" alt="image-20240429155947027"></p><p><strong>配置</strong></p><p>1.方式一:接口视图下配置静态NAT<br>[Huawei-GigabitEthernet0&#x2F;0&#x2F;0] </p><p><strong>nat static global</strong> {global-address} <strong>inside</strong> {host-address )</p><p>global参数用于配置外部公有地址，inside参数用于配置内部私有地址。</p><p>2:方式二:系统视图下配置静态NAT<br>[Huawei] </p><p>**nat static global **{global-address}<strong>inside</strong> {host-address }</p><p>配置命令相同，视图为系统视图，之后在具体的接口下开启静态NAT。</p><p>[Huawei-GigabitEthernet0&#x2F;0&#x2F;0] <strong>nat static enable</strong></p><p>在接口下使能nat static功能。</p><p><strong>示例</strong></p><p><img src="/../../../../images/image-20240429160342215.png" alt="image-20240429160342215"></p><pre><code>[R1]interface GigabitEthernet0/0/1[R1-GigabitEthernet0/0/1]ip address 122.1.2.1 24[R1-GigabitEthernet0/0/1]nat static global 122.1.2.1 inside 192.168.1.1[R1-GigabitEthernet0/0/1]nat static global 122.1.2.2 inside 192.168.1.2[R1-GigabitEthernet0/0/1]nat static global 122.1.2.3 inside 192.168.1.3</code></pre><h3 id="动态NAT"><a href="#动态NAT" class="headerlink" title="动态NAT"></a>动态NAT</h3><p>出现的原因：因为静态NAT也是一对一的映射，但内网主机长时间离线或不发数据时，也占用公有地址。</p><p>意义：避免了地址浪费，把公有地址组成地址池</p><p>特点：</p><p>当内部主机访问外部网络时临时分配一个地址池中未使用的地址，并将该地址标记为“In Use”。当该主机不再访问外部网络时回收分配的地址，重新标记为“Not Use”</p><p><strong>示例(出去流量)</strong></p><p><img src="/../../../../images/image-20240429160635691.png" alt="image-20240429160635691"></p><p><strong>示例(回程流量)</strong></p><p><img src="/../../../../images/image-20240429162629336.png" alt="image-20240429162629336"></p><p><strong>示例</strong></p><p><img src="/../../../../images/image-20240429171310748.png" alt="image-20240429171310748"></p><p>R1</p><p>nat address-group 1 122.1.2.1 122.1.2.3  #设置公网地址池</p><p>acl 2000  #配置acl规则</p><p>rule 5 permit source 192.168.1.0 0.0.0.255</p><p>quit</p><p>int g0&#x2F;0&#x2F;1</p><p><strong>nat outbound 2000 address-group 1 no-pat</strong>  </p><p>#no-pat是指非端口地址转换，No-Port Address Translation</p><h3 id="NAPT"><a href="#NAPT" class="headerlink" title="NAPT"></a>NAPT</h3><p>出现的原因：因为动态NAT的地址池中的地址进行地址转换时不会转换端口号，公有地址和私有地址还是1：1的映射关系，<strong>无法提高公有地址利用率</strong>。</p><p>NAPT(Network Address and Port Translation, 网络地址端口转换)</p><p>解决问题：能够实现公有地址与私有地址的1：n映射，可以有效提高公有地址利用率。</p><p>NAPT转换(出去流量)</p><p><img src="/../../../../images/image-20240429172734964.png" alt="image-20240429172734964"></p><p>NAPT转换(回城流量)</p><p><img src="/../../../../images/image-20240429172745756.png" alt="image-20240429172745756"></p><p><strong>注意icmp是属于二层，但是napt会给她icmp包给一个伪端口</strong></p><p>示例配置：</p><p><img src="/../../../../images/image-20240429172808863.png" alt="image-20240429172808863"></p><p>在R1上配置NAPT让内网所有私有地址通过122.1.2.1访问公网。</p><p>nat address-group 1 122.1.2.1 122.1.2.1 #起始地址和结束地址一样，则指一个地址</p><p>acl 2000</p><p>rule 5 permit source 192.168.1.0 0.0.0.255</p><p>quit</p><p>int g0&#x2F;0&#x2F;1</p><p><strong>nat outbound 2000 address-group 1</strong></p><h3 id="Easy-IP"><a href="#Easy-IP" class="headerlink" title="Easy IP"></a>Easy IP</h3><p>出现的原因：因为我们公有地址经常会变化，而且有可能我们不知道公网地址是多少，但只知道网络出口的接口，那么Easy IP则可以实现NAT转换。</p><p>Easy IP的实现原理跟NAPT相同，同时转换IP地址和传输层端口。</p><p>区别：Easy IP没有地址池的概念，<strong>是使用接口地址作为NAT转换的公有地址</strong></p><p>适用的场景：<strong>适用于不具备固定公网IP地址的场景。</strong>如通过DHCP、PPPOE拨号获取地址的私有网络出口。</p><p>示例：</p><p><img src="/../../../../images/image-20240429173632161.png" alt="image-20240429173632161"></p><p>在R1上配置Easy-IP让内网所有私有地址通过122.1.2.1访问公网</p><p>acl 2000</p><p>rule 5 permit source 192.168.1.0 0.0.0.255</p><p>quit </p><p>int g 0&#x2F;0&#x2F;1</p><p><strong>nat outbound 2000</strong></p><h3 id="NAT-Server"><a href="#NAT-Server" class="headerlink" title="NAT Server"></a>NAT Server</h3><p>作用：<strong>让内网服务器映射到公网</strong>，当私有网络中的服务需要对公网提供服务时使用。</p><p>外网主机主动访问[公有地址:端口]实现对内网服务器的访问。</p><p><img src="/../../../../images/image-20240429173954054.png" alt="image-20240429173954054"></p><p>示例：</p><p><img src="/../../../../images/image-20240429174018228.png" alt="image-20240429174018228"></p><p>在R1上配置NAT Server将内网服务器192.168.1,10的80端口映射到公有地址122.1.2.1的8080端口</p><p>int g0&#x2F;0&#x2F;1</p><p>ip address 122.1.2.1 24</p><p><strong>nat server protocol  tcp global 202.10.10.1 www inside 192.168.1.1 8080</strong></p><h3 id="NAT示例集合"><a href="#NAT示例集合" class="headerlink" title="NAT示例集合"></a>NAT示例集合</h3><p><img src="/../../../../images/image-20240429174318906.png" alt="image-20240429174318906"></p><pre><code>静态配置：AR1方法1：接口配置int g0/0/1nat static global 12.1.1.2 inside 192.168.1.1方法2：全局配置nat static global 12.1.1.2 inside 192.168.1.1int g0/0/1nat static enable--------------动态配置：AR1nat address-group 1 12.1.1.2 12.1.1.10acl 2000rule 5 permit source 192.168.1.0 0.0.0.255quit int g0/0/1nat outbound 2000 address-group 1 no-pat-------------NAPT配置：AR1nat address group 1 12.1.1.2 12.1.1.10acl 2000rule 5 permit source 192.168.1.0 0.0.0.255quitint g0/0/1nat outbound 2000 address-group 1----------------------Easy IP配置(端口上配置)：AR1nat outbound 2000---------------------NAT Server：AR1int g0/0/1nat server tcp global 12.1.1.2 80 inside 192.168.1.2 80</code></pre><h2 id="VRRP"><a href="#VRRP" class="headerlink" title="VRRP"></a>VRRP</h2><p><strong>解决问题：单点故障</strong></p><p>实现：把几台路由设备联合组成一台虚拟的”路由设备”，使用一定的机制保证当主机的下一跳舍友设备出现故障时，能够将业务进行切换到备份路由设备，从而保持通讯的连续性和可靠性。</p><p><strong>这里的切换设备的时间，可以提高，BFD+VRRP能够实现毫秒级别的切换</strong></p><p>为什么能够实现切换？</p><p>实现的实质是；降低设备的优先级，使得备份设备的优先级大于主设备，则实现切换。</p><p><img src="/../../../../images/image-20240429174914401.png" alt="image-20240429174914401"></p><p>这里的”Virtual IP”的作用是什么？</p><p>可以理解为：为这台虚拟的”路由设备”的IP地址，是PC对外提供服务的入口地址，此时PC的网关是VIrtual IP。</p><p>VRRP常用配置命令：</p><p>1.创建VRRP备份组并给备份组配置虚拟IP地址</p><pre><code>[interface-GigabitEthernet0/0/0] vrrp vrid virtual-router-id virtual-ip virtual-address</code></pre><p>注意:各备份组之间的虚拟IP地址不能重复;同属一个备份组的设备接口需使用相同的VRID。</p><p>2.配置路由器在备份组中的优先级</p><pre><code>[interface-GigabitEthernet0/0/0] vrrp vrid virtual-router-id priority priority-value</code></pre><p>注意:通常情况下，Master设备的优先级应高于Backup设备。</p><p>3.配置备份组中设备的抢占延迟时间</p><pre><code>[interface-GigabitEthernet0/0/0] vrrp vrid virtual-router-id preempt-mode timer delay delay-value</code></pre><p>4.配置VRRP备份组中设备采用非抢占模式</p><pre><code>[interface-GigabitEthernet0/0/0] vrrp vrid virtual-router-id preempt-mode disable</code></pre><p>缺省情况下，抢占模式已被激活。</p><p>5.配置VRRP备份组监视接口</p><pre><code>[interface-GieabitEthernet0/0/0] vrrp vrid virtual-router-id track interface interface-type interface-number [ increased value.increasedlreduced value-decreased]</code></pre><p>可配置设备当检测到上行接口或链路出现故障时，增加或者减少自身优先级，IP地址拥有者和Eth-trunk成员口不允许配置VRRP监视功能。</p><p>6.配置VRRP备份组联动普通BFD会话</p><pre><code>[interface-GigabitEthernet0/0/0] vrp vrid virtual-router-id track bfd-session &#123; bfd-session-id | session-name bfd-configurename &#125;[increased value-increasedl reduced value-reduced]</code></pre><p>如果选择参数session-name bfd-configure-name，可以绑定静态BFD会话或者标识符自协商的静态BFD会话如果选择参数bfd-session-id，只能绑定静态BFD会话。</p><p>基础配置：</p><p><img src="/../../../../images/image-20240429181849985.png" alt="image-20240429181849985"></p><p><img src="/../../../../images/image-20240429181859238.png" alt="image-20240429181859238"></p><p>验证：display vrrp</p><p><img src="/../../../../images/image-20240429181923560.png" alt="image-20240429181923560"></p><h2 id="综合实验"><a href="#综合实验" class="headerlink" title="综合实验"></a>综合实验</h2><h3 id="ospf-nat-默认路由"><a href="#ospf-nat-默认路由" class="headerlink" title="ospf-nat-默认路由"></a>ospf-nat-默认路由</h3><p><img src="/../../../../images/image-20240506173838552.png" alt="image-20240506173838552"></p><pre><code>1、接口配置Routerint g0/0/0ip add 192.168.10.254 24int g0/0/1ip add 192.168.20.254 24int g0/0/2ip add 12.1.1.1 30int g4/0/0ip add 13.1.1.1 30Router电信int Loopback 0  //环回接口ip add 1.1.1.1 32  int g0/0/0ip add 12.1.1.2 30int g0/0/1ip add 100.1.1.1 30Router联通int Loopback 0 //环回接口ip add 2.2.2.2 32int g0/0/0ip add 13.1.1.2 30int g0/0/1ip add 200.1.1.1 30Router互联网int Loopback 0 //环回接口ip add 22.22.22.22 32int g0/0/0ip add 100.1.1.2 30intg 0/0/1ip add 200.1.1.2 302、配置OSPFRouter电信ospf 1area 0network 0.0.0.0 0.0.0.0Router联通ospf 1area 0network 0.0.0.0 0.0.0.0Router互联网ospf 1area 0network 0.0.0.0 0.0.0.0//此时  互相能够获得邻居的路由//验证命令：display ospf peer briefdisplay ip routing-table3、配置NAT(easy-ip)Routeracl 2000rule 10 permit source 192.168.10.0 0.0.0.255rule 20 permit source 192.168.20.0 0.0.0.255int g0/0/2nat outbound 2000int g4/0/0nat outbound 20004、配置默认路由Routerip route-static 0.0.0.0 0 12.1.1.2ip route-static 0.0.0.0 0 13.1.1.2</code></pre><h2 id="IPSec-VPN"><a href="#IPSec-VPN" class="headerlink" title="IPSec VPN"></a>IPSec VPN</h2><p>打通隧道，实现，私有地址&#x2F;公有地址的通信</p><p>私有地址建议使用：隧道模式</p><p>公有地址建议使用：传输模式(速度快)</p><p>两种模式：手工模式、IKE模式(自动设置密钥、ISP值等)</p><p>注意：IKE模式还需要配置IKE提议、IKE对等体</p><p>工作一般流程：</p><p>1、设置acl</p><p>2、配置IPSec安全提议</p><p>3、创建IPSec安全策略(把acl和安全提议进行绑定)</p><p>4、在接口调用安全策略</p><p>什么是IPSec安全提议？</p><p>它描述了两个IPSec对等体之间进行安全通信所需的安全设置和协议选项。</p><ol><li><strong>安全通信</strong>：通过指定加密算法和认证算法，IPSec安全提议确保IP数据包在传输过程中得到加密保护，防止未经授权的访问者读取或修改数据。</li><li><strong>身份验证</strong>：通过认证算法，IPSec安全提议确保通信双方的身份得到验证，防止恶意主体冒充合法的通信节点。</li><li><strong>完整性保护</strong>：通过指定完整性保护机制，IPSec安全提议确保传输的数据包在传输过程中没有被篡改，从而保障数据的完整性。</li><li><strong>密钥协商</strong>：通过指定密钥交换协议，IPSec安全提议允许通信双方协商并建立共享的密钥，以用于加密和解密IP数据包。</li><li><strong>安全协议选择</strong>：通过指定安全协议，如ESP或AH，IPSec安全提议确定用于提供机密性和完整性的具体协议。</li></ol><p><img src="/../../../../images/image-20240508230953321.png" alt="image-20240508230953321"></p><p>拓扑实验：</p><p><img src="/../../../../images/image-20240508231422680.png" alt="image-20240508231422680"></p><p>实验需求<br>1、成都和北京两个站点用户均可以访问互联网2.2.2.22、配置手动IPSECVPN，实现成都和北京两个站点内网数据互通，且数据加密3、配置自动 IPSEC VPN，实现成都和北京两个站点内网数据互通，且数据加密<br>三、实验步骤及配置<br>整体步骤:<br>1、配置IP地址，ISP路由器用100模拟互联网<br>2、成都和北京两个出口路由器配置默认路由指向ISP路由器3、进行 IPSEC VPN配置，让两个站点内网互通，同时数据加密。静态IPSEC配置步骤如下，一共分为四步:</p><h3 id="手工模式"><a href="#手工模式" class="headerlink" title="手工模式"></a>手工模式</h3><p>基础配置：</p><p>R1</p><p>int g0&#x2F;0&#x2F;0</p><p>ip add 192.168.10.254 24</p><p>int g0&#x2F;0&#x2F;1</p><p>ip add 100.1.1.1 30</p><p>ISP</p><p>int g0&#x2F;0&#x2F;0</p><p>ip add 100.1.1.2 30</p><p>int g0&#x2F;0&#x2F;1</p><p>ip add 200.1.1.2 30</p><p>R2</p><p>int 0&#x2F;0&#x2F;0</p><p>ip add 192.168.20.254 24</p><p>int 0&#x2F;0&#x2F;1</p><p>ip add 200.1.1.1 30</p><p>先打通双方能够访问ISP</p><p>R1</p><p>ip route-static 0.0.0.0 0 100.1.1.2</p><p>acl 2000</p><p>rule 10  permit source 192.168.10.0 0.0.0.255</p><p>int g0&#x2F;0&#x2F;1</p><p>nat outbound 2000</p><p>R2</p><p>ip route-static 0.0.0.0 0 200.1.1.2</p><p>acl 2000</p><p>rule 10 permit source 192.168.20.0 0.0.0.255</p><p>int g0&#x2F;0&#x2F;1</p><p>nat outbound 2000</p><p>IPSec VPN配置(两个站点通信，同时数据加密)</p><pre><code>R1第一步:匹配感兴趣的流量[R1]ac13000 //配置ACL3000[R1-acl-adv-3000]rule 10 permit ip source 192.168.10.0 0.0.0.255 destination 192.168.20.00.0.0.255  //规则10，匹配源为192.168.10.0/24，目的192.168.20.0/24的流量第二步:配置ipsec 提议[R1]ipsec proposal cd //ipsec 提议名称 cd[R1-ipsec-proposal-cd]esp authentication-algorithm sha2-256 //认证算法采用sha2-256[R1-ipsec-proposal-cd]esp encryption-algorithm aes-128 //加密算法采用aes-128第三步:配置ipsec 手动方式安全策略[R1]ipsec policy chengdu 10 manual//配置IPSEC策略 chegndu，方式为手动[Rl-ipsec-policy-manual-chengdu-10]security acl 3000 //包含acl3000的流量[R1-ipsec-policy-manual-chengdu-10] proposal cd//采用ipsec 提议 cd[R1-ipsec-policy-manual-chengdu-10]tunnel local 100.1.1.1 //配置隧道本地地址 100.1. 1.1[R1-ipsec-policy-manual-chengdu-10]tunnel remote 200.1.1.1 //配置隧道远端地址 200.1.1.1[R1-ipsec-policy-manual-chengdu-10]sa spi inbound esp 12345 //配置入方向SA编号12345[Rl-ipsec-policy-manual-chengdu-10]sa string-key inbound esp cipher hahaha //配置入方向SA的认证密钥为hahaha[Rl-ipsec-policy-manual-chengdu-10]sa spi outbound esp 56789 //配置出方向SA编号56789[R1-ipsec-policy-manual-chengdu-10]sa string-key outbound esp cipher xixixi //配置出方向SA 的认证密钥为xixixi第四步:在接口上应用ipsec策略[R1] interface GigabitEthernet0/0/1[R1-GigabitEthernet0/0/1] ipsec policy chengdu//接口上应用ipsce 策略(只能用于出接口)</code></pre><pre><code>R2第一步:匹配感兴趣的流量[R2]ac13000 //配置ACL3000[R2-acl-adv-3000]rule 10 permit ip source 192.168.20.0 0.0.0.255 destination 192.168.10.00.0.0.255  //规则10，匹配源为192.168.20.0/24，目的192.168.10.0/24的流量第二步:配置ipsec 提议[R2]ipsec proposal bj //ipsec 提议名称 cd[R2-ipsec-proposal-bj]esp authentication-algorithm sha2-256 //认证算法采用sha2-256[R2-ipsec-proposal-bj]esp encryption-algorithm aes-128 //加密算法采用aes-128第三步:配置ipsec 手动方式安全策略[R2]ipsec policy beijing 10 manual//配置IPSEC策略 chegndu，方式为手动[R2-ipsec-policy-manual-beijing-10]security acl 3000 //包含acl3000的流量[R2-ipsec-policy-manual-beijing-10] proposal bj//采用ipsec 提议 bj[R2-ipsec-policy-manual-beijing-10]tunnel local 200.1.1.1 //配置隧道本地地址 200.1. 1.1[R2-ipsec-policy-manual-beijing-10]tunnel remote 100.1.1.1 //配置隧道远端地址 100.1.1.1[R2-ipsec-policy-manual-beijing-10]sa spi inbound esp 56789 //配置入方向SA编号56789[R2-ipsec-policy-manual-beijing-10]sa string-key inbound esp cipher xixixi //配置入方向SA的认证密钥为xixixi[R2-ipsec-policy-manual-beijing-10]sa spi outbound esp 12345 //配置出方向SA编号12345[R2-ipsec-policy-manual-beijing-10]sa string-key outbound esp cipher hahaha //配置出方向SA 的认证密钥为hahaha第四步:在接口上应用ipsec策略[R2] interface GigabitEthernet0/0/1[R2-GigabitEthernet0/0/1] ipsec policy beijing//接口上应用ipsce 策略(只能用于出接口)</code></pre><hr><p>此时是不通的</p><p>问题分析:R1上配置了ACL2000和ACL3000，其中ACL2000用于匹配内部需要NAT的地址，ACL3000用于匹配需要通过VPN隧道加密的流量，两条ACL重合，即ACL2000会把需要进行 VPN 传递的流量匹配出来，进行 NAT。</p><hr><p>[Rl] interface GigabitEthernet0&#x2F;0&#x2F;1</p><p>[R1-GigabitEthernet0&#x2F;0&#x2F;1]undo nat outbound 2000&#x2F;&#x2F;删除 NAT在接口上的应用</p><p>[R1-GigabitEthernet0&#x2F;0&#x2F;1] quit&#x2F;&#x2F;删除 ACL2000</p><p>[R1]undo acl 2000</p><p>[R1]ac13001&#x2F;&#x2F;配置ACL3001</p><p>[Rl-acl-adv-300l]rule 10 deny ip source 192.168.10.0 0.0.0.255 destination 192.168.20.00.0.0.255 &#x2F;&#x2F;设置规则10，拒绝源为192.168.10.0&#x2F;24，目的是192.168.20.0&#x2F;24的流量</p><p>[R1-acl-adv-3001]rule 20 permit ip &#x2F;&#x2F;设置规则20，其他流量全部允许</p><p>[R1-acl-adv-3001] quit</p><p>[R1] interface GigabitEthernet0&#x2F;0&#x2F;1</p><p>[R1-GigabitEthernet0&#x2F;0&#x2F;1] nat outbound 3001&#x2F;&#x2F;重新配置NAT转换</p><p>R2进行如下调整，在NAT地址池中排除需要进行VPN传送的流量(同R1类似)<br>[R2]interface GigabitEthernet0&#x2F;0&#x2F;1<br>[R2-GigabitEthernet0&#x2F;0&#x2F;1]undo nat outbound 2000<br>[R2-GigabitEthernet0&#x2F;0&#x2F;1] quit<br>[R2]undo acl 2000<br>[R2]acl 3001<br>[R2-acl-adv-3001]rule 10 deny ip source 192.168.20.0 0.0.0.255 destination 192.168. 10.0 0.0.0.255<br>[R2-acl-adv-3001]rule 20 permit ip<br>[R2-acl-adv-3001]quit<br>[R2]interface GigabitEthernet0&#x2F;0&#x2F;1<br>[R2-GigabitEthernet0&#x2F;0&#x2F;1] nat outbound 3001</p>]]></content>
      
      
      <categories>
          
          <category> Network - 网工中级 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Network </tag>
            
            <tag> 网工中级 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>华为配置与安全技术</title>
      <link href="/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E5%8D%8E%E4%B8%BA%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%AE%89%E5%85%A8%E6%8A%80%E6%9C%AF/"/>
      <url>/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E5%8D%8E%E4%B8%BA%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%AE%89%E5%85%A8%E6%8A%80%E6%9C%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="华为配置与安全技术"><a href="#华为配置与安全技术" class="headerlink" title="华为配置与安全技术"></a>华为配置与安全技术</h1><h2 id="网络探测BFD和NQA"><a href="#网络探测BFD和NQA" class="headerlink" title="网络探测BFD和NQA"></a>网络探测BFD和NQA</h2><h3 id="BFD"><a href="#BFD" class="headerlink" title="BFD"></a>BFD</h3><p>BFD(Bidirectional Forwarding Detection)双向转发检测</p><p><strong>BFD是一种用于快速检测网络链路或设备故障的协议。</strong></p><p>提供了一个<strong>通用的、标准化的、介质无关的、协议无关</strong>的快速故障检测机制，有两大优点：</p><p>​对链路连通状态提供轻负荷、<strong>快速故障检测(毫秒级)。 检测速度快</strong></p><p>​<strong>对任何介质、任何协议层进行实时检测</strong></p><p>   <strong>例如：[静态路由、RIP、OSPF、VRRP等] 兼容性强</strong></p><p>说直白一点，能够快速检测设备的状态，例如路由发生故障，可能线路需要几秒或几十秒才能够检测，如果有这BFD就能够实现毫秒级别的检测到，最多3秒。</p><h3 id="联动功能"><a href="#联动功能" class="headerlink" title="联动功能"></a>联动功能</h3><p>什么叫联动？</p><p>就是一个技术和另一个技术联合起来，例如vrrpo和bfd联动，能够更快速检测链路状态，设备故障时，本来vrrp需要几十秒才能切换，现在bfd能够50毫秒就能切换了</p><p>联动功能由检测模块、Track和应用模块三部分组成</p><p><strong>监测模块</strong>:负责对链路状态、网络性能等进行监测，并将探测结果通知给Track模块。<br><strong>Track模块</strong>:收到监测模块的探测结果后，及时改变Track项的状态，并通知应用模块。<br><strong>应用模块</strong>:根据Track项的状态，进行相应的处理，从而实现联动。</p><p><img src="/../../../../images/image-20240424131032548.png" alt="image-20240424131032548"></p><h4 id="BFD可以联动的协议"><a href="#BFD可以联动的协议" class="headerlink" title="BFD可以联动的协议"></a>BFD可以联动的协议</h4><p>检测IP链路、BFD单臂回声功能、与MPLS联动<br>与接口状态联动、与VRRP联动、与PIM联动</p><p><strong>与RIP联动、与OSPF联动、与IS-IS联动</strong></p><p><strong>与BGP联动、与静态路由联动、与静态路由联动</strong></p><p>BFD默认参数</p><p><img src="/../../../../images/image-20240424131338390.png" alt="image-20240424131338390"></p><p>常用命令：</p><p><img src="/../../../../images/image-20240424131540243.png" alt="image-20240424131540243"></p><p><img src="/../../../../images/image-20240424131546668.png" alt="image-20240424131546668"></p><h4 id="BFD和VRRP联动"><a href="#BFD和VRRP联动" class="headerlink" title="BFD和VRRP联动"></a>BFD和VRRP联动</h4><p>将BFD应用于Backup对Master的检测，VRRP通过监视BFD会话状态实现主备快速切换，切换时间控制在<strong>50毫秒以内。</strong></p><p><img src="/../../../../images/image-20240424131641740.png" alt="image-20240424131641740"></p><h4 id="静态路由与BFD联动配置"><a href="#静态路由与BFD联动配置" class="headerlink" title="静态路由与BFD联动配置"></a>静态路由与BFD联动配置</h4><p><img src="/../../../../images/image-20240424131708401.png" alt="image-20240424131708401"></p><p><img src="/../../../../images/image-20240424131716577.png" alt="image-20240424131716577"></p><p>BFD会话配置验证</p><p><img src="/../../../../images/image-20240424131757057.png" alt="image-20240424131757057"></p><h4 id="OSPF与BFD联动配置"><a href="#OSPF与BFD联动配置" class="headerlink" title="OSPF与BFD联动配置"></a>OSPF与BFD联动配置</h4><p><img src="/../../../../images/image-20240424131820841.png" alt="image-20240424131820841"></p><p><img src="/../../../../images/image-20240424131826989.png" alt="image-20240424131826989"></p><p>BFD会话配置验证</p><p><img src="/../../../../images/image-20240424131846412.png" alt="image-20240424131846412"></p><h3 id="NQA"><a href="#NQA" class="headerlink" title="NQA"></a>NQA</h3><p>NQA(Network Quality Analysis)，即网络质量分析，是用于帮助用户度量网络性能和检测网络故障的工具。NQA通过从一个网络端点向另一个网络端点发送报文，<strong>检测网络可达性，并统计两端之间网络的时延、丢包率、抖动等性能数据</strong>，从而帮助用户监视网络质量及检测网络故障。</p><p><img src="/../../../../images/image-20240424131946620.png" alt="image-20240424131946620"></p><p>NQA检测IP网络</p><p><img src="/../../../../images/image-20240424132011323.png" alt="image-20240424132011323"></p><h3 id="BFD和NQA相同点和不同点"><a href="#BFD和NQA相同点和不同点" class="headerlink" title="BFD和NQA相同点和不同点"></a>BFD和NQA相同点和不同点</h3><p>相同点:都可以检测网络连通性。</p><p>不同点:</p><p>(1)BFD检测速度快，能实现毫秒级检测，而NQA只能做到秒级。</p><p>(2)BFD功能简单，只能检测连通性，而NQA功能复杂，可以统计两端之间网络的时延、丢包率、抖动等性能数据。</p><h2 id="端口隔离Port-isolate"><a href="#端口隔离Port-isolate" class="headerlink" title="端口隔离Port-isolate"></a>端口隔离Port-isolate</h2><p>技术背景</p><p><img src="/../../../../images/image-20240424152536282.png" alt="image-20240424152536282"></p><p>ACL能够实现访问限制，为啥还需要端口隔离？</p><p>原因：主要acl配置太多，网络不只是三四台设备，限制需要六条命令，而端口隔离，只需要port-isolate就能够实现访问限制</p><h3 id="端口隔离技术"><a href="#端口隔离技术" class="headerlink" title="端口隔离技术"></a>端口隔离技术</h3><p>采用端口隔离功能，可以<strong>实现同一VLAN内端口之间的隔离</strong>。用户只需要将端口加入到隔离组中，就可以实现隔离组内端口之间二层数据的隔离。端口隔离功能为用户<strong>提供了更安全、更灵活的组网方案。</strong></p><p>配置</p><p><img src="/../../../../images/image-20240424154310537.png" alt="image-20240424154310537"></p><p><img src="/../../../../images/image-20240424153110950.png" alt="image-20240424153110950"></p><p>任务1：在同一网段、vlan。默认他们之间是可以互连。</p><p>实现：PC1和PC2不能访问，PC1和PC3能够访问</p><pre><code>int g0/0/1port-isolate enable group 1int g/0/02port-isolate enable group 1 #把她们放在同一个隔离组(group1)中</code></pre><p>任务2：默认已经设置三台PC机放在同一个隔离组中，默认是不能通信。</p><p>实现：PC1和PC2能互相访问，PC1和PC3不能访问。</p><pre><code>#需要设置代理ARP(中间人)int vlanif1ip address 192.168.1.254 24arp-proxy inner-sub-vlan-proxy enable#注意：如果port-isolate 隔离模式是二层三层都隔离(port-isolate mode all)，那么就代理ARP就没啥用了。</code></pre><p>端口隔离技术原理</p><p><img src="/../../../../images/image-20240424154647351.png" alt="image-20240424154647351"></p><h4 id="端口隔离配置案例"><a href="#端口隔离配置案例" class="headerlink" title="端口隔离配置案例"></a>端口隔离配置案例</h4><p><img src="/../../../../images/image-20240424154859834.png" alt="image-20240424154859834"></p><p><img src="/../../../../images/image-20240424154955260.png" alt="image-20240424154955260"></p><h4 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h4><p>同一项目组的员工都被划分到VLAN10中，其中属于企业内部的员工允许相互通信，属于企业外部的员工不允许相互通信，外部员工与内部员工之间允许通信，该如何实现?</p><p><img src="/../../../../images/image-20240424155102527.png" alt="image-20240424155102527"></p><p>解决方案：</p><p><img src="/../../../../images/image-20240424155128287.png" alt="image-20240424155128287"></p><p><img src="/../../../../images/image-20240424155135708.png" alt="image-20240424155135708"></p><h2 id="广播风暴问题与解决方案"><a href="#广播风暴问题与解决方案" class="headerlink" title="广播风暴问题与解决方案"></a>广播风暴问题与解决方案</h2><h3 id="广播风暴"><a href="#广播风暴" class="headerlink" title="广播风暴"></a>广播风暴</h3><h4 id="广播风暴是什么？"><a href="#广播风暴是什么？" class="headerlink" title="广播风暴是什么？"></a>广播风暴是什么？</h4><p>指在计算机网络中，大量的广播消息在网络中传播，导致网络拥塞和性能下降的情况。</p><p>就比如：某个设备的网卡出现了异常，导致该设备不断地发送大量的广播消息。其他设备在收到这些广播消息后，会将其转发到其他端口，进而使得网络中的所有设备都收到这些广播消息。</p><h4 id="广播风暴的原因？"><a href="#广播风暴的原因？" class="headerlink" title="广播风暴的原因？"></a><strong>广播风暴的原因？</strong></h4><p>(1)二层环路。(没有启用生成树，或者生成树故障,设备&#x2F;接口故障等 )</p><p>(2)网络中存在攻击行为，某些终端中毒，持续发送恶意广播，或者扫描。</p><p>(3)特殊应用场景，比如云桌面批量启动，网络教室PC一键开机。</p><h4 id="如何解决广播风暴？"><a href="#如何解决广播风暴？" class="headerlink" title="如何解决广播风暴？"></a><strong>如何解决广播风暴？</strong></h4><p>(1)划分虚拟局域网VLAN，隔离广播域，缩小广播传递范围。</p><p>(2)通过STP&#x2F;MSTP、堆叠、链路聚合等技术，破除二层环路</p><p>(3)查杀终端病毒，消除网络攻击,</p><p>(4)交换机配置广播抑制。</p><h4 id="广播风暴的现象"><a href="#广播风暴的现象" class="headerlink" title="广播风暴的现象"></a><strong>广播风暴的现象</strong></h4><p>(1)交换机接口指示灯疯狂闪烁。<br>(2)交换机CPU利用率高。<br>(3)交换机命令行卡顿。<br>(4)用户上网慢，或者不能上网。<br>(5)出现MAC地址漂移。<br>(6)抓包分析，很多ARP、DHCP Discovery广播</p><h4 id="为什么二层环路会早餐广播风暴，三层环路不会呢？"><a href="#为什么二层环路会早餐广播风暴，三层环路不会呢？" class="headerlink" title="为什么二层环路会早餐广播风暴，三层环路不会呢？"></a><strong>为什么二层环路会早餐广播风暴，三层环路不会呢？</strong></h4><p>因为，三层是网络层，IP地址中有TTL值，每经过一跳，TTL值就减1，直到为0，则该包还没发出去，则丢弃。</p><h4 id="破除二层环路的方法？"><a href="#破除二层环路的方法？" class="headerlink" title="破除二层环路的方法？"></a><strong>破除二层环路的方法？</strong></h4><p>1、拔网线</p><p>2、MAC地址黑洞(把MAC地址拉入黑名单，mac-address blackhole xxx)</p><p>3、设置ACL</p><h3 id="流量抑制"><a href="#流量抑制" class="headerlink" title="流量抑制"></a>流量抑制</h3><p><img src="/../../../../images/image-20240424173136108.png" alt="image-20240424173136108"></p><p><img src="/../../../../images/image-20240424173426158.png" alt="image-20240424173426158"></p><p><img src="/../../../../images/image-20240424173435456.png" alt="image-20240424173435456"></p><h3 id="风暴控制"><a href="#风暴控制" class="headerlink" title="风暴控制"></a>风暴控制</h3><p><img src="/../../../../images/image-20240424173834336.png" alt="image-20240424173834336"></p><p><img src="/../../../../images/image-20240424173840809.png" alt="image-20240424173840809"></p><p><img src="/../../../../images/image-20240424173918690.png" alt="image-20240424173918690"></p><h3 id="流量抑制和风暴控制的区别"><a href="#流量抑制和风暴控制的区别" class="headerlink" title="流量抑制和风暴控制的区别"></a>流量抑制和风暴控制的区别</h3><p>从原理来看，两者都是为了防止广播、组播以及未知单播报文所引起的<strong>广播风暴</strong>，但两者对流量控制的形式不一样。</p><p>​流量抑制给三种报文流量配置阈值，当流量超过阈值时，系统将<strong>丢弃多余的流量</strong></p><p>​风暴控制给三种报文流量配置阈值，当流量超过阈值时，系统<strong>直接将端口关闭</strong></p><p>​<strong>一个接口下流量抑制和风暴控制特性冲突，同时只能配置其中的一个</strong></p><h2 id="MAC-Flood与解决方案"><a href="#MAC-Flood与解决方案" class="headerlink" title="MAC Flood与解决方案"></a>MAC Flood与解决方案</h2><h3 id="交换机工作原理"><a href="#交换机工作原理" class="headerlink" title="交换机工作原理"></a>交换机工作原理</h3><p><img src="/../../../../images/image-20240424215945134.png" alt="image-20240424215945134"></p><p>1、初始情况下，交换MAC地址表是空的。</p><p>2、当PC机发送一个数据帧，然后交换机收到数据帧后，将数据帧的源MAC地址学习到MAC地址表中，并与接收该帧的接口进行关联。</p><p>3、当交换机MAC地址表中查询发现没有匹配的表项，则将数据帧从除了其入站接口之外的接口泛洪出去。</p><p>4、当有PC机收到该数据帧，则会回复给PC(发送)，其他的PC则丢弃</p><p>5、当交换收到PC(接收)的数据帧，将帧头中的源MAC地址学习到MAC表，并与接收的PC的接口进行关联</p><p>6、交换机找到MAC表中查找数据帧的目的MAC地址，然后进行转发</p><p><strong>MAC Flood的本质：耗尽交换MAC地址表的DoS攻击</strong></p><h3 id="端口安全"><a href="#端口安全" class="headerlink" title="端口安全"></a>端口安全</h3><p>举个例子</p><p>这个端口安全是为防止别人攻击你设备的一种手段。</p><p>例如：当别人假的MAC进行攻击，每一次都是不一样的MAC地址。</p><p>而你只需要设置一些端口，例如只允许一个MAC地址通过，其他不通过，或者当MAC达到某一个极限值就会自动触发机制(接口关机、警告等)</p><p>将学习到的动态MAC地址转换为<strong>安全MAC地址</strong>，阻止非法用户通过本接口和交换机通信，从而增强设备的安全性。</p><p>应用在接入层设备，可以<strong>防止仿冒</strong>用户从其他端口攻击。</p><p>应用在汇聚层设备，可以<strong>控制</strong>接入用户的<strong>数量。</strong></p><p>启用后，端口之前学习到的动态MAC将被删除。</p><p><img src="/../../../../images/image-20240424221049584.png" alt="image-20240424221049584"></p><p>保护动作:流量如果违规(非安全MAC流量)，将会采取保护措施。</p><p><img src="/../../../../images/image-20240424221502747.png" alt="image-20240424221502747"></p><p>配置命令</p><p><img src="/../../../../images/image-20240424221524418.png" alt="image-20240424221524418"></p><p><img src="/../../../../images/image-20240424222614697.png" alt="image-20240424222614697"></p><h2 id="DHCP-Snooping"><a href="#DHCP-Snooping" class="headerlink" title="DHCP Snooping"></a>DHCP Snooping</h2><p><strong>私接DHCP服务器</strong></p><p>场景分析<br>(1)办公室只有2个网口，但有4名同事都需要连接有线网络私接小交换机或小路由器。<br>(2)单位没有部署无线网络，用户想手机上网，私接无线路由器</p><p>问题:</p><p>1、网络中有多个DHCP服务器，用户通过非官方DHCP服务器获取地址从而导致不能正常上网。</p><p>2、可能IP冲突</p><p>3、网络不稳定，安全漏洞，数据可能会被窃取</p><p><strong>DHCP Snooping</strong>的出现就是解决私接DHCP服务器问题</p><p>DHCP Snooping的信任功能，能够保证DHCP客户端从合法的DHCP服务器获取IP地址。</p><p>DHCP Snooping信任功能将接口分为信任接口和非信任接口：<br>    信任接口<strong>正常接收</strong>DHCP服务器响应的DHCP ACK、DHCP NAK和DHCP Offer报文</p><p>​设备只将DHCP客户端的DHCP请求报文通过<strong>信任接口发送</strong>给合法的DHCP服务器，不会向非信任接口转发</p><p>​非信任接口收到的DHCP Server发送的DHCP OFFER、DHCP ACK、DHCP NAK报文会被直接丢弃</p><p>通俗地说，DHCP Snooping把DHCP服务器的接口设置为trusted和untrusted。</p><p><img src="/../../../../images/image-20240424224743851.png" alt="image-20240424224743851"></p><p><strong>DHCP Snooping配置举例</strong></p><p><img src="/../../../../images/image-20240424225507937.png" alt="image-20240424225507937"></p><p><img src="/../../../../images/image-20240424225522111.png" alt="image-20240424225522111"></p><p>例题：</p><p><img src="/../../../../images/image-20240424225610455.png" alt="image-20240424225610455"></p>]]></content>
      
      
      <categories>
          
          <category> Network - 网工中级 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Network </tag>
            
            <tag> 网工中级 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VRRP</title>
      <link href="/2024/06/01/%E7%AC%94%E8%AE%B0/Network/Blog/VRRP/"/>
      <url>/2024/06/01/%E7%AC%94%E8%AE%B0/Network/Blog/VRRP/</url>
      
        <content type="html"><![CDATA[<h1 id="VRRP"><a href="#VRRP" class="headerlink" title="VRRP"></a>VRRP</h1><p>VRRP能够在不改变组网的情况下，将多台路由器虚拟成一个虚拟路由器，通过配置虚拟路由器的IP地址为默认网关，实现网关的备份。</p><p>协议版本：VRRPv2，VRRPv3</p><p>VRRP仅使用IPv4，VRRP适用于IPv4和IPv6</p><p>VRRP协议报文：</p><p>只有一种报文：Advertisement报文；其目的IP地址224.0.0.18，目的MAC地址：01-00-5e-00-00-12(48位)，协议号是112</p><h2 id="VRRP基本结构"><a href="#VRRP基本结构" class="headerlink" title="VRRP基本结构"></a>VRRP基本结构</h2><p><img src="/../../../../images/image-20240517104911462.png" alt="image-20240517104911462"></p><p>编号优先级(vrrp id)，1~255</p><p>Priority,0~255,越大越优先，默认优先级是100</p><p>什么时候优先级会255？</p><p>虚拟IP和真实IP相同的时候才会是255，并选择那个接口作为master</p><p><strong>Virtual IP 给下面的虚拟机充当网关</strong></p><p>MAC地址： 0000-5e00-0101</p><p>从左往右：第一个：00 表示单播  01表示 组播(111)</p><p>00-5e00固定</p><p>0101，第一个01表示v2版本，如果是02表示v3版本</p><p>第二个01表示vrid1的编号</p><h2 id="VRRP主备备份工作过程"><a href="#VRRP主备备份工作过程" class="headerlink" title="VRRP主备备份工作过程"></a>VRRP主备备份工作过程</h2><p><img src="/../../../../images/image-20240517105527981.png" alt="image-20240517105527981"></p><p>1、最开始两台都是backup状态，配置完信息后，他们会互相交互报文</p><p>2、互相收到报文后，RouterA发现RouterB比自己优先级低，然后RouterA变成master，Router变成Backup，然后终端数据就会从RouterA出去。</p><p>3、终端发出的数据，交换机会把数据转到RouterA那个接口出去。</p><p>为什么交换机会把数据转到RouterA那个接口出去？</p><p>首先，RouterA成为Master后，RouterA会发送一个免费ARP报文(免费ARP是指发送IP地址和接收的IP地址是相同的)，ARP会以RouterA虚拟MAC地址作为源MAC地址，交换机是基于源MAC地址学习的，所以交换机能够学到RouterA的虚拟MAC地址，然后交换机就会把数据往RouterA去发送。 </p><p>4、状态维持，Master设备周期性(默认1s)地发送VRRP通告报文给组内其他设备，以通知自己处于正常工作状态。</p><h2 id="VRRP负载分担工作过程"><a href="#VRRP负载分担工作过程" class="headerlink" title="VRRP负载分担工作过程"></a>VRRP负载分担工作过程</h2><p>背景：传统的主备方式流量都经由单个Master转发，Master负担过重，而备机处于空闲状态</p><p><img src="/../../../../images/image-20240517110850267.png" alt="image-20240517110850267"></p><p>解决方案：通过配置不同的备份组，使RouterB成为新备份组的Master，这样就可以分担网络中流量了。</p><p><img src="/../../../../images/image-20240517111224641.png" alt="image-20240517111224641"></p><h2 id="VRRP主备路由器切换过程"><a href="#VRRP主备路由器切换过程" class="headerlink" title="VRRP主备路由器切换过程"></a>VRRP主备路由器切换过程</h2><p><img src="/../../../../images/image-20240517111427635.png" alt="image-20240517111427635"></p><p>如果Master发送故障，Backup在Master_Down_Interval时间内未收到Master发送的状态通告报文，则立即成为Master。</p><p>如果原Master故障恢复，则主备回切的过程：</p><p>发现收到RouterB的VRRP报文中的优先级比自己低，RouterA立即抢占成为Master。</p><p>Master立即抢占会出现什么问题？</p><p>如果Master恢复，但又没有恢复完全，网络是好是坏，网络就会出现抖动，然后导致主备切换频繁；所有需要<strong>抢占延迟</strong>，使得网络更加稳定</p><h2 id="VRRP故障场景"><a href="#VRRP故障场景" class="headerlink" title="VRRP故障场景"></a>VRRP故障场景</h2><p><img src="/../../../../images/image-20240517111956223.png" alt="image-20240517111956223"></p><p>设备(故障点2)或链路(故障点3)出现故障，在三倍周期时间内，Backup设备没有收到Master的通告报文，Backup设备认为Master不存在，Backup就会切换成Master</p><p>在没有联动的前提下，<strong>故障点1是无法被检测的</strong>(上行链路无法被检测)</p><p>为什么故障点1无法被检测？</p><p>因为Master和Backup交互报文是走下面那个链路，到达不了故障点1的链路。</p><h2 id="VRRP联动功能"><a href="#VRRP联动功能" class="headerlink" title="VRRP联动功能"></a>VRRP联动功能</h2><p>解决方法： 利用VRRP的联动功能监视上行接口或链路故障，主动进行主备切换。</p><p><img src="/../../../../images/image-20240517112904668.png" alt="image-20240517112904668"></p><p>如果没有联动功能：<strong>上行链路Down掉，但主备间通告正常，未发送状态切换，导致主机访问异常。</strong></p><p>联动功能：能够检测上行链路，如果那个上行链路的端口down掉，会把Master的优先级做一个“惩罚”，把优先级降低，降低到比Backup还低，然后使得Backup成为Master</p><p>但是联动不能万能的，如果故障出现在RouterA上行链路的另一端，那还是检测不到，所以需要借助BFD&#x2F;NQA&#x2F;IP-link监视整个链路</p><h2 id="VRRP配置实现"><a href="#VRRP配置实现" class="headerlink" title="VRRP配置实现"></a>VRRP配置实现</h2><p>主备备份方式</p><p><img src="/../../../../images/image-20240517113918477.png" alt="image-20240517113918477"></p><p>负载分担方式</p><p><img src="/../../../../images/image-20240517113953049.png" alt="image-20240517113953049"></p><ul><li>配置了 VRID 2 的虚拟IP地址为 <code>10.0.0.11</code>。</li><li>设置 VRID 2 的优先级为 <code>120</code>。优先级越高，越可能成为主VRRP路由器。</li><li>启用了抢占模式，并设置了延迟时间为 <code>20</code> 秒。在主路由器失效恢复后，等待 <code>20</code> 秒再抢占回主路由器角色。</li><li>跟踪接口 <code>GigabitEthernet0/0/0</code>，如果该接口状态变为不可用，则将 VRID 2 的优先级减少 <code>30</code>。</li></ul><h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><p><img src="/../../../../images/image-20240517114755479.png" alt="image-20240517114755479"></p><p><img src="/../../../../images/image-20240517114804347.png" alt="image-20240517114804347"></p><p><img src="/../../../../images/image-20240517114855784.png" alt="image-20240517114855784"></p><p>[RA] interface GigabitEthernet 10&#x2F;1<br>[RA-GigabitEtheret1&#x2F;0&#x2F;1]standby interface GigabitEthernet 1&#x2F;0&#x2F;2 30  &#x2F;&#x2F;监视g1&#x2F;0&#x2F;2，成为备份端口<br>[RA-GigabitEthemet1&#x2F;0&#x2F;1]standby interface GigabitEthernet 1&#x2F;0&#x2F;3 20 &#x2F;&#x2F;监视g1&#x2F;0&#x2F;3成为备份端口<br>[RA-GigabitEthernet1&#x2F;0&#x2F;1]standby timerdelay  10 &#x2F;&#x2F;配置切换延迟10s<br>[RA-GigabitEtheret1&#x2F;0&#x2F;1] quit</p><p>某分支机构网络拓扑图如1-1所示，该网络通过 BGP 接收总部网络路由，设备1与设备2作为该网络的网关设备，且运行VRRP(虚拟网络冗余协议)，与出口设备运行OSPF该网络规划两个网段10.11.229,0&#x2F;24 和10.11.230.0&#x2F;24，其中10.11.229.0网段只能访问总部网络10.11.230.0网段只能访问互联网。</p><p><img src="/../../../../images/image-20240517114923968.png" alt="image-20240517114923968"></p><p>若设备1处于活动状态(Master)，设备2的状态在哪条链路出现故障时会发生改变?请说明状态改变的原因.</p><p>答案：设备2在link e故障时，无法检测设备1的状态自动转换为master</p>]]></content>
      
      
      <categories>
          
          <category> Network - Blog </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Network </tag>
            
            <tag> VRRP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络规划设计</title>
      <link href="/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E7%BD%91%E7%BB%9C%E8%A7%84%E5%88%92%E8%AE%BE%E8%AE%A1/"/>
      <url>/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E7%BD%91%E7%BB%9C%E8%A7%84%E5%88%92%E8%AE%BE%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="网络规划设计"><a href="#网络规划设计" class="headerlink" title="网络规划设计"></a>网络规划设计</h1><h2 id="综合布线"><a href="#综合布线" class="headerlink" title="综合布线"></a>综合布线</h2><p>网络规划和设计是一个<strong>迭代和优化</strong>的过程。</p><p>为什么需要结构化综合布线呢？</p><p>我们日常生活中，需要打电话，需要传输文件，又需要看视频；她们需要的用的传输介质都是不一样的；而结构化综合布线系统就是<strong>消除了原有通信线路在传输介质上的差别</strong>。</p><p><strong>综合布线六大子系统</strong></p><p>结构化布线系统包含6个子系统：</p><p><img src="/../../../../images/image-20240420095633003.png" alt="image-20240420095633003"></p><p><img src="/../../../../images/image-20240420095643153.png" alt="image-20240420095643153"></p><p><strong>工作区子系统</strong>：PC到插座&#x2F;网口之间的的布线，一般不超过10米</p><p><strong>水平子系统</strong>：信息插座到楼层的配线间之间的布线，一般不超过90米</p><p><strong>干线&#x2F;垂直子系统</strong>：各个楼层配线间的布线，现不同楼层之间的数据传输和通信</p><p><strong>设备间子系统</strong>：”机房”，核心交换机等等</p><p><strong>管理子系统</strong>：用于监控、管理和维护整个布线系统的软件或硬件，包含配线架的管理，也就是整理线缆</p><p><strong>建筑群子系统</strong>：实现不同建筑物的传输和通信</p><p>注意：并不是每一个楼层都有管理子系统</p><p><img src="/../../../../images/image-20240420101017462.png" alt="image-20240420101017462"></p><h2 id="网络分析与设计"><a href="#网络分析与设计" class="headerlink" title="网络分析与设计"></a>网络分析与设计</h2><p><strong>网络规划设计模型</strong></p><p><img src="/../../../../images/image-20240420111008805.png" alt="image-20240420111008805"></p><p><img src="/../../../../images/image-20240420111015284.png" alt="image-20240420111015284"></p><p><strong>五阶段网络开发过程(瀑布)</strong></p><p><img src="/../../../../images/image-20240420112225635.png" alt="image-20240420112225635"></p><p><img src="/../../../../images/image-20240420112855374.png" alt="image-20240420112855374"></p><p>网络安全技术措施表</p><p><img src="/../../../../images/image-20240420112928006.png" alt="image-20240420112928006"></p><p>技术评价</p><p>在进行网络技术选择时，考虑：</p><p><strong>通信带宽、技术成熟性、连接服务类型、可扩展性、高投资产比</strong>出等因素</p><p>对于大型网络工程来说，<strong>项目本身不能成为新技术的试验田</strong>。尽量使用较成熟、拥有较多案例的技术。</p><h2 id="网络结构与功能"><a href="#网络结构与功能" class="headerlink" title="网络结构与功能"></a>网络结构与功能</h2><p>局域网结构类型</p><p><img src="/../../../../images/image-20240420114712131.png" alt="image-20240420114712131"></p><p>三层架构(各层次功能)</p><p><img src="/../../../../images/image-20240420114751828.png" alt="image-20240420114751828"></p><p><img src="/../../../../images/image-20240420114800235.png" alt="image-20240420114800235"></p><p>接入层不设置网关，因为一般都说同个网段&#x2F;vlan</p><p>例题：</p><p><img src="/../../../../images/image-20240420114854901.png" alt="image-20240420114854901"></p><p><img src="/../../../../images/image-20240420114906637.png" alt="image-20240420114906637"></p><p><img src="/../../../../images/image-20240420114924958.png" alt="image-20240420114924958"></p><h2 id="广域网接入技术"><a href="#广域网接入技术" class="headerlink" title="广域网接入技术"></a>广域网接入技术</h2><p>1.PSTN公用电话网络 56kb&#x2F;s。<br>2.ISDN:BRI&#x3D;2B+D&#x3D;144K PRI&#x3D;30B+D&#x3D;2.048M.<br>3.线缆调制解调器接入 HFC 主干光纤，<strong>光纤到小区，铜缆接入</strong>。<br>4.数字用户线路远程接入 xDSL。<br>5.PON无源光网络，<strong>上行是TDMA，下行是广播</strong>。</p><p><img src="/../../../../images/image-20240420143128638.png" alt="image-20240420143128638"></p><p><img src="/../../../../images/image-20240420143141223.png" alt="image-20240420143141223"></p><p>HFC光纤：前端：Cable Modem(线缆解调的猫)，后端：CMTS</p><p>PON网络：前端：ONU(光猫,客户)，后端：OLT(运营商)</p><p>xDSL：前端：ADSL Modem，后端：DSLAM</p><p>例题：</p><p><img src="/../../../../images/image-20240420143211092.png" alt="image-20240420143211092"></p><p><img src="/../../../../images/image-20240420143255660.png" alt="image-20240420143255660"></p><p><img src="/../../../../images/image-20240420143314375.png" alt="image-20240420143314375"></p><p>PON网络：前端：ONU(光猫,客户)，后端：OLT(运营商)</p><p>上行是TDMA，下行是广播</p><p>ONU —–上行(TDMA)—&gt; OLT</p><p>ONU&lt;——下行(广播)——OLT</p><h2 id="网络故障排查命令"><a href="#网络故障排查命令" class="headerlink" title="网络故障排查命令"></a>网络故障排查命令</h2><p>问题解决模型</p><p><img src="/../../../../images/image-20240420143755539.png" alt="image-20240420143755539"></p><p>网络故障排查命令</p><p><img src="/../../../../images/image-20240420143837457.png" alt="image-20240420143837457"></p><p>专用故障排查工具</p><p><img src="/../../../../images/image-20240420143918048.png" alt="image-20240420143918048"></p><p><img src="/../../../../images/image-20240420144330336.png" alt="image-20240420144330336"></p><p><img src="/../../../../images/image-20240420144415531.png" alt="image-20240420144415531"></p>]]></content>
      
      
      <categories>
          
          <category> Network - 网工中级 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Network </tag>
            
            <tag> 网工中级 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络管理</title>
      <link href="/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/"/>
      <url>/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="网络管理"><a href="#网络管理" class="headerlink" title="网络管理"></a>网络管理</h1><h2 id="网络管理基础"><a href="#网络管理基础" class="headerlink" title="网络管理基础"></a>网络管理基础</h2><h3 id="网络管理体系结构"><a href="#网络管理体系结构" class="headerlink" title="网络管理体系结构"></a>网络管理体系结构</h3><p>网络管理五大功能域：</p><p><strong>故障管理、配置管理、计费管理、性能管理、安全管理</strong></p><p>助记：“安配能计障”</p><p>故障管理：<strong>尽快发现故障、找出故障原因、以便采取补救措施</strong></p><p><img src="/../../../../images/image-20240419143436269.png" alt="image-20240419143436269"></p><p><img src="/../../../../images/image-20240419143523745.png" alt="image-20240419143523745"></p><h2 id="SNMP"><a href="#SNMP" class="headerlink" title="SNMP"></a>SNMP</h2><h3 id="网络管理协议五大标准"><a href="#网络管理协议五大标准" class="headerlink" title="网络管理协议五大标准"></a>网络管理协议五大标准</h3><p><img src="/../../../../images/image-20240419165123554.png" alt="image-20240419165123554"></p><h3 id="SNMP-记"><a href="#SNMP-记" class="headerlink" title="SNMP(记)"></a>SNMP(记)</h3><p><strong>2个服务3个端口5个报文(235)</strong></p><p>SNMP为应用层协议，通过<strong>UDP承载</strong>，端口161和162.</p><p>不可靠，但效率高，网络管理<strong>不会太多增加网络负载.</strong></p><p><img src="/../../../../images/image-20240419165426889.png" alt="image-20240419165426889"></p><p><strong>5个报文</strong></p><p><img src="/../../../../images/image-20240419165503382.png" alt="image-20240419165503382"></p><p>为了简化书写，前三个可以简写为：<strong>get、get-next、set</strong>。</p><p>SNMP双端口:客户端用端口<strong>161</strong>来接收get&#x2F;set，服务器端用端口<strong>162</strong>来接收trap。</p><p>get：服务器查询客户机的信息，例如CPU利用率的数值等等</p><p>get-next：MIB数据库，就相当于给一个变量1.3.0.1是指CPU的利用率，通过调用这个1.3.0.1，就知道是CPU利用率的值</p><p>set：设置，修改命令配置等</p><p>get-response：每次服务器发来一次请求，客户机就需要响应给服务器</p><p>trap：客户机”主动上报“，例如客户机的CPU利用率高达90%，主动上报给服务器，说我这个机器有点异常。</p><hr><p>管理数据库 MIB - 2</p><p>被管理对象标识符OID</p><p><img src="/../../../../images/image-20240419180144779.png" alt="image-20240419180144779"></p><hr><p>例题：</p><p><img src="/../../../../images/image-20240419170722382.png" alt="image-20240419170722382"></p><p><img src="/../../../../images/image-20240419170744231.png" alt="image-20240419170744231"></p><h3 id="SNMP版本"><a href="#SNMP版本" class="headerlink" title="SNMP版本"></a>SNMP版本</h3><h4 id="SNMPv1"><a href="#SNMPv1" class="headerlink" title="SNMPv1"></a>SNMPv1</h4><p>管理站和代理站之间可以是<strong>一对多</strong>关系，也可以是<strong>多对一</strong>关系</p><p>RFC1157规定SNMP基本认证和控制机制，通过**团体名(community)**验证实现。</p><p>团体名<strong>Community明文传输，不安全</strong>。</p><p><img src="/../../../../images/image-20240419171032808.png" alt="image-20240419171032808"></p><h4 id="SNMPv2"><a href="#SNMPv2" class="headerlink" title="SNMPv2"></a>SNMPv2</h4><p>SNMPv2增加定义了GetBulk和inform两个新协议操作。<br><strong>GetBulk</strong>: 快速获取大块数据。<br><strong>Inform</strong>: 允许一个NMS向另一个NMS<strong>发送Trap信息&#x2F;接收响应</strong>消息。</p><p><img src="/../../../../images/image-20240419174942651.png" alt="image-20240419174942651"></p><h4 id="SNMPv3"><a href="#SNMPv3" class="headerlink" title="SNMPv3"></a>SNMPv3</h4><p>SNMPv3重新定义了网络管理框架和安全机制</p><p>重新定义网络管理框架:将前两版中的管理站和代理统一叫做SNMP实体(entity)。</p><p>安全机制: <strong>认证和加密传输</strong>。</p><p><strong>时间序列模块</strong>: 提供重放攻击防护。</p><p><strong>认证模块</strong>: 完整性和数据源认证，使用SHA或MD5。</p><p><strong>加密模块</strong>: 防止内容泄露，使用DES算法。</p><p>有两种威胁是SNMPV3没有防护的: <strong>拒绝服务和通信分析</strong>。</p><p>例题：</p><p><img src="/../../../../images/image-20240419175851469.png" alt="image-20240419175851469"></p><p><img src="/../../../../images/image-20240419175917338.png" alt="image-20240419175917338"></p><h2 id="RMON"><a href="#RMON" class="headerlink" title="RMON"></a>RMON</h2><p>RMON(Remote Network Monitoring)</p><p>用于<strong>监视网络通信情况</strong>的设备叫网络监视器(Monitor)或网络分析器(Analyzer)、探测器(Probe)等。【监测流量 vs 监测设备】</p><p>RMON定义了管理信息库<strong>RMON MIB-II(流量信息)与SNMP MIB(设备信息)</strong></p><p>RMON目标: <strong>监视子网范围内通信</strong>，从而减少管理站和被管理系统之间的通信负载。</p><p><img src="/../../../../images/image-20240419182721895.png" alt="image-20240419182721895"></p><h2 id="网络管理命令"><a href="#网络管理命令" class="headerlink" title="网络管理命令"></a>网络管理命令</h2><h3 id="ipconfig-网络诊断命令"><a href="#ipconfig-网络诊断命令" class="headerlink" title="ipconfig(网络诊断命令)"></a>ipconfig(网络诊断命令)</h3><p><img src="/../../../../images/image-20240419192700950.png" alt="image-20240419192700950"></p><h3 id="ping-traceroute-故障诊断"><a href="#ping-traceroute-故障诊断" class="headerlink" title="ping traceroute(故障诊断)"></a>ping traceroute(故障诊断)</h3><p><img src="/../../../../images/image-20240419192810208.png" alt="image-20240419192810208"></p><h3 id="ARP命令"><a href="#ARP命令" class="headerlink" title="ARP命令"></a>ARP命令</h3><p><img src="/../../../../images/image-20240419193027195.png" alt="image-20240419193027195"></p><h3 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h3><p><img src="/../../../../images/image-20240419193042913.png" alt="image-20240419193042913"></p><h3 id="route和nslookup"><a href="#route和nslookup" class="headerlink" title="route和nslookup"></a>route和nslookup</h3><p><img src="/../../../../images/image-20240419193255552.png" alt="image-20240419193255552"></p>]]></content>
      
      
      <categories>
          
          <category> Network - 网工中级 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Network </tag>
            
            <tag> 网工中级 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>组网技术</title>
      <link href="/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E7%BB%84%E7%BD%91%E6%8A%80%E6%9C%AF/"/>
      <url>/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E7%BB%84%E7%BD%91%E6%8A%80%E6%9C%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="组网技术"><a href="#组网技术" class="headerlink" title="组网技术"></a>组网技术</h1><h2 id="交换机基础"><a href="#交换机基础" class="headerlink" title="交换机基础"></a>交换机基础</h2><h3 id="交换机分类"><a href="#交换机分类" class="headerlink" title="交换机分类"></a>交换机分类</h3><p>1、根据交换机方式分：</p><p><strong>存储转发式交换：</strong>完整接收数据帧，缓存、验证、碎片过滤，转发</p><p><strong>优点： 可以提供差错校验和非对称交换。</strong></p><p><strong>缺点：延迟大。</strong></p><p><strong>直通式交换：</strong>输入端口扫描到目标地址后立即开始转发</p><p><strong>优点：延迟小、交换速度快。</strong></p><p><strong>缺点： 没有检错能力，不能实现非对称交换。</strong></p><p><strong>碎片过滤式交换：</strong>开始转发前先检查数据包的长度是否够6<strong>4个字节</strong>，如果小于64个字节，说明是冲突碎片，则丢弃；如果大于等于64个字节，则转发该包。</p><p>其他分类方式：</p><p>2.根据交换的协议层划分:二层交换机、三层交换机、多层交换机。</p><p>3.根据交换机结构划分:固定端口交换机、模块化交换机。</p><p>4.根据配置方式划分:<strong>堆叠交换机、非堆叠交换机</strong>。</p><p>5.根据管理类型划分:网管交换机、非网管交换机、智能交换机。</p><p>6.层次结构划分:<strong>核心交换机、汇聚交换机、接入交换机</strong>。</p><p><img src="/../../../../images/image-20240419103409036.png" alt="image-20240419103409036"></p><h3 id="级联和堆叠"><a href="#级联和堆叠" class="headerlink" title="级联和堆叠"></a>级联和堆叠</h3><p><img src="/../../../../images/image-20240419104134010.png" alt="image-20240419104134010"></p><p>级联：一级一级的连接，核心层-汇聚层-接入层，一般不超过三层</p><p>堆叠：好比虚拟化，在接入层，有三台交换机(24接口)，合并成一台交换机(72接口)。</p><p><strong>堆叠优劣势：</strong>(背)</p><p>优势：</p><p>(1)逻辑上把多台设备虚拟成一台设备，简化运维，方便管理。<br>(2)一台物理设备故障，其他设备可以接管转发、控制平台，避免了单点故障。<br>(3)跨设备的链路聚合，物理上的无环网络，无需再部署STP.<br>(4)链路聚合中的链路全部有效使用，链路利用率100%。</p><p>劣势：</p><p>(1)堆叠都是私有协议，不支持跨厂商设备堆叠。<br>(2)需要单独购买堆叠线缆。(现在最新的用光纤也能实现堆叠)<br>(3)存在一定资源浪费，特别高端设备，如果2台核心都配置双引擎，堆叠后只有1个引擎工作。<br>(4)如果堆叠系统升级或重启，一般会有20~60s的业务中断。<br>(5)可靠性风险:控制层面统一后，相当于把鸡蛋放在一个篮子里，如果整个逻辑设备的控制平面出现问题(比如说路由表被人攻击破坏)，就有可能导致整机瘫痪，影响的范围大。</p><p><strong>答题版：<br>堆叠技术优点:<br>①逻辑上变为一台设备，简化网络管理;<br>②提升系统可靠性,避免单点故障;<br>③配合链路聚合等技术，防止接口被生成树阻塞，提升链路利用率。<br>堆叠技术缺点:<br>①堆叠是私有协议，不支持跨厂商设备堆叠;<br>②系统升级会造成业务中断;<br>③多台设备堆叠，只有一个主控处于工作状态，存在资源浪费。</strong></p><h3 id="交换机性能参数"><a href="#交换机性能参数" class="headerlink" title="交换机性能参数"></a>交换机性能参数</h3><p>端口类型:RJ45电口、光口(SC&#x2F;GBIC&#x2F;<strong>SFP&#x2F;SFP+</strong>&#x2F;SFP28)</p><p>STP：支持千兆。SFP+：支持万兆</p><p>传输模式:半双工、全双工。</p><p>交换容量:<strong>端口数<em>端口速率</em>2.</strong></p><p>包转发率:单位时间内发送64字节数据包的个数</p><p>1000Mbps&#x2F;8&#x2F;(64+8+12)&#x3D;1.488Mpps</p><p>MAC地址数:交换机MAC地址表中可以存储最大的MAC地址数量。</p><p>VLAN表项:交换机最大支持VLAN数量，现在都是<strong>4094</strong>个。</p><h2 id="路由器基础"><a href="#路由器基础" class="headerlink" title="路由器基础"></a>路由器基础</h2><h3 id="路由器接口"><a href="#路由器接口" class="headerlink" title="路由器接口"></a>路由器接口</h3><p>广域网WAN端口和局域网LAN端口</p><p>RJ45端口:常规以太网电口。</p><p>以太网光口:SC&#x2F;GBIC&#x2F;SFP&#x2F;SFP+&#x2F;SFP28.</p><p>AUI端口:用于令牌环或总线型以太网接口。</p><p>Serial串口:用于连接DDN、帧中继、X.25、PSTN等网络</p><p>ISDN BRI&#x2F;PRI端口:ISDN线路互联</p><p>SDH POS接口:155M&#x2F;622M&#x2F;2.5G&#x2F;10G.</p><p>RJ45端口就是就是双绞线的接口</p><p><img src="/../../../../images/image-20240419115044999.png" alt="image-20240419115044999"><img src="/../../../../images/image-20240419114945553.png" alt="image-20240419114945553"></p><p>Serial串口</p><p><img src="/../../../../images/image-20240419115250050.png" alt="image-20240419115250050"></p><p>以太网口</p><p><img src="/../../../../images/image-20240419115817696.png" alt="image-20240419115817696"></p><h3 id="交换机路由器管理方式"><a href="#交换机路由器管理方式" class="headerlink" title="交换机路由器管理方式"></a>交换机路由器管理方式</h3><p>Console接口(最基础最常用)<br>AUX端口连接Modem (现在几乎没什么人用)<br>Telnet&#x2F;SSH<br>浏览器<br>网管软件</p><p>例题：</p><p><img src="/../../../../images/image-20240419115547288.png" alt="image-20240419115547288"></p><p><img src="/../../../../images/image-20240419115751807.png" alt="image-20240419115751807"></p>]]></content>
      
      
      <categories>
          
          <category> Network - 网工中级 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Network </tag>
            
            <tag> 网工中级 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>操作系统与服务器</title>
      <link href="/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%B8%8E%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
      <url>/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%B8%8E%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="操作系统与服务器"><a href="#操作系统与服务器" class="headerlink" title="操作系统与服务器"></a>操作系统与服务器</h1><h2 id="IIS服务器"><a href="#IIS服务器" class="headerlink" title="IIS服务器"></a>IIS服务器</h2><p>远程桌面：RDP 3389</p><p>Samba： Linux主机提供Windows风格的<strong>文件和打印机共享服务</strong></p><p>IIS(Internet Information Server)因特网信息服务器</p><p>IIS可以搭建<strong>Web服务器、FTP服务器、SMTP服务器</strong></p><p>IIS支持身份验证安全机制有4种验证方法：</p><p>集成Windows身份验证 &gt;  摘要式身份验证 &gt; 基本身份验证 &gt; 匿名身份验证</p><p>邮件三剑客：</p><p><strong>SMTP(发) - POP3(收) - IMAP(同步)</strong></p><p>Linux Apache服务器</p><p>提供Web和FTP等服务，Web配置文件是httpd.conf</p><p>默认Web根目录：&#x2F;var&#x2F;www&#x2F;html或&#x2F;home&#x2F;httpd</p><p>虚拟主机：<strong>基于IP地址、基于端口、基于名字</strong></p><p>FTP服务器</p><p>FTP端口：<strong>21(控制)、TCP 20(数据)</strong></p><p>FTP站点访问：</p><p><strong>get：从服务器端下载文件</strong></p><p><strong>put：向FTP服务器端上传文件</strong></p><p>lcd： 设置客户端当前的目录</p><p>dir：展示目录下的文件</p><h2 id="DNS域名服务器"><a href="#DNS域名服务器" class="headerlink" title="DNS域名服务器"></a>DNS域名服务器</h2><p>域名系统(Domain Name System ,DNS)</p><p>DNS作用： 把域名转换为IP地址</p><p>DNS&#x2F;DHCP服务器必须为<strong>静态IP地址</strong>，而Web&#x2F;FTP均可以为动态IP。</p><p>Linux系统中提供DNS服务的组件为<strong>bind</strong>，主配置文件为<strong>named.conf</strong></p><p>诊断域名系统基础结构的信息和查看DNS服务器的IP地址命令是:<strong>nslookup</strong>。</p><h3 id="DNS域名系统结构"><a href="#DNS域名系统结构" class="headerlink" title="DNS域名系统结构"></a>DNS域名系统结构</h3><p>DNS通过层次结构的<strong>分布式数据库</strong>建立一致性名字空间。</p><p>FQDN完全合格域名，比如<a href="http://www.whu.edu.cn/">www.whu.edu.cn</a>.</p><p>最顶层是根域，用“”表示根域下面是顶级域，分为国家顶级域和通用顶级域</p><p>顶级域下面是二级域，二级域下还可以划分子域</p><p><img src="/../../../../images/image-20240417162931388.png" alt="image-20240417162931388"></p><h3 id="DNS记录类型-记"><a href="#DNS记录类型-记" class="headerlink" title="DNS记录类型(记)"></a>DNS记录类型(记)</h3><p><img src="/../../../../images/image-20240417163015638.png" alt="image-20240417163015638"></p><p>NS：表示一个局域网内的一个DNS服务器</p><p>SOA：在一个区域内众多NS(DNS服务器)中的主服务器</p><p>MX：全称 Mail Exchange </p><p>例题：</p><p><img src="/../../../../images/image-20240417163303975.png" alt="image-20240417163303975"></p><h3 id="DNS查询过程"><a href="#DNS查询过程" class="headerlink" title="DNS查询过程"></a>DNS查询过程</h3><p><img src="/../../../../images/image-20240417163347612.png" alt="image-20240417163347612"></p><pre><code>过程：1、输入www.test.com2、PC先去找浏览器的DNS缓存，如果没有，则找系统缓存，如果也没有，则找本地DNS服务器3、本地DNS服务器先会去区域记录查找，如果没有再去DNS服务器缓存。如果没有，则找转发器注意：这里可能会有疑问，为啥不先去找DNS服务器缓存呢？因为DNS服务器缓存是由其他域名服务器发过来的，并且DNS服务器的缓存并不是永久保存的，过一段时间就会清空，所以优先级的话就区域记录较高。4、转发器又向其他域名服务器查询，最终返回结果。</code></pre><p>例题：</p><p><img src="/../../../../images/image-20240417164036569.png" alt="image-20240417164036569"></p><p><strong>递归查询和迭代查询</strong></p><p><strong>递归查询</strong>:域名服务器帮助用户进行名字解析，并返回最后的结果。<strong>【老好人】</strong></p><p>比如：A,B,C,D四个人，A想知道”上学期的成绩”,A去问B，然后B不知道，B就去问C，C不知道，然后又去问D，D告诉B后，B就告诉A</p><p><strong>迭代查询:<strong>域名服务器进行迭代访问，反复多次，直到最后找到结果。</strong>【踢皮球】</strong></p><p>比如，A,B,C,D四个人，A想知道”上学期的成绩”,A去问B，然后B不知道，B然后去问C，C叫你去问D，然后B又去问D，D知道，然后告诉B或直接告诉A</p><p><img src="/../../../../images/image-20240417164149179.png" alt="image-20240417164149179"></p><p>例题：</p><p><img src="/../../../../images/image-20240417164949139.png" alt="image-20240417164949139"></p><p><img src="/../../../../images/image-20240417164959825.png" alt="image-20240417164959825"></p><h3 id="辅助DNS服务器"><a href="#辅助DNS服务器" class="headerlink" title="辅助DNS服务器"></a>辅助DNS服务器</h3><p><strong>DNS主服务器出现故障或因负载太重无法及时响应客户机请求</strong>，辅助服务器就会为主服务器共同承担压力</p><p>辅助服务器的区域数据都是从主服务器复制而来，<strong>DNS通知消息</strong>让辅助服务器能及时更新区域信息只有被通知的辅助域名服务器才能从主域名服务器进行区域复制。</p><p><img src="/../../../../images/image-20240417165153457.png" alt="image-20240417165153457"></p><h3 id="DNS配置文件"><a href="#DNS配置文件" class="headerlink" title="DNS配置文件"></a>DNS配置文件</h3><p><img src="/../../../../images/image-20240417165235351.png" alt="image-20240417165235351"></p><pre><code>/etc/hostname是主机名文件，包含主机IP地址、主机名、别名，其中别名可能没有。/etc/hosts 存放主机DNS解析缓存，包含IP地址、主机名。/etc/resolv.conf 是DNS服务器的配置文件，它包含了主机的域名搜索顺序和DNS服务器的地址。/etc/named.conf是DNS主配置文件，存放各类DNS记录，比如A记录、PTR记录。</code></pre><h2 id="DHCP服务器"><a href="#DHCP服务器" class="headerlink" title="DHCP服务器"></a>DHCP服务器</h2><h3 id="DHCP工作原理"><a href="#DHCP工作原理" class="headerlink" title="DHCP工作原理"></a>DHCP工作原理</h3><p><img src="/../../../../images/image-20240417230404932.png" alt="image-20240417230404932"></p><h3 id="DHCP租期更新"><a href="#DHCP租期更新" class="headerlink" title="DHCP租期更新"></a>DHCP租期更新</h3><p><img src="/../../../../images/image-20240417230546425.png" alt="image-20240417230546425"></p><h3 id="DHCP配置"><a href="#DHCP配置" class="headerlink" title="DHCP配置"></a>DHCP配置</h3><p>Linux</p><p><img src="/../../../../images/image-20240417230817159.png" alt="image-20240417230817159"></p><p>华为路由器</p><p><img src="/../../../../images/image-20240417230903065.png" alt="image-20240417230903065"></p><h3 id="DHCP报文格式"><a href="#DHCP报文格式" class="headerlink" title="DHCP报文格式"></a>DHCP报文格式</h3><p><img src="/../../../../images/image-20240417231414345.png" alt="image-20240417231414345"></p><h4 id="Option-43"><a href="#Option-43" class="headerlink" title="Option 43"></a>Option 43</h4><p>AC 负责对无线网络的管理和控制，包括配置无线网络参数、安全策略、用户认证、流量控制等。而</p><p>AP 则专注于提供无线信号覆盖，并负责与终端设备建立连接，传输数据。</p><p>Option 43应用举例</p><p><img src="/../../../../images/image-20240417231622574.png" alt="image-20240417231622574"></p><h3 id="华为DHCP-option-43配置"><a href="#华为DHCP-option-43配置" class="headerlink" title="华为DHCP option 43配置"></a>华为DHCP option 43配置</h3><p><img src="/../../../../images/image-20240417232554347.png" alt="image-20240417232554347"></p><p>为什么命令有ascii？</p><p>因为它能够将文本字符转换为数字的标准编码方式，它可以将人类可读的字符（如字母、数字和符号）转换为数字形式。</p><h3 id="DHCP分配固定IP地址"><a href="#DHCP分配固定IP地址" class="headerlink" title="DHCP分配固定IP地址"></a>DHCP分配固定IP地址</h3><p><img src="/../../../../images/image-20240417233010285.png" alt="image-20240417233010285"></p><pre><code>实验要求:[R1采用基于全局地址池的方式为PC1分配IP地址。采用基于接口地址池的方式为PC2和PC3分配IP地址，且PC3获取固定的IP地址。[R1]interface GigabitEthernet 0/0/1[R1-GigabitEthernet0/0/1]ip address 192.168.2.1 24[R1-GigabitEthernet0/0/1]DHCP select interface #选择接口地址池[R1-GigabitEthernet0/0/1]DHCP server excluded-ip-address 192.168.2.254[R1-GigabitEthernet0/0/1]DHCP server static-bind ip-address 192.168.2.2 mac-address 00e0-fc00-00aa #为PC3分配固定的IP地址</code></pre><h3 id="DHCP中继-DHCP-Relay"><a href="#DHCP中继-DHCP-Relay" class="headerlink" title="DHCP中继(DHCP Relay)"></a>DHCP中继(DHCP Relay)</h3><p>DHCP Relay即DHCP中继，它是为解决DHCP服务器和DHCP客户端不在同一个广播域而提出的，提供了对DHCP广播报文的中继转发功能，能够把DHCP客户端的广播报文“透明地”传送到其它广播域的DHCP服务器上，同样也能够把DHCF服务器端的应答报文“透明地”传送到其它广播域的DHCP客户端。</p><p><img src="/../../../../images/image-20240417233407896.png" alt="image-20240417233407896"></p><h4 id="DHCPRelay工作原理"><a href="#DHCPRelay工作原理" class="headerlink" title="DHCPRelay工作原理"></a>DHCPRelay工作原理</h4><p><img src="/../../../../images/image-20240417233500988.png" alt="image-20240417233500988"></p><h4 id="DHCP-Relay配置"><a href="#DHCP-Relay配置" class="headerlink" title="DHCP Relay配置"></a>DHCP Relay配置</h4><p><img src="/../../../../images/image-20240417233543946.png" alt="image-20240417233543946"></p><pre><code>R1、R2配置如下:[R1]interface GigabitEthernet0/0/0[R1-GigabitEthernet0/0/0] ip address DHCP-alloc[R1-GigabitEthernet0/0/0] quit[R2] DHCP server group HW[R2-DHCP-server-group-HW]DHCP-server 10.1.1.2[R2-DHCP-server-group-HW] quit[R2]interface GigabitEthernet 0/0/1[R2-GigabitEthernet0/0/1]ip address 10.1.1.1 24[R2-GigabitEthernet0/0/1] quit[R2]interface GigabitEthernet 0/0/0[R2-GigabitEthernet0/0/0]ip address 192.168.1.1 24[R2-GigabitEthernet0/0/0] DHCP select relay #配置中继器[R2-GigabitEthernet0/0/0] DHCP relay server-select HW #选择单播的目标对象[R2-GigabitEthernet0/0/0] quit</code></pre><h3 id="DHCP-Snooping"><a href="#DHCP-Snooping" class="headerlink" title="DHCP Snooping"></a>DHCP Snooping</h3><p>目的：防止私接DHCP服务器</p><pre><code>           +-----------+           | DHCP      |           | Server    |           +-----+-----+                 |        +--------+---------+        |    Switch 1      |        |                  |   +----+----+         +---+----+   | Client 1 |         | Client 2 |   +----------+         +---------+   Switch 1：端口1：连接到 DHCP 服务器，标记为“信任”端口。端口2：连接到 Client 1，未标记为“信任”端口。端口3：连接到 Client 2，未标记为“信任”端口。DHCP Snooping 配置的存在，Switch 1 在端口 2 上发现了来自未知 DHCP 服务器的 DHCP Offer 消息，因此阻止了 Client 1 的 IP 地址分配。而对于端口 3，Switch 1 发现了来自已知 DHCP 服务器的 DHCP Offer 消息，因此允许 Client 2 成功获得 IP 地址。</code></pre><h4 id="DHCP-Snooping配置"><a href="#DHCP-Snooping配置" class="headerlink" title="DHCP Snooping配置"></a>DHCP Snooping配置</h4><p><img src="/../../../../images/image-20240417234047054.png" alt="image-20240417234047054"></p><p>实现的实质：则在接口打”标签”，trusted和untrusted</p><p>例题：</p><p><img src="/../../../../images/image-20240417234220616.png" alt="image-20240417234220616"></p><p><img src="/../../../../images/image-20240417234259706.png" alt="image-20240417234259706"></p><h2 id="Linux服务器"><a href="#Linux服务器" class="headerlink" title="Linux服务器"></a>Linux服务器</h2><h3 id="Linux网络配置"><a href="#Linux网络配置" class="headerlink" title="Linux网络配置"></a>Linux网络配置</h3><p>Linux系统，设备和配置都是<strong>文件</strong></p><p>网络相关配置文件大多数位于&#x2F;etc目录下，这些文件可以在<strong>系统运行时修改</strong>，不用重启或停止任何守护程序，更改<strong>立刻生效</strong>。<br>“#”开头的为注释内容。</p><h4 id="Linux网络配置文件"><a href="#Linux网络配置文件" class="headerlink" title="Linux网络配置文件"></a>Linux网络配置文件</h4><p><img src="/../../../../images/image-20240418000841766.png" alt="image-20240418000841766"></p><p><img src="/../../../../images/image-20240418000856969.png" alt="image-20240418000856969"></p><h4 id="Linux网络接口配置"><a href="#Linux网络接口配置" class="headerlink" title="Linux网络接口配置"></a>Linux网络接口配置</h4><p><img src="/../../../../images/image-20240418001153217.png" alt="image-20240418001153217"></p><h4 id="网络配置命令"><a href="#网络配置命令" class="headerlink" title="网络配置命令"></a>网络配置命令</h4><p>route 配置路由的命令</p><p><img src="/../../../../images/image-20240418001849072.png" alt="image-20240418001849072"></p><p><img src="/../../../../images/image-20240418001856307.png" alt="image-20240418001856307"></p><h3 id="iptables防火墙配置"><a href="#iptables防火墙配置" class="headerlink" title="iptables防火墙配置"></a>iptables防火墙配置</h3><p><strong>四表五链</strong></p><p><img src="/../../../../images/image-20240419000330127.png" alt="image-20240419000330127"></p><p><strong>iptables命令的语法格式</strong></p><p><strong>iptables【-t表名】管理选项【链名】条件匹配-j执行动作</strong>例:iptables -t filter -A INPUT -s 192.168.184.20-p tcp –dport 22 -j DROP</p><p><img src="/../../../../images/image-20240419000535162.png" alt="image-20240419000535162"></p><h3 id="Linux文件目录、用户与组"><a href="#Linux文件目录、用户与组" class="headerlink" title="Linux文件目录、用户与组"></a>Linux文件目录、用户与组</h3><p><img src="/../../../../images/image-20240419000706435.png" alt="image-20240419000706435"></p><p><img src="/../../../../images/image-20240419000727097.png" alt="image-20240419000727097"></p>]]></content>
      
      
      <categories>
          
          <category> Network - 网工中级 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Network </tag>
            
            <tag> 网工中级 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络安全</title>
      <link href="/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
      <url>/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="网络安全"><a href="#网络安全" class="headerlink" title="网络安全"></a>网络安全</h1><h2 id="网络安全基础"><a href="#网络安全基础" class="headerlink" title="网络安全基础"></a>网络安全基础</h2><p>网络安全威胁类型：</p><p>(1)<strong>窃听</strong>:例如搭线窃听、安装通信监视器和读取网上的信息等。</p><p>(2)<strong>假冒</strong>:当一个实体假扮成另一个实体进行网络活动时就发生了假冒。</p><p>(3)<strong>重放</strong>:重复发送一份报文或报文的一部分，以便产生一个被授权效果。**(随机数、时间戳 )**</p><p>(4)<strong>流量分析</strong>:对网上信息流观察和分析推断出网上传输的有用信息。</p><p>(5)<strong>数据完整性破坏</strong>:有意或无意地修改或破坏信息系统，或者在非授权和不能监测的方式下对数据进行修改。</p><p>(6)<strong>拒绝服务DoS</strong>:当一个授权实体不能获得应有的对网络资源的访问。SYN-Flooding、MAC-Flooding等</p><p>(7)<strong>资源的非授权使用</strong>:即与所定义的安全策略不一致的使用。</p><p>(8)<strong>陷门和特洛伊木马</strong>:通过替换系统合法程序，或者在合法程序里插入恶意代码。</p><p>(9)<strong>病毒</strong>:随着人们对计算机系统和网络依赖程度的增加，计算机病毒已经构成了对计算机系统和网络的严重威胁。</p><p>(10)<strong>诽谤</strong>:利用计算机信息系统的广泛互连性和匿名性散布错误的消息，以达到毁某个对象的形象和知名度的目的。</p><p>什么是拒绝服务DoS和DDoS？</p><p>就是一直访问你的资源，使得其他人访问不了。</p><p>DoS,就比如你去餐厅占了一个座位。但什么都不点，一直不走，其他人也使用不了你的位置</p><p>DDoS,不但你占了一个位置，你叫其他人一起跟你一样，占着位置，让其他人使用不了，分布式。</p><p>网络攻击分类：</p><p><strong>被动攻击</strong>:典型代表<strong>嗅探、监听和流量分析和会话拦截</strong>，最难被检测，重点是预防，主要手段是<strong>加密</strong></p><p><strong>主动攻击假冒、重放、欺骗、消息篡改和拒绝服务</strong>等，重点是<strong>检测而不是预防</strong>，手段有防火墙、IDS等技术</p><p>物理临近攻击:防止外人乱进机房。</p><p>内部人员攻击:内鬼渗透，内部瓦解。</p><p>分发攻击:软件开发出来未安装之前，被篡改。疫苗运输恒温不合格</p><h2 id="现代加密技术"><a href="#现代加密技术" class="headerlink" title="现代加密技术"></a>现代加密技术</h2><p>密码分为：</p><p><strong>私钥、公钥</strong>，介于私钥和公钥之间的密码称为<strong>混合密码</strong></p><h3 id="私钥密码"><a href="#私钥密码" class="headerlink" title="私钥密码"></a>私钥密码</h3><p>又称：<strong>对称密码</strong></p><p>比如，你电脑文件加密，加密密码是123，对方接收到解密也是123，只不过通过短信、微信等方式告诉它。。</p><p>特点： </p><p><strong>加密和解密使用相同的密钥</strong></p><p>消息的收发双方必须事先通过<strong>安全渠道交换密钥</strong>。</p><p>优点：<strong>加解密速度快，密文紧凑，使用密钥时的难破解</strong></p><p>缺点：<strong>密钥分配问题，密钥管理问题，无法认证源。</strong></p><p>什么是密文紧凑？</p><p>比如你10T数据加密后，仍然是10T</p><p><img src="/../../../../images/image-20240409214326335.png" alt="image-20240409214326335"></p><p><strong>对称加密算法总结</strong>(背)</p><p><img src="/../../../../images/image-20240409214614741.png" alt="image-20240409214614741"></p><p>分组加密算法和流加密算法是什么？</p><p>分组加密算法，比如，数据过大，拆分数据来加密</p><p>流加密算法，数据即使很大，也不拆分，进行加密</p><h3 id="公钥密码"><a href="#公钥密码" class="headerlink" title="公钥密码"></a>公钥密码</h3><p>又称：非对称密码</p><p>就是对数据加密和解密的密钥是不同的</p><p>优点：</p><p><strong>密钥分发方便、密钥保管量少，支持数字签名</strong></p><p>缺点：</p><p><strong>加密速度慢(计算量大，不适合加密大数据)，数据膨胀率高</strong></p><p>每个实体有两个密钥:<strong>公钥公开，私钥自己保存</strong><br><strong>公钥加密，私钥解密，可实现保密通信<br>私钥加密，公钥解密，可实现数字签名</strong></p><p>公钥是公开的，自己还是对方都是知道的，公钥密码是指对方的公钥，然后对方用自己的私钥解密。</p><p><img src="/../../../../images/image-20240409215028851.png" alt="image-20240409215028851"></p><p>常见的非对称加密算法如下<br>·RSA:512位(或1024位)密钥，计算量极大，难破解。</p><p>·Elgamal、ECC(椭圆曲线算法)、背包算法、Rabin、DH等</p><h3 id="混合密码"><a href="#混合密码" class="headerlink" title="混合密码"></a>混合密码</h3><p>混合密码: 发送方<strong>用对称密钥加密需要发送的消息，再用接收方的公钥加密对称密钥</strong>，然后一起发送给接收方;接收方先用自己的私钥解密得到对称密钥，然后用对称密钥解密得到明文。</p><p>通俗地说，</p><p>加密</p><p>1、数据先对称加密，得到加密数据(A)</p><p>2、然后对加密数据(A)进行非对称加密，得到加(密数据(A))(B)</p><p>3、发送给对方</p><p>解密</p><p>4、收到后，进行非对称解密，用自己的私钥解密，得到加密数据(A)</p><p>5、然后，再用对称解密，得到明文数据</p><p><img src="/../../../../images/image-20240409215832908-17126711136731.png" alt="image-20240409215832908"></p><h3 id="国产加密算法-SM系列"><a href="#国产加密算法-SM系列" class="headerlink" title="国产加密算法 - SM系列"></a>国产加密算法 - SM系列</h3><p>《中华人民共和国密码法》密码分为<strong>核心密码、普通密码和商用密码</strong>，实行分类管理。<br><strong>核心密码、普通密码用于保护国家秘密信息</strong>，属于国家秘密，由密码管理部门依法实行严格统一管理。<br>商用密码用于保护不属于国家秘密的信息，公民、法人可用。</p><p><img src="/../../../../images/image-20240409220924839.png" alt="image-20240409220924839"></p><h2 id="哈希算法-Hash"><a href="#哈希算法-Hash" class="headerlink" title="哈希算法 Hash"></a>哈希算法 Hash</h2><p>HASH函数，又称：<strong>杂凑函数，散列函数</strong>。</p><p><strong>能够任意长度的信息转换成固定长度的哈希值(数字摘要)。</strong></p><p>比如，1T的数据，进行哈希(MD5),大小为128位</p><p>特点：</p><p>**不可逆性(单向)**：哈希后不能推测出原来数据，比如128位信息摘要，不可能推出1T的数据内容</p><p><strong>无碰撞性</strong>：不同的数据进行hash，hash后的值不会是一样的</p><p><strong>雪崩效应</strong>：数据变化，导致hash值的结果显著不一样</p><p>常见的Hash算法有:<br>(1)MD5算法:以512位数据块为单位来处理输入，产生<strong>128位</strong>的信息摘要。常用于文件校验</p><p>(2)SHA算法:以512位数据块为单位来处理输入，产生<strong>160位</strong>的哈希值，具有比MD5更强的安全性。</p><p>(3)SM3国产算法:消息分组长度为512比特，输出<strong>256位</strong>摘要。</p><h3 id="HASH应用"><a href="#HASH应用" class="headerlink" title="HASH应用"></a>HASH应用</h3><p><strong>文件完整性校验</strong></p><p><img src="/../../../../images/image-20240409232009743.png" alt="image-20240409232009743"></p><p>比如，我们在官网上下载文件，官网上的文件是有hash值</p><p>然后我们下载后的文件，不确定文件是否被修改，下载文件后去</p><p>hash计算，跟官网上的hash进行比较</p><p><strong>账号密码存储</strong></p><p><img src="/../../../../images/image-20240409232526656.png" alt="image-20240409232526656"></p><p><strong>用户身份认证</strong></p><p>增加一个随机数R做哈希MAC&#x3D;Hash(密码+R)</p><p>需要双方预先知道这个R</p><p>MAC:消除中间人攻击，源认证+完整性校验</p><p><img src="/../../../../images/image-20240409232628875.png" alt="image-20240409232628875"></p><p>例题：</p><p><img src="/../../../../images/image-20240409232753927.png" alt="image-20240409232753927"></p><h2 id="数字签名"><a href="#数字签名" class="headerlink" title="数字签名"></a>数字签名</h2><p><strong>签名方用自己的私钥进行签名，对方收到后，用签名方自己的公钥进行验证</strong></p><p>数字签名算法(公钥加密算法):<strong>RSA</strong>、Rabin、ELGamal签名体制和DSS标准</p><p>数据签名是用于<strong>确认发送者身份和消息完整性</strong>的一个加密消息摘要，具有如下特点：<br>(1)数字签名是可信的。<br>(2)数字签名不可伪造<br>(3)数字签名不能重新使用。<br>(4)签名文件是不能改变的。<br>(5)数字签名不能抵赖。<br>(6)接收者能够核实发送者身份。</p><p><img src="/../../../../images/image-20240410001934033.png" alt="image-20240410001934033"></p><p><img src="/../../../../images/image-20240410002003593.png" alt="image-20240410002003593"></p><h2 id="数字证书与CA"><a href="#数字证书与CA" class="headerlink" title="数字证书与CA"></a>数字证书与CA</h2><p>数字证书的作用：是确定接收方的公钥是正确的，并不是黑客的公钥。</p><p>例如：Alice发数据给Bob，需要进行非对称加密，需要获取Bob的公钥，那问题来了，发过来的公钥，一定是Bob的公钥嘛，也有可能是黑客截取信息，黑客把自己的公钥发给他，然后黑客来解密。</p><p>数字证书就是来解决这个问题的。颁发机构是CA，现实相当于公安机关，是非常安全的</p><p><img src="/../../../../images/image-20240410002113697.png" alt="image-20240410002113697"></p><p>数字证书类比：</p><p><img src="/../../../../images/image-20240410002628047.png" alt="image-20240410002628047"></p><p>数字证书里面主要包括：接收方的公钥+CA的私钥</p><p>PKI体系结构</p><p><img src="/../../../../images/image-20240410002928059.png" alt="image-20240410002928059"></p><p>1、<strong>用户&#x2F;终端实体</strong>:指将要向认证中心申请数字证书的客户，可以是个人，也可以是集团或团体、某政府机构等。</p><p>2、<strong>注册机构RA</strong>:<strong>负责受理用户申请证书，对申请人的合法性进行认证</strong>，并决定是批准或拒绝证书申请。注册机构并不给用户签发证书而只是对用户进行资格审查。<strong>较小的机构，可以由CA兼任RA的工作</strong></p><p>3、证书颁发机构CA:<strong>负责给用户颁发、管理和撤销证书</strong>。</p><p>4、证书发布系统:负责证书发放，如可以通过用户自已或是通过目录服务。</p><p>CRL库:证书吊销列表，存放过期或者无效证书。</p><p>例题</p><p><img src="/../../../../images/image-20240410003105583.png" alt="image-20240410003105583"></p><p>证书链</p><p>如果用户数量很多，通常由多个CA，每个CA为一部分用户发行和签证书。如果有两个CA，X1和X2，假设用户A从CA机构X1获得了证书，用户B从X2获得证书，如果两个证书发放机构<strong>X1和X2彼此间安全交换了公钥</strong>，彼此信任，那么他们的证书可以形成证书链。</p><p>A通过一个证书链来获取B的公钥，证书链表示为:X1《X2》x2《B》</p><p>B也能通过相反的证书链来获取A的公开密钥:X2《X1》X1《A》</p><p>怎么理解记忆？</p><p>A通过一个证书链来获取B的公钥，证书链表示为:X1《X2》x2《B》</p><p>首先，想要获得B的公钥，必须获得B的证书，B的证书又是X2发布，所以表示X2《B》</p><p>然后，B的证书，肯定要经过”上级的沟通”,A的领导跟B的领导沟通，即X1《X2》</p><p>最后，领导同意，然后再跟B拿证书，X1《X2》x2《B》</p><h2 id="IPSec原理"><a href="#IPSec原理" class="headerlink" title="IPSec原理"></a>IPSec原理</h2><h3 id="虚拟专用网-Virtual-Private-Network"><a href="#虚拟专用网-Virtual-Private-Network" class="headerlink" title="虚拟专用网(Virtual Private Network)"></a>虚拟专用网(Virtual Private Network)</h3><p>一种建立在公网上的，由某一组织或某一群用户专用的通信网络</p><p>二层:L2TP和PPTP(基于PPP)<br>三层:<strong>IPSec</strong>和GRE<br>四层:<strong>SSL</strong>&#x2F;TLS</p><p>实现虚拟专用网关键技术</p><p>隧道技术(Tuneling )</p><p>加解密技术(Encryption&amp;Decryption )</p><p>密钥管理技术(Key Management)</p><p>身份认证技术(Authentication)</p><p>这个VPN是来干什么的？</p><p>比如你的公司在上海，而你在广州出差，你需要去公司内部服务器拉取文件。这时候你不可能去公司拉取文件吧，所以需要远程进入公司内部，给你拉一条虚拟的网线，能够使你的电脑通信公司内部网络。</p><p><img src="/../../../../images/image-20240410222056021.png" alt="image-20240410222056021"></p><h3 id="二层隧道协议"><a href="#二层隧道协议" class="headerlink" title="二层隧道协议"></a>二层隧道协议</h3><p>二层隧道协议有<strong>PPTP和L2TP</strong>，都基于PPP协议，但<strong>PPTP只支持TCP&#x2F;IP体系</strong>，网络层必须是IP协议而L2TP可以运行在IP协议上，也可以在X.25、帧中继或ATM网络上使用。</p><p>PPP协议包含<strong>链路控制协议LCP和网络控制协议NCP</strong>。</p><p>PPP协议可以在点对点链路上<strong>传输多种上层协议</strong>的数据包，有校验位。</p><p><img src="/../../../../images/image-20240410223104621.png" alt="image-20240410223104621"></p><h3 id="PPP认证方式：PAP和CHAP"><a href="#PPP认证方式：PAP和CHAP" class="headerlink" title="PPP认证方式：PAP和CHAP"></a>PPP认证方式：PAP和CHAP</h3><p>PAP:<strong>两次握手</strong>验证协议，口令以明文传送，被验证方首先发起请求。<br>CHAP:<strong>三次握手</strong>，认证过程不传送认证口令，传送HMAC散列值。</p><p><img src="/../../../../images/image-20240410223002991.png" alt="image-20240410223002991"></p><h3 id="IPSec原理-1"><a href="#IPSec原理-1" class="headerlink" title="IPSec原理"></a>IPSec原理</h3><p>全称：IP Security</p><p>作用：增强IP网络的安全性</p><p>提供的安全服务：</p><p>​数据完整性(Data Integrity)</p><p>​认证(Autentication )</p><p>​保密性(Confidentiality )</p><p>​应用透明安全性(Application-transparent Security)</p><p><strong>IPSec功能分类：</strong></p><p><img src="/../../../../images/image-20240410223753859.png" alt="image-20240410223753859"></p><p><strong>IPSec两种封装模式：</strong></p><p><img src="/../../../../images/image-20240410223819504.png" alt="image-20240410223819504"></p><h2 id="SSL与HTTPS"><a href="#SSL与HTTPS" class="headerlink" title="SSL与HTTPS"></a>SSL与HTTPS</h2><h3 id="SSL"><a href="#SSL" class="headerlink" title="SSL"></a>SSL</h3><p>SSL全称：Secure Socket Layer 安全套接层</p><p>位于传输层和应用层之间，属于<strong>传输层安全协议</strong></p><p>SSL和TLS有什么区别嘛？</p><p>作用是一样的，但只是不同厂商而已</p><p><strong>HTTPS &#x3D; HTTP + SSL&#x2F;TLS</strong></p><p>SSL包含：<strong>记录协议、警告协议和握手协议</strong></p><p><img src="/../../../../images/image-20240410232156879.png" alt="image-20240410232156879"></p><h3 id="HTTPS和S-HTTP"><a href="#HTTPS和S-HTTP" class="headerlink" title="HTTPS和S-HTTP"></a>HTTPS和S-HTTP</h3><p>HTTPS &#x3D; HTTP + SSL&#x2F;&#x2F;TLS，端口<strong>TCP 443</strong></p><p>S-HTTP 安全的超文本传输协议(Security HTTP)，端口<strong>TCP 80</strong>。</p><p>S-HTTP语法与HTTP一样，而<strong>报文头有所区别，进行了加密</strong></p><p><img src="/../../../../images/image-20240410232354347.png" alt="image-20240410232354347"></p><h3 id="PGP"><a href="#PGP" class="headerlink" title="PGP"></a>PGP</h3><p>PGP(Pretty Good Privacy)是一个完整的<strong>电子邮件安全软件包</strong>，PGP提供数据加密和数字签名两种服务。采用<strong>RSA公钥证书进行身份验证，使用IDEA进行数据加密，使用MD5进行数据完整性验证</strong></p><p><img src="/../../../../images/image-20240410232509187.png" alt="image-20240410232509187"></p><h3 id="Kerberos和PKI"><a href="#Kerberos和PKI" class="headerlink" title="Kerberos和PKI"></a>Kerberos和PKI</h3><p>Kerberos是用于进行<strong>身份认证的安全协议</strong>，支持AAA:<strong>认证、授权和审计</strong></p><p><img src="/../../../../images/image-20240410232619992.png" alt="image-20240410232619992"></p><p><img src="/../../../../images/image-20240410232651560.png" alt="image-20240410232651560"></p><h3 id="其他应用层安全协议"><a href="#其他应用层安全协议" class="headerlink" title="其他应用层安全协议"></a>其他应用层安全协议</h3><p>S&#x2F;MIME(Security&#x2F;Multipurpose Internet Mail Extensions)提供<strong>电子邮件安全服务</strong>。</p><p>SET(Secure Electronic Transation)安全的电子交易，用于保障<strong>电子商务安全</strong>。</p><h2 id="防火墙和入侵检测"><a href="#防火墙和入侵检测" class="headerlink" title="防火墙和入侵检测"></a>防火墙和入侵检测</h2><p>防火墙就像门口保安</p><p>入侵检测就像园区内部的巡逻人员</p><p>因为有些黑客会挠开防火墙进入网络，所以需要入侵检测</p><h3 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h3><p>防火墙可以实现<strong>内部网络信任网络</strong>与<strong>外部不可信任网络</strong>(Internet)之间或是内部网络不同区域隔离与访问控制。</p><p>防火墙技术与分类:<strong>包过滤、状态化防火墙、应用层网关、应用层检测DPI</strong>。</p><p><img src="/../../../../images/image-20240411001626285.png" alt="image-20240411001626285"></p><p>防火墙区域划分</p><p><img src="/../../../../images/image-20240411001715510.png" alt="image-20240411001715510"></p><p>例题</p><p><img src="/../../../../images/image-20240411001737519.png" alt="image-20240411001737519"></p><p><img src="/../../../../images/image-20240411001804196.png" alt="image-20240411001804196"></p><h3 id="入侵检测"><a href="#入侵检测" class="headerlink" title="入侵检测"></a>入侵检测</h3><p>入侵检测IDS是防火墙之后的第二道安全屏障。</p><p><img src="/../../../../images/image-20240411001842470.png" alt="image-20240411001842470"></p><p>入侵检测系统的数据源</p><p>操作系统审计记录&#x2F;操作系统日志。</p><p>网络数据:核心交换机端口镜像，服务器接入<strong>交换机端口镜像</strong></p><p><img src="/../../../../images/image-20240411001936638.png" alt="image-20240411001936638"></p><p>华为交换机端口镜像配置</p><p><img src="/../../../../images/image-20240411002000017.png" alt="image-20240411002000017"></p><p>入侵检测分类</p><p>按信息来源分:HIDS、NIDS、DIDS(主机&#x2F;网络&#x2F;分布式)</p><p>按响应方式分:实时检测和非实时检测。</p><p>按数据分析技术和处理方式分:<strong>异常检测、误用检测</strong>和混合检测。</p><p><strong>异常检测</strong>:</p><p>​建立并不断更新和维护系统正常行为的轮廓，定义报警阈值，超过阈值则报警</p><p>​能够检测从未出现的攻击，但误报率高。</p><p><strong>误用检测</strong>:</p><p>​对已知的入侵行为特征进行提取，形成入侵模式库，匹配则进行报警</p><p>​已知入侵检测准确率高，对于未知入侵检测准确率低，<strong>高度依赖特征库</strong>。</p><p>​检测技术:专家系统和模式匹配。</p><p>解释HIDS、NIDS、DIDS</p><p>HIDS，相当于杀毒软件</p><p>NIDS，在每个网段都能够检测</p><p>DIDS，多个网段的入侵检测收集的流量，再汇聚给上一层入侵检测系统</p><h3 id="入侵防御系统IPS"><a href="#入侵防御系统IPS" class="headerlink" title="入侵防御系统IPS"></a>入侵防御系统IPS</h3><p>定义:入侵防御系统是一种抢先的网络安全检测和防御系统，能<strong>检测出攻击并积极响应</strong></p><p>IPS不仅具有入侵检测系统检测攻击行为的能力，而且具有<strong>拦截攻击并阻断攻击</strong>的功能</p><p>IPS不是IDS和防火墙功能的简单组合，IPS在攻击响应上采取的是<strong>主动的全面深层次的防御</strong></p><p><strong>入侵防御系统IPS vS 入侵检测系统IDS</strong>（背，下午）</p><p>部署位置不同:IPS一般<strong>串行部署</strong>，IDS一般<strong>旁路部署</strong></p><p>入侵响应能力不同:IPS能<strong>检测入侵，并能主动防御，</strong>IDS只能检测记录日志，发出警报</p><p><img src="/../../../../images/image-20240411002746242.png" alt="image-20240411002746242"></p><p>例题：</p><p><img src="/../../../../images/image-20240411002807363.png" alt="image-20240411002807363"></p><p><img src="/../../../../images/image-20240411002814555.png" alt="image-20240411002814555"></p><p><img src="/../../../../images/image-20240411002845390.png" alt="image-20240411002845390"></p><h2 id="计算机病毒基础"><a href="#计算机病毒基础" class="headerlink" title="计算机病毒基础"></a>计算机病毒基础</h2><p>病毒四个阶段：</p><p>潜伏阶段</p><p>繁殖阶段</p><p>触发阶段</p><p>执行阶段</p><p>病毒命名规则</p><p>病毒名称一般格式<br><strong>&lt;病毒前缀&gt;.&lt;病毒名&gt;.&lt;病毒后缀&gt;</strong></p><p><img src="/../../../../images/image-20240411173249247.png" alt="image-20240411173249247"></p><p><img src="/../../../../images/image-20240411173318254.png" alt="image-20240411173318254"></p>]]></content>
      
      
      <categories>
          
          <category> Network - 网工中级 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Network </tag>
            
            <tag> 网工中级 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>无线通信网</title>
      <link href="/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E6%97%A0%E7%BA%BF%E9%80%9A%E4%BF%A1%E7%BD%91/"/>
      <url>/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E6%97%A0%E7%BA%BF%E9%80%9A%E4%BF%A1%E7%BD%91/</url>
      
        <content type="html"><![CDATA[<h1 id="无线通信网"><a href="#无线通信网" class="headerlink" title="无线通信网"></a>无线通信网</h1><h2 id="移动通信与5G"><a href="#移动通信与5G" class="headerlink" title="移动通信与5G"></a>移动通信与5G</h2><p>移动通信制式</p><p><img src="/../../../../images/image-20240421141930909.png" alt="image-20240421141930909"></p><p>5G应用场景与关键技术</p><p>5G关键技术包括:<strong>超密集异构无线网络、大规模输入输出(MIMO)、毫米波通信、软件定义网络和网络功能虚拟化</strong>。</p><p>例题：</p><p><img src="/../../../../images/image-20240421142222911.png" alt="image-20240421142222911"></p><p><img src="/../../../../images/image-20240421142232154.png" alt="image-20240421142232154"></p><h2 id="WLAN通信技术"><a href="#WLAN通信技术" class="headerlink" title="WLAN通信技术"></a>WLAN通信技术</h2><p>无线网主要使用三种通信技术：<strong>红外线、扩展频谱(扩频)和窄带微波技术</strong>。</p><p>扩展频谱通信： 将信号散步到更宽的带宽上以<strong>减少发送阻塞和干扰</strong>的机会。</p><p>WLAN主要使用扩展频谱技术：**频率跳动扩频FHSS(蓝牙)和直接序列扩展频谱DSSS(Wi - Fi)**。</p><p><img src="/../../../../images/image-20240421143515592.png" alt="image-20240421143515592"></p><p>例题：</p><p><img src="/../../../../images/image-20240421143756917.png" alt="image-20240421143756917"></p><p><img src="/../../../../images/image-20240421143957660.png" alt="image-20240421143957660"></p><h2 id="WLAN频谱与信道"><a href="#WLAN频谱与信道" class="headerlink" title="WLAN频谱与信道"></a>WLAN频谱与信道</h2><p>WLAN网络可以分为三类:基础无线网络、Ad Hoc网络和分布式无线系统。</p><p>基础无线网络(Infrastructure Networking):用户通过无线接入点AP接入</p><p>特殊网络(Ad Hoc Networking):用于军用自组网或寝室局域网联机游戏。</p><p>分布式无线系统:通过AC控制大量AP组成的无线网络。</p><p><img src="/../../../../images/image-20240421144439952.png" alt="image-20240421144439952"></p><p>ISM频段：主要开放给<strong>工业、科学、医学</strong></p><p><img src="/../../../../images/image-20240421144551308.png" alt="image-20240421144551308"></p><p><strong>不重叠信道</strong></p><p>2.4G频段</p><p><strong>13个信道，3个不重叠信道(1、6和11)</strong></p><p>5G+5.8G频段</p><p><strong>开放的不重叠信道有5个</strong></p><p><img src="/../../../../images/image-20240421144812012.png" alt="image-20240421144812012"></p><p>信道重用与AP部署</p><p><img src="/../../../../images/image-20240421144948158.png" alt="image-20240421144948158"></p><p>例题：</p><p><img src="/../../../../images/image-20240421145024947.png" alt="image-20240421145024947"></p><h3 id="802-11技术标准对比（背）"><a href="#802-11技术标准对比（背）" class="headerlink" title="802.11技术标准对比（背）"></a>802.11技术标准对比（背）</h3><p><img src="/../../../../images/image-20240421145218018.png" alt="image-20240421145218018"></p><p>1.W-Fi标准的工作频段。</p><p><strong>2.4GHZ:802.11、802.116和802.11g5GHz:802.11a和802.11ac:2.4GHz+5GHz 802.11n和802.11ax.</strong></p><p>2.非重叠信道数量。2.4GHz频段包含13个信道，有3个不重合信道，常用信道为<strong>1、6和11</strong>，不重合信道间隔5个信道。</p><p>3.不同802.11标准的最大速率。比如，<strong>802.11n最大支持600Mbps</strong>，802.11ax速率可达9600Mbps。</p><p>例题：</p><p><img src="/../../../../images/image-20240421145555133.png" alt="image-20240421145555133"></p><p><img src="/../../../../images/image-20240421145626208.png" alt="image-20240421145626208"></p><h2 id="802-11MAC层"><a href="#802-11MAC层" class="headerlink" title="802.11MAC层"></a>802.11MAC层</h2><h3 id="802-11访问控制机制"><a href="#802-11访问控制机制" class="headerlink" title="802.11访问控制机制"></a>802.11访问控制机制</h3><p><img src="/../../../../images/image-20240421165850171.png" alt="image-20240421165850171"></p><p>为什么AP不选择CSMA&#x2F;CD？</p><p>因为隐藏节点和暴露节点</p><p><img src="/../../../../images/image-20240421165929388.png" alt="image-20240421165929388"></p><h3 id="802-11三种帧间间隔"><a href="#802-11三种帧间间隔" class="headerlink" title="802.11三种帧间间隔"></a>802.11三种帧间间隔</h3><p>IFS(分布式协调IFS):最长的IFS，<strong>优先级最低</strong>，用于<strong>异步竞争访问</strong>的时延<br>PIFS(点协调IFS):中等长度的IFS，<strong>优先级居中</strong>，在PCF操作中使用。<br>SIFS (短IFS):最短的IFS，<strong>优先级最高</strong>，用于需要立即响应的操作**(确认ACK)**。</p><p>帧间间隔：指两个连续数据帧之间的时间间隔。这个间隔由发送器在发送一个数据帧后等待一段时间，以确保接收器有足够的时间准备接收下一个帧。</p><p>例题：</p><p><img src="/../../../../images/image-20240421173907327.png" alt="image-20240421173907327"></p><h2 id="移动AD-Hoc网络"><a href="#移动AD-Hoc网络" class="headerlink" title="移动AD Hoc网络"></a>移动AD Hoc网络</h2><p>802.11定义AD Hoc网络是由无线移动节点组成的<strong>对等网</strong>，无需网络基础设施的支持，<strong>每个节点既是主机，又是路由器</strong>，是一种MANNET(Mobile Ad Hoc Network)网络。</p><h3 id="MANET网络特点"><a href="#MANET网络特点" class="headerlink" title="MANET网络特点"></a>MANET网络特点</h3><p>网络拓扑结构动态变化的，<strong>不能使用传统路由协议</strong>。</p><p>无线信道提供的带宽较小，<strong>信号衰落和噪声干扰的影响却很大</strong>。</p><p>无线终端携带的电源能量有限。</p><p>容易招致<strong>网络窃听、欺骗、拒绝服务</strong>等恶意攻击的威胁。</p><p><img src="/../../../../images/image-20240421182530682.png" alt="image-20240421182530682"></p><p>例题：</p><p><img src="/../../../../images/image-20240421182658901.png" alt="image-20240421182658901"></p><img src="../../../../images/image-20240421182712756.png" alt="image-20240421182712756" style="zoom:200%;"><h2 id="WLAN安全"><a href="#WLAN安全" class="headerlink" title="WLAN安全"></a>WLAN安全</h2><h3 id="WLAN安全机制"><a href="#WLAN安全机制" class="headerlink" title="WLAN安全机制"></a>WLAN安全机制</h3><p>(1)SSID访问控制:隐藏SSID，让不知道的人搜索不到。</p><p>(2)物理地址过滤:在无线路由器设置MAC地址黑白名单。</p><p>(3)WEP认证和加密:<strong>PSK预共享密钥</strong>认证,RC4加密(只需密码认证)</p><p>(4)<strong>WPA(802.11i草案)</strong><br>认证:802.1x。<br>加密:RC4(增强)+TKIP(临时密钥完整协议，动态改变密钥)支持<strong>完整性认证和防重放攻击</strong></p><p>(5)<strong>WPA2(802.11i)</strong></p><p>针对WPA优化，加密协议是由RC4变为<strong>基于AES的CCMP</strong></p><p>例题：</p><p><img src="/../../../../images/image-20240421205129939.png" alt="image-20240421205129939"></p><p><img src="/../../../../images/image-20240421205140905.png" alt="image-20240421205140905"></p><p><img src="/../../../../images/image-20240421205246347.png" alt="image-20240421205246347"></p><p><img src="/../../../../images/image-20240421205255736.png" alt="image-20240421205255736"></p>]]></content>
      
      
      <categories>
          
          <category> Network - 网工中级 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Network </tag>
            
            <tag> 网工中级 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络互联设备_6-1</title>
      <link href="/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E7%BD%91%E7%BB%9C%E4%BA%92%E8%81%94%E8%AE%BE%E5%A4%87/"/>
      <url>/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E7%BD%91%E7%BB%9C%E4%BA%92%E8%81%94%E8%AE%BE%E5%A4%87/</url>
      
        <content type="html"><![CDATA[<h1 id="网络互联设备-6-1"><a href="#网络互联设备-6-1" class="headerlink" title="网络互联设备_6-1"></a>网络互联设备_6-1</h1><h2 id="中继器和集线器"><a href="#中继器和集线器" class="headerlink" title="中继器和集线器"></a>中继器和集线器</h2><h3 id="网络演进历史"><a href="#网络演进历史" class="headerlink" title="网络演进历史"></a>网络演进历史</h3><p>历史进程：</p><p>点对点(有距离限制)</p><p><img src="/../../../../images/image-20240329110229019.png" alt="image-20240329110229019"></p><p>出现距离限制，然后出现中继器，信号放大</p><p><img src="/../../../../images/image-20240329110304243.png" alt="image-20240329110304243"></p><p>但是中继器只有两个接口，但是设备越来越多。所以出现集线器</p><p><img src="/../../../../images/image-20240329110446776.png" alt="image-20240329110446776"></p><p>集线器和中继器的工作原理一样，只是集线器的接口比中继器多</p><p>然后形成HUB和中继器结合，形成局域网架构</p><p><img src="/../../../../images/image-20240329110600206.png" alt="image-20240329110600206"></p><p>有人会问，为什么不直接两个HUB相连？</p><p>因为产生环路，形成广播风暴。</p><h3 id="集线器工作原理"><a href="#集线器工作原理" class="headerlink" title="集线器工作原理"></a>集线器工作原理</h3><p>从一个接口进入的数据，进行信号放大后，从其他所有接口进行<strong>泛洪</strong>，工作原理其实就是泛洪机制</p><p><img src="/../../../../images/image-20240329111104540.png" alt="image-20240329111104540"></p><p>两台集线器连接起来，会出现什么问题？</p><p><img src="/../../../../images/image-20240329111133695.png" alt="image-20240329111133695"></p><p>会出现两大问题：</p><p>产生环路，形成广播风暴，影响通信效率。</p><p>数据扩散，严重安全威胁。</p><p>数据扩散是指，A机器发的数据给B，但是C也在这个集线器中，她也能够收到；例如A机器登录QQ，她的数据会从集线器出去，机器B可以利用抓包工具能够抓捕到A机器的账号和密码</p><p><img src="/../../../../images/image-20240329111230122.png" alt="image-20240329111230122"></p><h2 id="交换机工作原理"><a href="#交换机工作原理" class="headerlink" title="交换机工作原理"></a>交换机工作原理</h2><p><strong>交换机寻址</strong></p><p>初始情况下，交换机MAC地址表是空的。</p><p><img src="/../../../../images/image-20240329113943506.png" alt="image-20240329113943506"></p><p>交换机在收到数据帧后，将数据帧的<strong>源MAC地址学习到MAC地址表</strong>中，并与接收该帧的接口GE0&#x2F;0&#x2F;1口关联。</p><p><img src="/../../../../images/image-20240329114028229.png" alt="image-20240329114028229"></p><p>交换机在MAC地址表中查询数据帧的目的MAC地址，发现没有匹配的表项，因此将数据帧从除了其入站接口之外的所有接口<strong>泛洪</strong>出去。</p><p><img src="/../../../../images/image-20240329114111318.png" alt="image-20240329114111318"></p><p>PC2及PC3收到数据帧后将其丢弃，因为这些数据帧并非发送给自已;PC4则收下数据帧，现在PC4要回复数据给PC1。</p><p><img src="/../../../../images/image-20240329114134057.png" alt="image-20240329114134057"></p><p>PC4封装回复包，发给PC1</p><p><img src="/../../../../images/image-20240329114214764.png" alt="image-20240329114214764"></p><p>交换机收到了PC4的数据帧，将帧头中的<strong>源MAC地址</strong>学习到MAC表中，并与接口GE0&#x2F;0&#x2F;4关联。</p><p><img src="/../../../../images/image-20240329114236622.png" alt="image-20240329114236622"></p><p>交换机在MAC表中查找数据帧的<strong>目的MAC地址</strong>，发现有一个匹配的表项，出接口是GE0&#x2F;0&#x2F;1，于是将数据帧转发到GE0&#x2F;0&#x2F;1口。</p><p><img src="/../../../../images/image-20240329114255101.png" alt="image-20240329114255101"></p><p>例题：</p><p><img src="/../../../../images/image-20240329114314096.png" alt="image-20240329114314096"></p><h2 id="路由器和三层交换机"><a href="#路由器和三层交换机" class="headerlink" title="路由器和三层交换机"></a>路由器和三层交换机</h2><h3 id="路由器通信"><a href="#路由器通信" class="headerlink" title="路由器通信"></a>路由器通信</h3><p><img src="/../../../../images/image-20240330213604230.png" alt="image-20240330213604230"></p><h3 id="三层交换机"><a href="#三层交换机" class="headerlink" title="三层交换机"></a>三层交换机</h3><p><img src="/../../../../images/image-20240330213627530.png" alt="image-20240330213627530"></p><h3 id="路由器和三层交换机的区别？"><a href="#路由器和三层交换机的区别？" class="headerlink" title="路由器和三层交换机的区别？"></a>路由器和三层交换机的区别？</h3><p>典型园区拓扑结构</p><p><img src="/../../../../images/image-20240330213842523.png" alt="image-20240330213842523"></p><p><img src="/../../../../images/image-20240330213907812.png" alt="image-20240330213907812"></p><p>对比图</p><p><img src="/../../../../images/image-20240330213924205.png" alt="image-20240330213924205"></p><p>三层交换机使用的asic硬件芯片完成转发</p><p>路由器利用的是CPU完成转发</p><p>路由器和三层交换机区别，就好像一个博士和十万个小学生</p><p>路由器能够完成高端复杂的功能，但交换机只能完成一些简单的计算，但能够处理数量够大的，而路由器却完成不了太多数据。</p><h2 id="多层交换机-网关设备"><a href="#多层交换机-网关设备" class="headerlink" title="多层交换机&#x2F;网关设备"></a>多层交换机&#x2F;网关设备</h2><h3 id="网关"><a href="#网关" class="headerlink" title="网关"></a>网关</h3><p>网关是互连网络中操作在OSI传输层之上的设施。网关的主要功能:<br>·     (1)连接网络层之上执行<strong>不同协议的子网</strong>，组成异构型的互联网。<br>·     (2)网关能对互不兼容的<strong>高层协议进行转换</strong>。<br>·     (3)为了实现异构型设备之间的通信，网关要对不同传输层、会      话层、表示层、应用层协议进行<strong>翻译和转换</strong>。</p><p><img src="/../../../../images/image-20240330214635813.png" alt="image-20240330214635813"></p><p>什么叫不同协议的子网？</p><p>例如：路由器上有很多接口，可以接不同类型的接口，比如以太网、ATM、SDH等，组成异构型的互联网</p><p>什么叫做能够兼容高层协议进行转换？</p><p>例如：例如一个部门使用TCP&#x2F;IP协议，另一个IPX&#x2F;SPX协议。它们使用的协议是互不兼容的，<strong>这时候就需要一个网关来进行协议转换成互相能够兼容的协议</strong></p><p>IPV6和IPV4为什么能够互相通信，因为有网关转换</p><h3 id="多层交换-多业务交换机"><a href="#多层交换-多业务交换机" class="headerlink" title="多层交换&#x2F;多业务交换机"></a>多层交换&#x2F;多业务交换机</h3><p>什么叫多业务交换机？</p><p>插入一个板卡就能够增加多一个功能或接口</p><p>什么是线卡？</p><p>线卡插入交换机就能够增加48个接口，插入更多的交换机等</p><p><img src="/../../../../images/image-20240330215806885.png" alt="image-20240330215806885"></p><p>华三硬件板卡最丰富，控标项;华为和锐捷板卡数量少,华为具有随板功能，如随板AC,软件授权。<br>实际项目配置多业务卡并不多(功能和性能原因，术业有专攻)。<br>了解一下迪普，也是多业务交换机的主推厂商。</p><h3 id="SDN可编程交换机"><a href="#SDN可编程交换机" class="headerlink" title="SDN可编程交换机"></a>SDN可编程交换机</h3><p><img src="/../../../../images/image-20240330220236687.png" alt="image-20240330220236687"></p><h3 id="网络演变"><a href="#网络演变" class="headerlink" title="网络演变"></a>网络演变</h3><p><img src="/../../../../images/image-20240330220302183.png" alt="image-20240330220302183"></p><p>1、交换机前身：中继器、集线器</p><p>2、二层交换机： 基于MAC转发</p><p>3、三层交换机： 集成路由功能</p><p>4、多业务交换机：FW&#x2F;AC&#x2F;LB&#x2F;WS等功能</p><p>5、可编程交换机： SDN 部分设备支持(H3C 125&#x2F;锐捷N18K等)</p><p>每个网络的演变都是有其缺点问题</p><p>中继器因为距离限制</p><p>集线器因为泛洪，广播风暴</p><p>二层交换机，有隔离，产生vlan，但跨vlan通信出现问题</p><p>三层交换机，能够解决跨vlan通信问题，nat提供等功能</p><p>多业务交换机：设备数量越多，网络越复杂</p><p>可编程交换机：优化设备 </p><hr><h1 id="网络层协议IP和ICMP"><a href="#网络层协议IP和ICMP" class="headerlink" title="网络层协议IP和ICMP"></a>网络层协议IP和ICMP</h1><h2 id="网络层协议"><a href="#网络层协议" class="headerlink" title="网络层协议"></a>网络层协议</h2><h3 id="IP报文格式"><a href="#IP报文格式" class="headerlink" title="IP报文格式"></a>IP报文格式</h3><p><img src="/../../../../images/image-20240331000304087.png" alt="image-20240331000304087"></p><p><strong>版本</strong>： 确定是IPV4还是IPV6</p><p>**头部长度(IHL)**：告诉接收方IPv4头部的实际长度是多少个32位字（4字节），从而帮助接收方正确地解析IPv4报文，定位到IP数据的开始位置，并且可以灵活地适应IPv4头部的可变长度情况。</p><p><strong>为什么最小值为5，最大值为15？</strong></p><p>因为IP头部最小是20字节，而IHL单位是4字节，所以20&#x2F;4&#x3D;5</p><p>同理，IP头部最大是60字节，而IHL单位是4字节，60&#x2F;4&#x3D;15</p><p><strong>TOS</strong>：为区分服务字段，用区分服务类型，即QoS字段。</p><p><strong>总长度字段</strong>：IPv4数据报的总长度(首部+数据)</p><p><strong>标识(MF)、标志、分片偏移</strong>：是用于数据分片和重组的重要字段</p><p>**生存期(TTL)**：于设置一个数据包可经过的路由器数量的上限，每经过一台路由器减1。</p><p><strong>协议字段</strong>：包含一个数字，标识数据报有效载荷部分的数据类型。最常用的值为1(ICMP)17(UDP)和6(TCP)</p><p><strong>头部校验和</strong>：仅计算IPV4头部，不检查数据有效载荷部分的正确性。当TTL减一时，头部校验和必须重新计算。</p><h3 id="IP分片定义"><a href="#IP分片定义" class="headerlink" title="IP分片定义"></a>IP分片定义</h3><p>IP报文最大65535字节，而以太网MTU为1500字节。</p><p>相当于货轮能载重65535，而火车载重1500，那么必须把货轮上的货物分装给多个火车运输。</p><p><img src="/../../../../images/image-20240331110555030.png" alt="image-20240331110555030"></p><p>例题：</p><p>以太网主机发送一个IP分组，长度3000字节，头长度为标准长度，发送该IP分组时应分为几个分片? 写出各分片的信息(长度、偏移、MF)。</p><p><img src="/../../../../images/image-20240331110838920.png" alt="image-20240331110838920"></p><p>特殊例题：</p><p><img src="/../../../../images/image-20240331110905788.png" alt="image-20240331110905788"></p><h3 id="IPv4地址分类"><a href="#IPv4地址分类" class="headerlink" title="IPv4地址分类"></a>IPv4地址分类</h3><pre><code>  二进制    十进制                         11      102     1004    10008   1000016  10000032 100000064100000001281000000012811000000192111000002241111000024011111000248111111002521111111025411111111255</code></pre><p><img src="/../../../../images/image-20240331130435577.png" alt="image-20240331130435577"></p><p><img src="/../../../../images/image-20240331132819339.png" alt="image-20240331132819339"></p><p>常用IP地址</p><p><img src="/../../../../images/image-20240331130625505.png" alt="image-20240331130625505"></p><h3 id="特殊IPv4地址"><a href="#特殊IPv4地址" class="headerlink" title="特殊IPv4地址"></a>特殊IPv4地址</h3><p>**0.0.0.0 **</p><p>主机端： DHCP分配过程中，用0.0.0.0表示本机</p><p>路由：0.0.0.0表示默认路由</p><p><strong>255.255.255.255</strong></p><p>三层广播的目标地址，在同一个广播范围内所有主机都会接收这个包。</p><p><strong>169.254.0.0&#x2F;16</strong></p><p>使用DHCP自动获取IP地址，当DHCP服务器发送故障，或响应时间超时，系统会为你分配这样的一个地址，不能正常上网。</p><p><strong>127.0.0.0&#x2F;8</strong></p><p>本地环回地址，用于测试或网络管理</p><p><strong>RFC1918私有IP地址</strong></p><p>IPv4地址空间中有一部分特殊的地址，成为私有IP地址，私有IP地址不能直接访问公网(Internet)的IP，只能在本地使用。</p><p>A类:10.0.0.0&#x2F;8(10.0.0.1-10.255.255.255)1个A类网络</p><p>B类:172.16.0.0&#x2F;12(172.16.0.1-172.31.255.255)16个B类网络</p><p>C类:192.168.0.0&#x2F;16(192.168.0.1-192.168.255.255)256个C</p><p><strong>常见组播</strong></p><p>224.0.0.1 所有主机<br>224.0.0.2 所有路由器<br><strong>224.0.0.5 所有运行OSPF的路由器</strong><br><strong>224.0.0.6 DR和BDR的组播接收地址</strong><br><strong>224.0.0.9 RIPv2组播更新地址</strong><br>224.0.0.18 VRRP组播地址</p><h3 id="ARP与RARP协议"><a href="#ARP与RARP协议" class="headerlink" title="ARP与RARP协议"></a>ARP与RARP协议</h3><p>为什么需要ARP？</p><p>因为他能够使得设备可以动态地获取目标设备的MAC地址，从而正确地发送和接收数据包。</p><p>ARP也简化了网络的配置和管理，提高网络的灵活性和自动化程度。</p><hr><p>ARP工作过程</p><p><img src="/../../../../images/image-20240331202545699.png" alt="image-20240331202545699"></p><p>主机A发送数据包给主机C之前，首先通过<strong>ARP协议根据IP地址获取主机MAC地址</strong></p><p>ARP请求：</p><p><img src="/../../../../images/image-20240331202648242.png" alt="image-20240331202648242"></p><hr><p><strong>为什么ARP字段中的目的主机MAC地址字段为:00:00:00:00:00:00而不是 FF:FF:FF:FF:FF:FF？</strong></p><p>目的主机 MAC 地址字段为 00:00:00:00:00:00 在 ARP 请求中起到了一种“填充”或“占位”的作用。它表示了一个请求，希望有网络中的设备能够回应，告诉发送设备自己的 MAC 地址。</p><p>一旦网络中的设备收到这个 ARP 请求并且发现自己的 IP 地址匹配到了请求中的目标 IP 地址，它们会响应这个 ARP 请求，并在 ARP 响应包中将自己的 MAC 地址放入目标主机 MAC 地址字段中。这样发送 ARP 请求的设备就能获得目标主机的 MAC 地址，以便进行通信</p><p>因此，在 ARP 请求中，目的主机 MAC 地址字段为 00:00:00:00:00:00 是一种用于发出“请求”信号的方式。它是一个暗示，告诉网络中的其他设备：这是一个 ARP 请求，目标主机的 MAC 地址尚未知晓，希望有设备能够回应并提供它的 MAC 地址。</p><hr><p>更新ARP缓存</p><p><img src="/../../../../images/image-20240331202712329.png" alt="image-20240331202712329"></p><p>ARP响应</p><p><img src="/../../../../images/image-20240331202741160.png" alt="image-20240331202741160"></p><p>更新ARP缓存</p><p><img src="/../../../../images/image-20240331202803384.png" alt="image-20240331202803384"></p><h4 id="ARP协议工作过程"><a href="#ARP协议工作过程" class="headerlink" title="ARP协议工作过程:"></a><strong>ARP协议工作过程</strong>:</h4><ol><li><p><strong>主机A查询自己的ARP缓存，发现没有主机B对应的MAC地址</strong>;</p></li><li><p><strong>主机A发送ARP Request报文(广播);</strong></p></li><li><p><strong>主机B把主机A的IP、MAC对应信息填入自己的ARP缓存中</strong>;</p></li><li><p><strong>主机B向主机A回送包含主机B的MAC地址的ARPReply报文(单播);</strong></p></li><li><p><strong>主机A收到主机B的ARP Replay报文，将主机B的IP和MAC对应关系填入自己的ARP缓存中</strong>。</p></li></ol><p><img src="/../../../../images/image-20240331203638960.png" alt="image-20240331203638960"></p><pre><code>ARP欺骗应用：p2p终结者(需要ARP欺骗一起使用，不然直接arp到路由进行转发)、网络执法官</code></pre><h4 id="免费ARP"><a href="#免费ARP" class="headerlink" title="免费ARP"></a>免费ARP</h4><p>免费ARP是用来探测IP地址是否冲突</p><p><img src="/../../../../images/image-20240331211956041.png" alt="image-20240331211956041"></p><h4 id="代理ARP"><a href="#代理ARP" class="headerlink" title="代理ARP"></a>代理ARP</h4><p><img src="/../../../../images/image-20240331213315767.png" alt="image-20240331213315767"></p><h3 id="ICMP协议"><a href="#ICMP协议" class="headerlink" title="ICMP协议"></a>ICMP协议</h3><p>ICMP(Internet Control Message Protocol,Internet控制报文协议)，<strong>协议号为1</strong>,封装在IP报文中，用来<strong>传递差错、控制、查询****等信息，典型应用</strong>ping&#x2F;tracert**依赖ICMP报文。</p><p>ICMP报文类型和代码</p><p><img src="/../../../../images/image-20240331232139466.png" alt="image-20240331232139466"></p><p><strong>ping</strong></p><p><img src="/../../../../images/image-20240331232242089.png" alt="image-20240331232242089"></p><p><strong>tracert</strong></p><p>用于快速地跟踪数据包在网络上的路径，提供逐跳的延迟信息</p><p><img src="/../../../../images/image-20240331232345009.png" alt="image-20240331232345009"></p><p><strong>pathping</strong></p><p>提供更全面的路径信息，包括每个跃点的丢包率和平均往返时间</p><p><img src="/../../../../images/image-20240331232423241.png" alt="image-20240331232423241"></p><h1 id="传输层封装协议TCP和UDP"><a href="#传输层封装协议TCP和UDP" class="headerlink" title="传输层封装协议TCP和UDP"></a>传输层封装协议TCP和UDP</h1><h2 id="TCP和UDP报文格式"><a href="#TCP和UDP报文格式" class="headerlink" title="TCP和UDP报文格式"></a>TCP和UDP报文格式</h2><p>TCP和UDP特点：</p><p><strong>传输控制协议(TCP)</strong><br>面向连接</p><p>可靠传输流控及窗口</p><p>机制TCP应用: WEB浏览器，电子邮件</p><p>文件传输程序</p><p><strong>用户数据报协议(UDP)</strong><br>面向无连接</p><p>不可靠传输</p><p>尽力而为的传输</p><p>UDP应用:域名系统(DNS)，视频应用、IP语音(VoIP)</p><hr><p>IP就像快递送到小区，UDP就像送到家门口</p><p><img src="/../../../../images/image-20240401163635316.png" alt="image-20240401163635316"></p><p>复用：不同的应用进程使用同一个传输层协议来工作</p><p>分用：同一个运输层将应用报文交给不同的应用进程来使用</p><hr><p><strong>TCP报文格式</strong></p><p><img src="/../../../../images/image-20240401210709829.png" alt="image-20240401210709829"></p><p>偏移值：只是TCP头部的长度，用于确定数据的起始位置</p><p>保留：保留供未来使用</p><p>URG：紧急指针标志。当设置为1时，表示紧急指针字段有效，用于指示紧急数据的结束位置。这通常用于指示接收方应该优先处理这部分数据。</p><p>ACK：确认号标志。当设置为1时，表示确认号字段有效，指示这个TCP报文中的确认号是有效的。通常用来确认已经成功接收到数据。</p><p>PSH：推送标志。当设置为1时，表示接收方应该尽快将收到的数据交给应用程序，而不是等到接收缓冲区满了再交给应用程序。这个标志通常用于实时或交互式的应用程序，需要尽快处理数据。</p><p>PST：重置连接标志。当设置为1时，表示要求对方重新建立连接。通常在连接发生错误或者异常情况下使用，用来终止连接或者重置连接状态。</p><p>SYN：同步序号标志。当设置为1时，表示这是一个连接请求或者连接接受报文。用于在建立连接时，同步双方的序号和窗口大小。</p><p>FIN：结束连接标志。当设置为1时，表示发送方已经发送完毕数据，并要求关闭连接。通常用于结束通信会话，告知对方不再有数据发送。</p><p>窗口：用来指示在没有收到确认前还可以发送的数据量，用于流量控制</p><p><strong>TCP伪首部</strong></p><p>TCP伪首部本质是<strong>IP头的一部分，包含源目IP地址，协议号、TCP报头和用户数据</strong>，主要用于TCP<strong>校验和计算。</strong></p><p>TCP伪首部：确保校验和计算的准确性和可靠性</p><p><img src="/../../../../images/image-20240401211726766.png" alt="image-20240401211726766"></p><p><strong>UDP报文格式</strong></p><p><img src="/../../../../images/image-20240401211805826.png" alt="image-20240401211805826"></p><h2 id="TCP的握手和挥手"><a href="#TCP的握手和挥手" class="headerlink" title="TCP的握手和挥手"></a>TCP的握手和挥手</h2><h3 id="TCP三次握手建立连接"><a href="#TCP三次握手建立连接" class="headerlink" title="TCP三次握手建立连接"></a>TCP三次握手建立连接</h3><p><img src="/../../../../images/image-20240401215656133.png" alt="image-20240401215656133"></p><p><img src="/../../../../images/image-20240401215741562.png" alt="image-20240401215741562"></p><h3 id="TCP四次挥手断开连接"><a href="#TCP四次挥手断开连接" class="headerlink" title="TCP四次挥手断开连接"></a>TCP四次挥手断开连接</h3><p><img src="/../../../../images/image-20240401215810526.png" alt="image-20240401215810526"></p><h2 id="流量控制和拥塞控制"><a href="#流量控制和拥塞控制" class="headerlink" title="流量控制和拥塞控制"></a>流量控制和拥塞控制</h2><h3 id="TCP流量控制"><a href="#TCP流量控制" class="headerlink" title="TCP流量控制"></a>TCP流量控制</h3><p>流量控制:为了<strong>防止发送方发送速度过快</strong>，导致接收方处理不过来，造成丢包重传，浪费网络资源。</p><p>TCP流量控制机制: <strong>可变大小的滑动窗口</strong>。</p><p>TCP滑动窗口机制</p><p><img src="/../../../../images/image-20240401232257048.png" alt="image-20240401232257048"></p><h3 id="TCP拥塞控制"><a href="#TCP拥塞控制" class="headerlink" title="TCP拥塞控制"></a>TCP拥塞控制</h3><p>有了流量控制，可以调节发送端和接收端的节奏，为什么还要有拥塞控制?<br>    <strong>流量控制</strong>:在AB两个端点进行。<br>    <strong>拥塞控制</strong>:在AB和所有网络节点中进行。</p><p>例如：A端最多能发1000M，B端最多能发800M，但中间链路带宽只能发500M，所以最多能发500M</p><p><img src="/../../../../images/image-20240401232536856.png" alt="image-20240401232536856"></p><p>TCP拥塞控制</p><p><img src="/../../../../images/image-20240401232856079.png" alt="image-20240401232856079"></p><p>例题：</p><p><img src="/../../../../images/image-20240401233048107.png" alt="image-20240401233048107"></p><p><img src="/../../../../images/image-20240401233419163.png" alt="image-20240401233419163"></p><h2 id="重要协议端口号总结"><a href="#重要协议端口号总结" class="headerlink" title="重要协议端口号总结"></a>重要协议端口号总结</h2><p>TCP&#x2F;UDP端口号</p><p><img src="/../../../../images/image-20240401233639543.png" alt="image-20240401233639543"></p><p><img src="/../../../../images/image-20240401233818309.png" alt="image-20240401233818309"></p><h1 id="路由协议"><a href="#路由协议" class="headerlink" title="路由协议"></a>路由协议</h1><h2 id="IP路由基础"><a href="#IP路由基础" class="headerlink" title="IP路由基础"></a>IP路由基础</h2><p>什么是路由？</p><p>根据路由表进行数据的转发，通俗讲，选择哪条比较近的路到达目的地</p><p><img src="/../../../../images/image-20240401235759297.png" alt="image-20240401235759297"></p><p>路由表工作原理</p><p>建立并维护路由表RIB。<br>直连路由:路由器<strong>本地接口</strong>所在网段。<br>静态路由:<strong>手工配置</strong>的路由条目。<br>动态路由:路由器之间通过<strong>动态路由协议</strong>学习到的路由。<br>根据路由表进行<strong>数据转发</strong>。</p><p>查看路由表</p><p><img src="/../../../../images/image-20240402000123337.png" alt="image-20240402000123337"></p><p>R是relay的首字母，说明是迭代路由，会根据路由下一跳的IP地址获取出接口。配置静态路由时如果你只指定下一跳IP地址，而不指定出接口，那么就是迭代路由，需要根据下一跳IP地址的路由获取出接口<br>D是download的首字母,表示该路由下发到FIB表。</p><h2 id="静态路由和默认路由"><a href="#静态路由和默认路由" class="headerlink" title="静态路由和默认路由"></a>静态路由和默认路由</h2><h3 id="静态路由"><a href="#静态路由" class="headerlink" title="静态路由"></a>静态路由</h3><p>什么是静态路由？</p><p>R1想要访问R3，R2直连路由外，则需要添加路由条目，手工配置方式比较简单的方式，为路由器创建静态路由表项。</p><p><img src="/../../../../images/image-20240402114905225.png" alt="image-20240402114905225"></p><p>静态路由配置</p><p><img src="/../../../../images/image-20240402114823190.png" alt="image-20240402114823190"></p><h3 id="默认路由"><a href="#默认路由" class="headerlink" title="默认路由"></a>默认路由</h3><p>配置多条静态路由，但是发现下一跳都说同一个接口，这时候需要默认路由，来节省时间。</p><p><img src="/../../../../images/image-20240402122942814.png" alt="image-20240402122942814"></p><p>配置方式</p><p><img src="/../../../../images/image-20240402123000703.png" alt="image-20240402123000703"></p><p><strong>静态路由和默认路由特点</strong></p><p><strong>静态路由</strong><br>配置简单<br>手工配置，可控性高<br>节省网络带宽<br><strong>网络大，工作量大，比如配置1000条静态路由<br>网络故障，无法响应拓扑动态变化</strong></p><p><strong>默认路由</strong><br>默认路由是一种特殊的静态路由，走投无路的选择<br>配置简单，简化管理<br>降低路由 CPU、内存资源<br><strong>用处:网络出口路由器&#x2F;防火墙&#x2F;核心交换机</strong></p><p>PS: 静态路由和默认路由都不会响应拓扑动态变化</p><h2 id="动态路由协议"><a href="#动态路由协议" class="headerlink" title="动态路由协议"></a>动态路由协议</h2><p>什么是距离矢量路由协议，什么是链路状态路由协议？</p><p>距离矢量链路协议：</p><p>使用距离矢量路由协议的路由器并<strong>不了解网络的拓扑</strong>。该路由器只知道<br>自身与目的网络之间的距离。<br>应该往哪个方向或哪个接口转发数据包。</p><p>通俗地说：</p><p>距离矢量路由协议：就像，别人说往东走10步，再往西走6步，不知道拓扑结构。</p><p>链路状态路由协议：就像，高德地图，知道拓扑结构</p><p><strong>分类</strong>：</p><p><img src="/../../../../images/image-20240408100327992.png" alt="image-20240408100327992"></p><h3 id="RIP协议"><a href="#RIP协议" class="headerlink" title="RIP协议"></a>RIP协议</h3><p>RIP(Routing Information Protocol,路由信息协议 )</p><p><strong>内部网关协议，距离矢量路由协议</strong>。</p><p>华为设备上路由优先级为100。</p><p>计算跳数:<strong>最大15跳，16跳不可达</strong>，一般用于小型网络</p><p>几个时钟:<strong>30s周期性更新路由表、180s无更新表示不存在、300s删除路由表</strong></p><p>支持等价负载均衡和链路冗余，使用<strong>UDP 520</strong>端口。</p><p><img src="/../../../../images/image-20240408100705667-17125420350251.png" alt="image-20240408100705667"></p><p>RIP1 和 RIPv2 对比 </p><p><img src="/../../../../images/image-20240408100754654.png" alt="image-20240408100754654"></p><p>VLSM：可变长度子网掩码</p><p>CIDR：无类别域间路由，一种地址分配和路由选择的技术，使得IP地址的分配更加灵活，减少了地址空间的浪费，提高了路由表的效率</p><p>举例来说，考虑一个CIDR表示法的IPv4地址块：<code>192.168.1.0/24</code>。在这里，<code>192.168.1.0</code>是网络的基本地址，而<code>/24</code>表示前缀长度为24位。这意味着前24位用于网络标识，剩余的8位用于主机标识。通过这个CIDR表示法，我们可以轻松理解这个地址块包含了从<code>192.168.1.0</code>到<code>192.168.1.255</code>的所有主机。</p><p>RIP路由的度量值：</p><p>查看RIP路由的度量值： display ip routing-table</p><p>RIP以<strong>跳数</strong>作为度量值，但事实上不科学。</p><p><img src="/../../../../images/image-20240408102048668.png" alt="image-20240408102048668"></p><p>路由优先级(华为)，越小越优先</p><p><img src="/../../../../images/image-20240408194521090.png" alt="image-20240408194521090"></p><p>RIP防环机制</p><p>①最大跳数:当一个路由条目发送出去会自加1跳，跳数最大为16跳，意味着不可达。<br>②水平分割:一条路由信息不会发送给信息的来源。<br>③反向毒化的水平分割:把从邻居学习到的路由信息设为16跳，再发送给那个邻居<br>④抑制定时器和触发更新也可以防止环路。</p><h3 id="OSPF"><a href="#OSPF" class="headerlink" title="OSPF"></a>OSPF</h3><p>Open Shortest Path First，开放式最短路径优先协议</p><p>内部网关协议，OSPF是一种<strong>链路状态路由协议</strong>。</p><p>Open意味着公有，任何厂商都能支撑OSPF，目前业内使用最广泛的IGP.</p><p>华为设备上，OSPF协议优先级Internal10，External150。</p><p>路由器之间<strong>交互的是链路状态信息</strong>，而不是直接交互路由。</p><p>路由器知晓网络拓扑结构，采用**SPF算法(迪杰斯特拉 Dijkstra)**计算达到目的地的最短路径。</p><p>支持VLSM，支持手工路由汇总。</p><p>OSPF基本特点：</p><p><strong>适应范围广</strong>:支持各种规模的网络。</p><p><strong>快速收敛</strong>:在网络的拓扑结构发生变化后立即发送更新报文，使这一变化在自治系统中同步。</p><p><strong>无自环</strong>:使用SPF最短路径树算法进行路由计算，<strong>不会产生环路</strong>。</p><p><strong>区域划分</strong>:允许网络被划分成区域来管理，链路状态数据库仅需和区域内其他路由器保持一致。 <strong>减小对路由器内存和CPU的消耗</strong>。同时区域间传送的路由信息减小，<strong>降低网络带宽占用</strong>。</p><p>OSPF Cost</p><p>OSPF使用Cost“开销”作为路由度量值。<br>OSPF接口cost&#x3D;100M&#x2F;接口带宽，其中100M为OSPF参考带宽(reference-bandwidth)，可修改.<br>每一个激活OSPF的接口都有一个cost值。<br>条OSPF路由的cost由该路由从起源一路到达本地的所有<strong>入接口cost值的总和</strong>。</p><p><img src="/../../../../images/image-20240408195339907.png" alt="image-20240408195339907"></p><p>OSPF区域</p><p>所有非骨干区域必须与骨干区域直连。</p><p><img src="/../../../../images/image-20240408195506537.png" alt="image-20240408195506537"></p><p>OSPF路由器角色</p><p><img src="/../../../../images/image-20240408195812787.png" alt="image-20240408195812787"></p><p>OSPF总结</p><p><img src="/../../../../images/image-20240408195853665.png" alt="image-20240408195853665"></p><h3 id="BGP"><a href="#BGP" class="headerlink" title="BGP"></a>BGP</h3><p>BGP(Border Gateway Protocol,边界网关协议)<strong>外部网关协议</strong>，用于不同自治系统AS之间，寻找最佳路由。<br>通过<strong>TCP 179</strong>端口建立连接。支持VLSM和CIDR，是一种路径矢量协议。目前最新版本是BGP4，而BGP4+支持IPV6。</p><p>BGP四个报文</p><p><img src="/../../../../images/image-20240408200034700.png" alt="image-20240408200034700"></p><p>BGP选路规则</p><p><img src="/../../../../images/image-20240408200058986.png" alt="image-20240408200058986"></p><h3 id="ISIS"><a href="#ISIS" class="headerlink" title="ISIS"></a>ISIS</h3><p>IS-IS(Intermediate system to intermediate system，中间系统到中间系统)是<strong>内部网关协议</strong>，是电信运营商普遍采用的内部网关协议之一，也是一个<strong>分级的链路状态路由协议</strong>。</p><p>与OSPF相似，它也使用Hello协议寻找毗邻节点。</p><p>与大多数路由协议不同，IS-IS 直接运行于链路层之上。</p><p>IS-IS具有层次性，分为两层Level-1和Level-2。</p><p>​Level-1(L1)是普通区域(Area)，Level-2(L2)是骨干区(Backbone)。</p><p>​<strong>骨干区Backbone是连续的Leve1-2路由器的集合，由所有的L2(含L1&#x2F;L2)路由器组成</strong>，L1和L2运行相同的SPF算法，一个路由器可能同时参与L1和L2。</p><p>IS-IS区域结构图</p><p><img src="/../../../../images/image-20240408200510050.png" alt="image-20240408200510050"></p><p>ISIS和OSPF区域架构</p><p><img src="/../../../../images/image-20240408200530848.png" alt="image-20240408200530848"></p>]]></content>
      
      
      <categories>
          
          <category> Network - 网工中级 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Network </tag>
            
            <tag> 网工中级 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Eth-Trunk和堆叠</title>
      <link href="/2024/06/01/%E7%AC%94%E8%AE%B0/Network/Blog/Eth-Trunk%E5%92%8C%E5%A0%86%E5%8F%A0/"/>
      <url>/2024/06/01/%E7%AC%94%E8%AE%B0/Network/Blog/Eth-Trunk%E5%92%8C%E5%A0%86%E5%8F%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="Eth-Trunk和堆叠"><a href="#Eth-Trunk和堆叠" class="headerlink" title="Eth-Trunk和堆叠"></a>Eth-Trunk和堆叠</h1><h2 id="Eth-Trunk"><a href="#Eth-Trunk" class="headerlink" title="Eth-Trunk"></a>Eth-Trunk</h2><p><img src="/../../../../images/image-20240517134239857.png" alt="image-20240517134239857"></p><p>Eth-Trunk是一种将多个以太网接口捆绑成一个逻辑接口的捆绑技术。</p><p>Eth-Trunk链路聚合模式：<br>1、手工负载分担模式<br>2、LACP模式(802.3ad)</p><h3 id="手工负载分担模式"><a href="#手工负载分担模式" class="headerlink" title="手工负载分担模式"></a>手工负载分担模式</h3><p><img src="/../../../../images/image-20240517134452989.png" alt="image-20240517134452989"></p><p>当两台设备中至少有一台不支持LACP协议时，可使用手工负载分担模式的Eth-Trunk来增加设备间的带宽及可靠性。<br>在手工负载分担模式下，加入Eth-Trunk的链路都进行数据的转发</p><p>缺点：</p><p>1、端口差错，是不能够检测出来</p><p>A的端口1，2，3，连接对面的1，2，3，然后把捆绑到一个逻辑端口，然后端口1人为失误接到对方的4口，那么端口1的数据发送不过去。</p><h3 id="LACP模式"><a href="#LACP模式" class="headerlink" title="LACP模式"></a>LACP模式</h3><p>能够实现：主备模式</p><p>通俗地说，能够自由分配哪些链路工作，哪些链路做备链路</p><p><img src="/../../../../images/image-20240517134840860.png" alt="image-20240517134840860"></p><p>LACP模式也称为M:N模式，其中M条链路处于活动状态转发数据，N条链路处于非活动状态作为备份链路。</p><p>图中设置的活跃链路数为2，即2条链路处于转发状态，1条链路处于备份状态，不转发数据，只有当活跃的链路出现故障时，备份链路才进行转发。</p><p>特点：</p><p>1、端口插错，能够快速检测；</p><p>那一条端口插错，那条链路就协商不起来，管理人员能够快速知道哪条链路出现问题，并且那条链路出现故障，数据不会发往那一条链路</p><h4 id="LACP模式获得链路的选取"><a href="#LACP模式获得链路的选取" class="headerlink" title="LACP模式获得链路的选取"></a>LACP模式获得链路的选取</h4><p><img src="/../../../../images/image-20240517135351964.png" alt="image-20240517135351964"></p><p>先确定主动端</p><p>​1、比较设备优先级</p><p>​2、如果优先级相同，比MAC地址，越小越优先</p><p>确定主动端哪些端口主用，哪些是备用？</p><p>​1、比较主动端的端口优先级</p><p>​2、如果没有设置端口优先级，都是默认值，那么比较端口编  号，越小越优先。</p><h4 id="LACP模式的抢占机制"><a href="#LACP模式的抢占机制" class="headerlink" title="LACP模式的抢占机制"></a>LACP模式的抢占机制</h4><p><img src="/../../../../images/image-20240517135814875.png" alt="image-20240517135814875"></p><p>默认抢占延迟是30s</p><h3 id="Eth-Trunk接口负载分担"><a href="#Eth-Trunk接口负载分担" class="headerlink" title="Eth-Trunk接口负载分担"></a>Eth-Trunk接口负载分担</h3><p>Eth-Trunk接口进行负载分担时，可以选择IP地址或者包作为负载分担的散列依据;同时还可以设置成员接口的负载分担权重。</p><p>Eth-Trunk接口中，某成员接口的权重值占所有成员接口负载分担权重之和的比例越大，该成员接口承担的负载就越大。</p><p><img src="/../../../../images/image-20240517140002272.png" alt="image-20240517140002272"></p><h3 id="Eth-Trunk接口配置流程"><a href="#Eth-Trunk接口配置流程" class="headerlink" title="Eth-Trunk接口配置流程"></a>Eth-Trunk接口配置流程</h3><p><img src="/../../../../images/image-20240517140123897.png" alt="image-20240517140123897"></p><h4 id="配置命令-三层接口"><a href="#配置命令-三层接口" class="headerlink" title="配置命令(三层接口)"></a>配置命令(三层接口)</h4><p>方式1</p><p><img src="/../../../../images/image-20240517140159793.png" alt="image-20240517140159793"></p><p>undo portswitch &#x2F;&#x2F;关闭二层特性</p><p>方式2</p><p><img src="/../../../../images/image-20240517140213165.png" alt="image-20240517140213165"></p><p>查看命令</p><p>display eth-trunk 0</p><p><img src="/../../../../images/image-20240517140350466.png" alt="image-20240517140350466"></p><p>Preempt delay：抢占延迟</p><p>system priority：优先级</p><p>Hash： hash算法,算出一个值，决定这个数据包或者数据流走哪条链路。</p><p>system ID：MAC地址</p><p>Least Active-linknumber：默认是1</p><p>比如数值为2，就说明，这个链路最小也要两条链路工作，如果只剩下一条，整个链路断掉。</p><p>Max Active-linknumber：最大活动链路，一般为8</p><p>图中status的selected就是被选中，就是活动链路，unselected就是备用链路</p><h2 id="堆叠、集群"><a href="#堆叠、集群" class="headerlink" title="堆叠、集群"></a>堆叠、集群</h2><p><img src="/../../../../images/image-20240419104134010-171723051759220.png" alt="image-20240419104134010"></p><p>级联：一级一级的连接，核心层-汇聚层-接入层，一般不超过三层</p><p>堆叠：好比虚拟化，在接入层，有三台交换机(24接口)，合并成一台交换机(72接口)。</p><h3 id="堆叠基本认识"><a href="#堆叠基本认识" class="headerlink" title="堆叠基本认识"></a>堆叠基本认识</h3><p>主交换机(Master)、备交换机(Standby)、从交换机(Slave)</p><p>三者之间关系：</p><p>主交换机故障，则备交换机变成主交换机，然后从交换机会选择其中一条变成从交换机。</p><p><strong>堆叠逻辑接口</strong></p><p>堆叠口可以是：物理堆叠口&#x2F;逻辑堆叠口</p><p><strong>交叉连线</strong></p><p><img src="/../../../../images/image-20240517164616475.png" alt="image-20240517164616475"></p><p>G2&#x2F;0&#x2F;1，G堆叠ID&#x2F;端口号</p><p>**堆叠方式  **</p><p>堆叠卡堆叠</p><p><img src="/../../../../images/image-20240517165207559.png" alt="image-20240517165207559"></p><p>业务口堆叠</p><p><img src="/../../../../images/image-20240517165225223.png" alt="image-20240517165225223"></p><p><strong>堆叠连接拓扑</strong></p><p>链形连接</p><p><img src="/../../../../images/image-20240517165412595.png" alt="image-20240517165412595"></p><p>环形连接</p><p><img src="/../../../../images/image-20240517165451622.png" alt="image-20240517165451622"></p><p><strong>主交换机选举</strong></p><p>1、运行状态比较，已经运行的交换机比处于启动状态的交换机优先竞争为主交换机</p><p>堆叠主交换机选举超时时间为20s，堆叠成员交换机上电或重启时，由于不同成员交换机所需的启动时间可能差异比较大，因此不是所有成员交换机都有机会参与主交换机的第一次选举。</p><p>2、堆叠优先级高的交换机优先竞争为主交换机</p><p>3、堆叠优先级相同时，MAC地址小的交换机优先竞争为主交换机</p><p>简单地说，设置堆叠启动后，先启动的交换机A，</p><p>在20s内没有人跟交换机A竞选，那么交换机A就成为主交换机。</p><p>在20s内有人跟交换机A竞选，有交换机B加进来，那么交换机A和B进行PK。</p><p>4、堆叠优先级高的交换机优先竞争为主交换机，默认是100优先级。</p><p>5、如果堆叠优先级相同，MAC地址小的交换机竞争为主交换机。</p><p><strong>备交换机选举</strong></p><p>1、堆叠优先级最高的交换机成为交换机</p><p>2、堆叠优先级相同时，MAC地址最小的成为备交换机</p><p><strong>软件、配置同步</strong></p><p>角色选举、拓扑收集完成之后，所有成员交换机会自动同步<br>主交换机的系统软件和配置文件:</p><p>1、堆叠具有自动加载系统软件的功能，待组成堆叠的成员交换机不需要具有相同软件版本，只需要版本间兼容即可。<br>当备交换机或从交换机与主交换机的软件版本不一致时，备交换机或从交换机会自动从主交换机下载系统件，然后使用新系统软件重启，并重新加入堆叠。</p><p>2、堆叠具有配置文件同步机制，备交换机或从交换机会将主交换机的配置文件同步到本设备并执行，以保证堆叠中的多台设备能够像一台设备一样在网络中工作，并且在主交换机出现故障之后，其余交换机仍能够正常执行各项功能。</p><p>简单地说，备交换的版本或配置不相同，需要从主交换机下载，其中从主交换机下载软件后，需要使用新系统软件重启。</p><p><strong>堆叠管理与配置文件</strong></p><p><img src="/../../../../images/image-20240517175003360.png" alt="image-20240517175003360"></p><p><img src="/../../../../images/image-20240517175018799.png" alt="image-20240517175018799"></p><p><strong>跨设备链路聚合</strong></p><p>堆叠支持跨设备链路聚合技术，堆叠后成为逻辑上的一台交换机，支持将Eth-Trunk的成员接口分布在不同的成员交换机上。</p><p>当其中一条聚合链路故障或堆叠中某台成员交换机故障时，Eth-Trunk接口通过堆叠线缆将流量重新分布到其他聚合链路上，实现了链路间和设备间的备份，保证了数据流量的可靠传输。</p><p><img src="/../../../../images/image-20240517175204249.png" alt="image-20240517175204249"></p><p>当设备进行堆叠后，就相当于一台设备，就能够跨设备的逻辑聚合&#x2F;链路聚合(Eth-Trunk)。</p><h3 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h3><p>(1)逻辑上把多台设备虚拟成一台设备，简化运维，方便管理。</p><p>(2)一台物理设备故障，其他设备可以接管转发、控制平台，避免了单点故障</p><p>(3)跨设备的链路聚合，物理上的无环网络，无需再部署STP</p><p>(4)链路聚合中的链路全部有效使用，链路利用率100%。</p><h3 id="劣势"><a href="#劣势" class="headerlink" title="劣势"></a>劣势</h3><p>(1)堆叠都是私有协议，不支持跨厂商设备堆叠。</p><p>(2)需要单独购买堆叠线缆。(现在最新的用光纤也能实现堆叠)(3)存在一定资源浪费，特别高端设备，如果2台核心都配置双引擎，堆叠后只有1个引擎工作。</p><p>(4)如果堆叠系统升级或重启，一般会有20~60s的业务中断。</p><p>(5)可靠性风险:控制层面统一后，相当于把鸡蛋放在一个篮子里，如果整个逻辑设备的控制平面出现问题(比如说路由表被人攻击破坏)，就有可能导致整机瘫痪，影响的范围大。</p><h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><p>某企业办公楼网络拓扑如图1-1所示。该网络中交换机Switch1-Switch4均是二层设备，分布在办公楼的各层，上联采用千兆光纤。核心交换机、防火墙、服务器部署在数据机房，其中核心交换机实现冗余配置。</p><p><img src="/../../../../images/image-20240517183455327.png" alt="image-20240517183455327"></p><p>(1)简要说明该网络中核心交换机有哪几种冗余配置方式。</p><p>堆叠、VRRP</p><p>(2)在该网络中增加终端接入认证设备，可以选择在接入层、核心层或者DMZ区部署请选择最合理的部署区域并说明理由。</p><p>旁挂到核心层，速度快，可靠性高；</p><p>如果部署在接入层，万一出现问题，其他交换机下的PC就找不到认证设备了</p><p>如果部署在dmz区域，dmz区域是暴露给互联网用户访问的，而认证设备是给内网用户使用的，所以放在dmz也不合理</p><p>放在核心层比较合适，因为核心层的交换机比接入层的交换机更可靠，接入层故障，也不会影响其他接入层下的pc使用。</p><p>(1)校园网采用大二层组网结构，信息中心计划对核心交换机采用堆叠技术，请简述堆叠技术的优点和缺点。</p><p><strong>堆叠技术优点:<br>①逻辑上变为一台设备，简化网络管理;<br>②提升系统可靠性,避免单点故障;<br>③配合链路聚合等技术，防止接口被生成树阻塞，提升链路利用率。</strong></p><p><strong>堆叠技术缺点:<br>①堆叠是私有协议，不支持跨厂商设备堆叠;<br>②系统升级会造成业务中断:<br>③多台设备堆叠，只有一个主控处于工作状态，存在资源浪费。</strong></p><p>若车间1增加一台接入交换机C，该交换机需要与车间1接入层交换机进行互连，其连接方式有(10)和(11);其中(12)方式可以共享使用交换机背板带宽，(13)方式可以使用双绞线将交换机连接在一起。<br>10.堆叠<br>11.级联<br>12.堆香                                               13.级联</p><h2 id="堆叠和VRRP-STP"><a href="#堆叠和VRRP-STP" class="headerlink" title="堆叠和VRRP+STP"></a>堆叠和VRRP+STP</h2><p>为什么堆叠能够避免环路，而VRRP还需要添加STP才能避免环路？</p><p>首先，VRRP的主要目的是路由器冗余，而不是交换层面的环路防护。它在逻辑层面创建了一个虚拟的网关IP，但它不能控制交换机之间的物理连接。环路是交换机层（第二层）的问题，而VRRP是第三层的解决方案。</p><p>生成树协议（STP）通过检测和关闭冗余路径来防止环路的产生。STP工作在数据链路层，确保网络中的交换机形成一个无环的树形结构。</p><p>vrrp+stp协同工作：</p><ol><li><strong>交换机层面的环路防护</strong>：通过STP防止交换机之间的物理环路，确保网络的第二层拓扑无环。</li><li><strong>路由器层面的冗余</strong>：通过VRRP提供路由器的冗余，确保默认网关的高可用性。</li></ol><p>其次，堆叠技术将多台物理交换机连接在一起，使它们在逻辑上表现为一个单一的交换机。这种技术通过专用的堆叠接口和协议，将多台交换机的控制平面和数据平面合并，简化网络管理和配置。</p><p>堆叠如何避免环路</p><ol><li><strong>单一逻辑设备</strong>：堆叠后的交换机在逻辑上被视为一个设备。虽然物理上存在多个交换机和多条连接，但在网络拓扑上，它们表现为一个交换机。这种逻辑上的单一性消除了第二层的环路风险。</li><li><strong>专用的堆叠接口和协议</strong>：堆叠交换机之间使用专用的堆叠接口和协议进行通信，这些接口和协议设计用于高带宽和低延迟的互连，并且本身不会产生环路。堆叠协议负责管理堆叠成员之间的数据流动和路径选择，确保没有环路。</li><li><strong>集中管理和控制</strong>：在堆叠系统中，有一个主交换机（Master）和多个从交换机（Slave）。主交换机负责整个堆叠系统的控制和管理，包括路径选择和数据转发决策。通过集中管理，堆叠系统能有效地防止环路的形成。</li><li><strong>内置冗余和故障恢复</strong>：堆叠技术内置了冗余和故障恢复机制。当堆叠成员之间的连接出现故障时，堆叠系统能够自动调整数据路径，确保网络连通性，而不会产生环路。</li></ol><p>简单地说：</p><p>堆叠技术通过将多台交换机逻辑上合并为一个单一设备，并使用专用的堆叠接口和协议进行管理，能够有效避免二层环路问题。这种架构提供了简化管理、高扩展性和高可用性的优点，使其成为大规模网络环境中的理想选择。相比之下，VRRP需要与生成树协议（STP）配合使用，以确保复杂网络拓扑中的无环和高可用性。</p><p>堆叠技术需要使用，堆叠接口和协议才能实现；而VRRP不需要特殊的接口，VRRP能够在网络层把设备逻辑成一台设备，但是两层数据链路层没办法逻辑成一条线，这样成环路，所以需要STP来避免环路。</p>]]></content>
      
      
      <categories>
          
          <category> Network - Blog </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Network </tag>
            
            <tag> Tth-Trunk </tag>
            
            <tag> 堆叠 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WLAN</title>
      <link href="/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/WLAN/"/>
      <url>/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/WLAN/</url>
      
        <content type="html"><![CDATA[<h3 id="AP-AC组网方式"><a href="#AP-AC组网方式" class="headerlink" title="AP - AC组网方式"></a>AP - AC组网方式</h3><h4 id="AP和AC间的组网分为：二层组网和三层组网"><a href="#AP和AC间的组网分为：二层组网和三层组网" class="headerlink" title="AP和AC间的组网分为：二层组网和三层组网"></a>AP和AC间的组网分为：二层组网和三层组网</h4><p>二层组网</p><p><img src="/../../../../images/image-20240512092151203.png" alt="image-20240512092151203"></p><p>二层组网：“零配置”</p><p>AP和AC在二层网络，属于同一广播域，DHCP先给AP分配IP，然后AP发广播，寻找AC的地址，然后AC对他统一管理</p><p>三层组网</p><p><img src="/../../../../images/image-20240512092204831.png" alt="image-20240512092204831"></p><p>在三层网络，AC和AP之间不属于同一广播域，发广播是转发不到AP，需要AP单播给AC，而是DHCP的option 43功能起作用，在给AP分配IP同时并告知AC的IP</p><h3 id="AC连接方式"><a href="#AC连接方式" class="headerlink" title="AC连接方式"></a>AC连接方式</h3><p>AC连接方式：直连式组网和旁挂式组网</p><p>直连式</p><p><img src="/../../../../images/image-20240512102444055.png" alt="image-20240512102444055"></p><p>AC充当：AC和汇聚交换机</p><p>缺点：AC发生故障，整个网就瘫痪</p><p>旁挂式组网</p><p><img src="/../../../../images/image-20240512102508658.png" alt="image-20240512102508658"></p><p>这里架构，对以前的架构没影响，AC出故障，也不会对网络造成很大影响(对无线网造成影响，有线网没影响)</p><h3 id="数据转发方式"><a href="#数据转发方式" class="headerlink" title="数据转发方式"></a>数据转发方式</h3><p>隧道转发方式</p><p><img src="/../../../../images/image-20240512103005206.png" alt="image-20240512103005206"></p><p>将数据封装到隧道里再发送，送到AC，在AC再解封装，然后AC再把他发送出去；</p><p>注意：经过交换机，但不暴露</p><p>适用的场景：底层设备链路太过凌乱，这时候AC可能合适，因为选用AC，就不需要你在交换机梳理清楚，因为在交换机不会暴露出来，他会通过隧道的方式送到AC那，再暴露出来</p><p>缺点：</p><p>1、AC压力很大，业务流量和管理流量都需要AC处理</p><p>2、数据有迂回的流量，AP-交换机-路由器-AC-路由器-防火墙</p><p>优点：</p><p>1、安全性高一定，可以在隧道做DTS加密</p><p>2、可以屏蔽底层的vlan</p><p>直接转发方式</p><p><img src="/../../../../images/image-20240512103023669.png" alt="image-20240512103023669"></p><p>把数据送到最近的交换机，然后再转发出去。</p><p>配置方面：</p><p>直接转发方式</p><p>业务数据流量：STA-Switch-Router-Firewall</p><p>STA发送数据，AP会打上业务标签，送到最近的交换机。然后这时候需要在AP~Switch之间放行业务vlan</p><p>隧道转发方式</p><p>业务数据流量：STA-Switch-AC-Switch-Router-Firewall</p><p>STA发送数据，AP会打上业务标签，AP继续做隧道封装，然后把业务封装遮盖，暂时不会暴露，AP会把数据一路送到AC，AC解开隧道头部，业务数据才暴露。所以需要再AC和router放心业务vlan则可以了</p><h3 id="无线侧组网"><a href="#无线侧组网" class="headerlink" title="无线侧组网"></a>无线侧组网</h3><h4 id="BSS-SSID-BSSID"><a href="#BSS-SSID-BSSID" class="headerlink" title="BSS&#x2F;SSID&#x2F;BSSID"></a>BSS&#x2F;SSID&#x2F;BSSID</h4><p><img src="/../../../../images/image-20240512103126412.png" alt="image-20240512103126412"></p><p>ssid就相当于，wifi的名字</p><p>bssid就相当于，wifi的mac地址，身份标识</p><p>bss，就说ap所覆盖的范围</p><h4 id="VAP"><a href="#VAP" class="headerlink" title="VAP"></a>VAP</h4><p><img src="/../../../../images/image-20240512103304177.png" alt="image-20240512103304177"></p><p>VAP，就是相当于一个wifi分成多个wifi，例如办公室专用，教室专用</p><h4 id="ESS-ESSID"><a href="#ESS-ESSID" class="headerlink" title="ESS&#x2F;ESSID"></a>ESS&#x2F;ESSID</h4><p><img src="/../../../../images/image-20240512103442195.png" alt="image-20240512103442195"></p><p>举个例子</p><p>其中一家肯德基(SSID)，开在万达广场的一楼A3店铺(BSSID)</p><p>然后肯德基(ESSID)也是一个品牌，全国都有，万达广场只是其中一个分店。</p><h3 id="WLAN工作流程"><a href="#WLAN工作流程" class="headerlink" title="WLAN工作流程"></a>WLAN工作流程</h3><p><img src="/../../../../images/image-20240512153044724.png" alt="image-20240512153044724"></p><p>步骤：</p><p><strong>1、AP上线</strong></p><p>​AP获取IP地址并发现AC，与AC建立连接</p><p><strong>2、WLAN业务配置下发</strong></p><p>​AC将WLAN业务配置下发到AP生效</p><p><strong>3、STA接入</strong></p><p>​STA搜索到AP发射的SSID并连接、上线、接入网络</p><p><strong>4、WLAN业务数据转发</strong></p><p>​WLAN网络开始转发业务数据</p><hr><h4 id="AP上线"><a href="#AP上线" class="headerlink" title="AP上线"></a>AP上线</h4><p><strong>AP获取IP地址(为了能够与AC通信，WLAN网络才能够正常通信)</strong></p><p>AP获取IP地址的方式包括以下：</p><p>​静态方式：登录到AP设备上手工配置IP地址。</p><p>​DHCP方式：通过配置DHCP服务器，使AP作为DHCP客户端向DHCP服务器请求IP地址。</p><p>典型方案：</p><p>​部署专门的DHCP Server为AP分配IP地址</p><p>​使用AC的DHCP服务为AP分配IP地址</p><p>​使用网络中的设备，例如核心交换机为AP分配IP地址</p><p><img src="/../../../../images/image-20240512153831983.png" alt="image-20240512153831983"></p><p><strong>CAPWAP隧道建立</strong></p><p>AC通过CAPWAP隧道来实现对AP的集中管理和控制</p><p>Step 1：Discovery阶段(AP发现AC阶段)</p><p>AP通过发送Discovery Request报文，找到可用的AC。</p><p>AP发现AC有两个方式：</p><p>​静态方式：AP上预先配置AC的静态IP地址列表</p><p>​动态方式：DHCP方式，DNS方式和广播方式</p><p>Step 2：建立CAPWAP隧道阶段</p><p>AP与AC关联，完成CAPWAP隧道建立。包括数据隧道和控制隧道:<br>    数据隧道: AP接收的业务数据报文经过CAPWAP数据隧道集中到AC上转发。</p><p>​控制隧道: 通过CAPWAP控制隧道实现AP与AC之间的管理报文的交互。</p><p><img src="/../../../../images/image-20240512154651238.png" alt="image-20240512154651238"></p><p><strong>AP接入控制</strong></p><p><img src="/../../../../images/image-20240512154740205.png" alt="image-20240512154740205"></p><p><strong>AP的版本升级(可选)</strong></p><p><img src="/../../../../images/image-20240512154834266.png" alt="image-20240512154834266"></p><p><strong>CAPWAP隧道维持</strong></p><p><img src="/../../../../images/image-20240512155020581.png" alt="image-20240512155020581"></p><h4 id="WLAN业务配置下发"><a href="#WLAN业务配置下发" class="headerlink" title="WLAN业务配置下发"></a>WLAN业务配置下发</h4><p>AC向AP发送Configuration Update Request请求消息，AP回应Configuration Update Response消息，AC再将AP的业务配置信息下发给AP.</p><p><img src="/../../../../images/image-20240512155809797.png" alt="image-20240512155809797"></p><p><strong>配置模板</strong></p><p>针对WLAN的不同功能和特性设计了各种类型的模板(WLAN模板)</p><p><img src="/../../../../images/image-20240512155333007.png" alt="image-20240512155333007"></p><p><strong>VAP模板</strong></p><p><img src="/../../../../images/image-20240512155410767.png" alt="image-20240512155410767"></p><h4 id="STA接入"><a href="#STA接入" class="headerlink" title="STA接入"></a>STA接入</h4><p>CAPWAP隧道建立完成后，用户就可以接入无线网络。STA接入过程分为六个阶段:扫描阶段、链路认证阶段、关联阶段、接入认证阶段、DHCP、用户认证。</p><p><strong>802.11协议定义的帧类型</strong></p><p><img src="/../../../../images/image-20240512160334490.png" alt="image-20240512160334490"></p><p>管理帧</p><p>​管理帧负责监督，主要用来加入或退出无线网络以及处理基站之间连接的转移事宜。</p><p>控制帧</p><p>​控制帧通常与数据帧搭配使用，负责区域的清空信道的取得以及载波监听的维护，并在收到数据时予以正面的应答，借此促进工作站间数据传输的可靠性。</p><p>​简单地说，维护数据发送</p><p>数据帧</p><p>​数据帧好比802.11的运输工具，负责在工作站之间传输数据。</p><p>802.11关键报文 - 管理帧</p><p><img src="/../../../../images/image-20240512160611540.png" alt="image-20240512160611540"></p><p>Beacon信标帧，是AP主动放出来，是给STA被动扫描</p><p>检测请求帧、检测应答帧，是STA主动找AP探测，AP响应</p><p>举个例子：</p><p>周围wifi信号，不是自己的wifi，为啥能够看到，是AP主动放出来。理解为这就是信标帧。</p><p>某家的wifi设置了隐藏wifi，需要主动去检测，输入信息，发现该IP然后再接入。</p><p>802.11关键报文 - 控制帧</p><p><img src="/../../../../images/image-20240512161611802.png" alt="image-20240512161611802"></p><p>作用：维护终端发送数据</p><p>为什么需要维护？</p><p>因为，无线不像有线一样，监听(CSMA&#x2F;CA)到信道空闲就发送数据，无线还需要预约信道(RTS)；然后AP会给你一个响应(CTS),允许你发送，你才能发送；数据发完之后，需要发一个ACK确认包(无线空口传输是不可靠传输，所以想要保证可靠传输，用ACK确认机制)，</p><p>为什么需要RTS和CTS？</p><p><img src="/../../../../images/image-20240512171411416.png" alt="image-20240512171411416"></p><p>STA-1通过无线空口扫描到AP，然后STA-2扫AP也是空闲的，因为STA-2没有收到STA-1的信号，所以STA-2认为AP是空闲的；</p><p>然后两个人STA，接入AP，产生冲突。</p><p>如果有RTS,CTS就不会发送冲突。</p><p>STA-1使用无线空口之前，会先发送RTS，AP收到后，但STA-2没有收到，但没啥影响，AP发送响应一个CTS，AP覆盖的范围是整个区域(虚线)，1，2肯定能够收到，虽然STA-2没有收到RTS，但收到CTS，STA-2就知道该AP已经被人使用； 并且AP同意STA-1使用；</p><p>STA-2收到CTS后，CTS会携带MAV向量(网络大概使用多长时间)，就会保持”静默”若干时间，此期间不会使用该AP，等时间过后，再次监听无线空口有没有使用</p><hr><p><strong>扫描阶段</strong></p><p>分为：</p><p>携带有指定SSID的主动扫描方式<br>携带空SSID的主动扫描方式</p><p><img src="/../../../../images/image-20240512164502780.png" alt="image-20240512164502780"></p><p><strong>链路认证阶段</strong></p><p>常用安全策略</p><p><img src="/../../../../images/image-20240512164911900.png" alt="image-20240512164911900"></p><p>802.11链路定义两种认证机制：</p><p>开放系统认证(多数使用这个)、共享密钥认证</p><p>开放系统认证：即不认真，任意STA都可以认证成功。</p><p>链路一般不做认证。</p><p><strong>关联阶段</strong></p><p><img src="/../../../../images/image-20240512165244007.png" alt="image-20240512165244007"></p><p>AC来决策，是否允许STA接入</p><p><strong>接入认证阶段</strong></p><p>接入认证即<strong>对用户进行区分</strong>，并在用户访问网络之前限制其访问权限。相对于链路认证，接入认证安全性更高。</p><p>主要包含: PSK认证(密码)和802.1X认证(用户+密码)。</p><p><img src="/../../../../images/image-20240512165418816.png" alt="image-20240512165418816"></p><p><strong>STA地址分配</strong></p><p>AP给STA分配地址</p><p>如果STA是通过DHCP方式获取IP地址，可以用AC设备或汇聚交换机作为DHCP服务器为STA分配IP地址。一般情况下使用汇聚交换机作为DHCP服务器。</p><p><img src="/../../../../images/image-20240512165717088.png" alt="image-20240512165717088"></p><p><strong>用户认证阶段</strong></p><p>到达这一阶段前提是：底层全部打通</p><p>用户认证是一种“端到端”的安全结构，包括:802.1X认证、MAC认证和Portal认证。</p><p><img src="/../../../../images/image-20240512165851352.png" alt="image-20240512165851352"></p><p>举个例子：例如高铁&#x2F;麦当劳等上要使用wifi，连接wifi时，自动弹出一个网页，让你填写手机验证，然后才能使用。</p><h4 id="WLAN业务数据转发"><a href="#WLAN业务数据转发" class="headerlink" title="WLAN业务数据转发"></a>WLAN业务数据转发</h4><p>CAPWAP中的数据包括控制报文(管理报文)和数据报文。控制报文是通过CAPWAP的控制隧道转发的，</p><p>转发的方式：</p><p>隧道转发(集中转发)、直接转发(本地转发)</p><h3 id="案例：旁挂二层组网隧道转发"><a href="#案例：旁挂二层组网隧道转发" class="headerlink" title="案例：旁挂二层组网隧道转发"></a>案例：旁挂二层组网隧道转发</h3><p><img src="/../../../../images/image-20240512180631440.png" alt="image-20240512180631440"></p><p><img src="/../../../../images/image-20240512181125742.png" alt="image-20240512181125742"></p><p>access模式和trunk模式的选择</p><p>直接转发模式</p><p>S1~AP之间使用trunk，STA发送数据到AP，AP会打上业务标签(vlan101),但是隧道模式转发，则再此基础上打赏隧道标签，遮盖主vlan101，而AP的信息会再交换机S1才打上管理标签(vlan100),</p><p>所以S1的g0&#x2F;0&#x2F;1可能会到带标签的或不带标签的数据包，那么使用trunk</p><p>隧道转发模式</p><p>S1~AP之间使用access，因为到达S1的g0&#x2F;0&#x2F;1口，ap的信息才打上管理标签。</p><p>AP-S1-S2-AC，都要放行管理标签的数据帧(vlan100),而</p><p>而s2-ac之间需要放行，vlan100，vlan101</p><p>配置网络互通</p><p><img src="/../../../../images/image-20240512181157756.png" alt="image-20240512181157756"></p><p>配置AP上线</p><p><img src="/../../../../images/image-20240512182756306.png" alt="image-20240512182756306"></p><p><img src="/../../../../images/image-20240512182814645.png" alt="image-20240512182814645"></p><p>配置WLAN业务参数</p><p><img src="/../../../../images/image-20240512182845799.png" alt="image-20240512182845799"></p><p><img src="/../../../../images/image-20240512182910236.png" alt="image-20240512182910236"></p><h3 id="设计原则"><a href="#设计原则" class="headerlink" title="设计原则"></a>设计原则</h3><h4 id="信号覆盖设计原则"><a href="#信号覆盖设计原则" class="headerlink" title="信号覆盖设计原则"></a>信号覆盖设计原则</h4><p><img src="/../../../../images/image-20240512183043947.png" alt="image-20240512183043947"></p><h4 id="信道设计原则"><a href="#信道设计原则" class="headerlink" title="信道设计原则"></a>信道设计原则</h4><p>确定当地可用信道</p><p>以中国为例，网桥回传用的5G频段可选信道:149、153、157、161、165。</p><p>不同国家或地区，可用信道不同，有些地区会预留一些信道，所以规划前必须确认清楚。</p><p>避免同频干扰</p><p>多楼层同时考虑周边和上下楼AP信道错开。</p><p>如信道实在无法错开，通常降低功率来减少重叠区域范围。</p><h4 id="AP布防"><a href="#AP布防" class="headerlink" title="AP布防"></a>AP布防</h4><p>信道规划-室内放装AP</p><p>​减少跨层</p><p>​干扰避免信道冲突</p><p>​统一规划信道</p><p><img src="/../../../../images/image-20240512183541437.png" alt="image-20240512183541437"></p><h4 id="供电和走线设计"><a href="#供电和走线设计" class="headerlink" title="供电和走线设计"></a>供电和走线设计</h4><p>POE供电(推荐)<br>    由POE交换机负责AP的数据传输和供电:网线或光电混合缆;</p><p>本地供电<br>    非POE交换机负责AP的数据传输，独立电源负责AP的供电；</p><p>POE模块供电<br>    由POE适配器负责AP的数据传输和供电。</p><p><img src="/../../../../images/image-20240512183848686.png" alt="image-20240512183848686"></p><p>AP到POE交换机的网线长度不超过80米;</p><p>AP到交换机的光电混合缆长度不超过200米;</p><p>网线&#x2F;光电混合缆在AP点位处长度需要预留5米左右，以备后期调整</p><p>远离强电强磁；</p><p>提前与用户确认，避免因物业、美观等其他原因，用户不同意施工</p><p>馈线长度越长，天线覆盖范围内的信号强度越差。请使用尽量短的馈线，不建议使用15 m馈线</p><p><img src="/../../../../images/image-20240512184058508.png" alt="image-20240512184058508"></p><h4 id="室内放装AP安装方式及原则"><a href="#室内放装AP安装方式及原则" class="headerlink" title="室内放装AP安装方式及原则"></a>室内放装AP安装方式及原则</h4><p>吸顶安装(推荐):安装高度低于6米则使用全向天线AP，高于6米建议使用定向天线AP;</p><p>挂壁安装:不便吸顶安装时考虑;</p><p>支架安装:是不便吸顶或挂墙情况下的临时安装方式，通常用于临时展会场景。</p><h3 id="真题"><a href="#真题" class="headerlink" title="真题"></a>真题</h3><p>某企业生产网络拓扑如图2-1所示，该网络采用静态路由配置，交换机A和交换机B配置VRRP，车间1和车间2部署了多台AGV，通过无线Wi-Fi向AGV设备下发指令。</p><p>AGV是移动机器人(用来搬运货物)</p><p><img src="/../../../../images/1703689913207439.png" alt="image.png"></p><p>简要说明AGV可靠性受Wi-Fi信号影响，可能有哪些因素。<br>1.信道规划不合理，存在同频干扰</p><p>2.AP覆盖重叠区域过大，存在干扰</p><p>3.AP覆盖不足，信号差，存在盲区</p><p>4.周边存在其它无线信号源干扰</p><p>5.存在遮挡，导致信号衰减过大</p><p>6.AP间漫游中断</p><p>根据网络安全的需要，无线校园网要求全网认证接入，其中台式电脑、笔记本、手机等智能终端，从兼容性角度考虑应优先选用(<strong>Portal</strong>)认证方式;打印机、门禁等非智能终端应该选用(<strong>MAC</strong>)认证方式。<br>图2-1中，数据业务流量通过AC与AP建立的隧道进行转发时，该转发模式为(<strong>隧道转发</strong>);不经过AC转发由AP经接入交换机到核心交换机传输至上层网络时，该转发模式为(<strong>直接转发</strong>)。<br>学校的新一代无线网络采用Wifi6技术，要求兼容仍工作在2.4G的老旧终端，Wifi6 AP的部署密度较大，为减少无线AP在2.4G模式下信道之间的干扰，信道之间至少应间隔(<strong>5</strong>)个信道。<br>无线网络实施后，校园网络在线用户数大幅增长。原楼宇汇聚为千兆上联，高峰时期上行链路负载已经100%，经常有丢包现象，在不更换设备的前提下，可以通过(<strong>增加链路并作聚合</strong>)解决。</p><p>相较于以旁路方式部署，将AC直连部署存在的问题是(<strong>增加AC压力，并且出故障影响全网通信</strong>);相较于该网络规划中，于部署在核心层，将AC部署在接入层存在的问题是(<strong>可靠性下降，流量不清晰</strong>)。</p><p>2.在不增加网络设备的情况下，防止外网用户对本网络进行攻击，隐藏内部网NAT策略通常配置在(<strong>Router</strong>)。</p><p>3.某用户通过手机连接该网络的WIFI信号，使用WEB页面进行认证后上网，无线网络使用的认证方式是(<strong>Portal</strong>)认证。</p><p>2.若在大楼内相邻的办公室共用1台AP会造成信号衰减，造成信号衰减的是<strong>障碍物</strong></p><p>3.在网络规划中，对AP供电方式可以采取(<strong>POE</strong>)供电或DC电源适配器供电。</p><p>4.不考虑其他因素的情况下，若室内AP区域信号场强&gt;-60dBm，停车场AP区域的场强&gt;-70dBm，则用户在(<strong>室内</strong>)区域的上网体验好。</p><p>5、组播报文对无线网络空口的影响主要是<strong>会以低速报文形式发送，易造成无线空口拥堵</strong></p><p>6、网络AP部署再每一间宿舍的原因是：<strong>提升信号质量</strong></p><p>在①处部署(1)设备，实现各会议室的无线网络统一管理，无缝漫游:在②处部署(2)设备，实现内部用户使用用户名和密码认证登录，外来访客通过扫描二维码或者手机短信验证登录无线网络;在③处部署(3)设备，实现无线AP的接入和供电;大型会议室部署(4)设备，实现高密度人群的无线访问;在小型会议室借助86线盒部署(5)设备，实现无线访问。(1)~(5)备选答案:</p><p>A、面板式AP B、高密吸顶式AP C、无线控制器 D、无线认证系统A、E、无线路由器 F、普遍吸顶式AP G、普通交换机 H、POE交换机</p><p>答案 C D H B A</p><p>在核心交换机上配置(6)，可以实现无线网络和办公区网络、服务器区网络逻辑隔离;在④处部署(7)设备，可以对所有用户的互联网访问进行审计和控制，阻止并记录非法访问:在⑤处部署(8)设备，实现服务器区域的边界防护，防范来自无线区域和办公区域的安全威胁;在路由器上配置基于(9)地址的策略路由，实现无线区域用户通过运营商1访问互联网，办公区域和服务器区域通过运营商2访问互联网。</p><p>6.VLAN 7.上网行为管理 8.防火墙 9.源</p><p>外面对里面的入侵检测&#x2F;防御，就是IDS&#x2F;IPS</p><p>部分无线用户反映WLAN无法连接，网络管理员登录AC查看日志，日志显示AP-03掉线无法管理，造成该故障可能的原因包括:(1)(2)、(3)(1)~(3)备选答案(每空限选一项，不得重复)</p><p>A.AP与AC的连接断开<br>B.AP断电<br>C.AP未认证<br>D.由于自动升级造成AC、AP版本不匹配<br>E.AC与核心交换机连接断开<br>F.该AP无线接入用户数达到上限</p><p>答案：ABD</p><p>常见的无线网络安全隐患有IP地址欺骗、数据泄露、(9)、网络通信被窃(8)听等;为保护核心业务数据区域的安全网络管理员在设备①处部署(10)实现核心业务区域边界防护;在设备②处部署(11)实现无线用户的上网行为管控;在设备③处部署(12)分析检测网络中的入侵行为;为加强用户安全认证，配置基于(13)的RASIUS认证。<br>(8)~(9)备选答案(每空限选一项，选项不能重复)</p><p>A.端口扫描B.非授权用户接入C.非法入侵D. sql注入攻击</p><p>(13)备选答案:<br>A.IEEE 802.11<br>B.IEEE 802.1x</p><p>8.B 9.C 10.防火墙 11.上网行为管理!12.IDS 13.B</p>]]></content>
      
      
      <categories>
          
          <category> Network - 网工中级 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Network </tag>
            
            <tag> 网工中级 </tag>
            
            <tag> WLAN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>局域网和城域网</title>
      <link href="/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E5%B1%80%E5%9F%9F%E7%BD%91%E5%92%8C%E5%9F%8E%E5%9F%9F%E7%BD%91/"/>
      <url>/2024/06/01/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E5%B1%80%E5%9F%9F%E7%BD%91%E5%92%8C%E5%9F%8E%E5%9F%9F%E7%BD%91/</url>
      
        <content type="html"><![CDATA[<h1 id="局域网和城域网"><a href="#局域网和城域网" class="headerlink" title="局域网和城域网"></a>局域网和城域网</h1><h2 id="局域网基础"><a href="#局域网基础" class="headerlink" title="局域网基础"></a>局域网基础</h2><h3 id="局域网和城域网体系架构IEEE-标准"><a href="#局域网和城域网体系架构IEEE-标准" class="headerlink" title="局域网和城域网体系架构IEEE(标准)"></a>局域网和城域网体系架构IEEE(标准)</h3><p>比较重要的有两种：</p><p>802.3和802.11应用最为广泛。</p><p>802.3 其实是以太网标准(有线)</p><p>802.11 无线WIFI标准</p><h3 id="局域网拓扑结构"><a href="#局域网拓扑结构" class="headerlink" title="局域网拓扑结构"></a>局域网拓扑结构</h3><p>局域网的拓扑结构主要有:</p><p><img src="/../../../../images/image-20240601152621565.png" alt="image-20240601152621565"></p><h2 id="CSMA-CD"><a href="#CSMA-CD" class="headerlink" title="CSMA&#x2F;CD"></a>CSMA&#x2F;CD</h2><h3 id="CSMA-CD是什么？"><a href="#CSMA-CD是什么？" class="headerlink" title="CSMA&#x2F;CD是什么？"></a>CSMA&#x2F;CD是什么？</h3><p>是一种常用于局域网（LAN）中的冲突检测技术。</p><p>也是对总线型、星型和树型拓扑访问控制协议。</p><p>载波侦听多路访问&#x2F;冲突检测。</p><h3 id="CSMA基本原理"><a href="#CSMA基本原理" class="headerlink" title="CSMA基本原理"></a>CSMA基本原理</h3><p>在发送数据之前，先监听信道上是否有人在发送。</p><p>若有，说明信道正忙，否则说明信道是空闲的。</p><p>然后根据<strong>预定的策略</strong>决定：</p><p>(1) 若信道空闲，是否立即发送。</p><p>(2) 若信道忙，是否继续监听。</p><p>如果连续发送<strong>16次</strong>碰撞后，认为<strong>网络繁忙或故障</strong>，不再尝试发送。</p><h3 id="CSMA-CD三种监听算法"><a href="#CSMA-CD三种监听算法" class="headerlink" title="CSMA&#x2F;CD三种监听算法"></a>CSMA&#x2F;CD三种监听算法</h3><p>(1)非坚持型监听算法:后退随机时间</p><p>由于随机时延后退，从而<strong>减少了冲突的概率</strong>。问题是因为后退而使信道闲置一段时间，这使<strong>信道的利用率降低</strong>，而且<strong>增加了发送时延</strong></p><p>(2)1-坚持型监听算法:继续监听，不等待</p><p>有利于抢占信道，减少信道空闲时间。但是，多个站同时都在监听信道时必然会发生冲突。</p><p><strong>冲突概率和利用率都高(双高)</strong></p><p>(3)P-坚持型监听算法</p><p>若信道空闲，以概率P发送，以**概率(1-P)**延迟一个时间单位，P大小可调整</p><h3 id="冲突检测原理"><a href="#冲突检测原理" class="headerlink" title="冲突检测原理"></a>冲突检测原理</h3><p>载波监听<strong>只能减小冲突的概率，不能完全避免冲突</strong>。当两个帧发生冲突后，若继续发送，将会浪费网络带宽。为了改进带宽利用率，发送站应采取边发边听的冲突检测方法，即:</p><p>(1)发送期间同时接收，并把接收的数据与站中存储的数据进行比较。</p><p>(2)若比较结果一致，说明没有冲突，重复(1)。</p><p>(3)若比较结果不一致，说明<strong>发生了冲突,立即停止发送****，并发送一个简短的</strong>干扰信号(Jamming)****,使所有站都停止发送。</p><p>(4)发送Jamming信号后，<strong>等待一段随机长的时间</strong>，重新监听，再试着发送。</p><h2 id="二进制指数退避算法"><a href="#二进制指数退避算法" class="headerlink" title="二进制指数退避算法"></a>二进制指数退避算法</h2><p>工作原理：</p><p>(1)检测到冲突后，马上停止发送数据，并等待随机时间再发送数据。<br>(2)等待的随机时间&#x3D;τ<em>Random[0,1,..2k-1],其中Random表示随机函数。其中τ是基本退避时间，可以看作固定值。k&#x3D;min[重传次数，10]，如果重传16次后，还不能正常发送数据，认为网络拥塞或信道故障，不再尝试重传。根据公式，如果重传12次后，k&#x3D;min[12，10]&#x3D;10，那么可能等待的时间是τ</em>Random[0，1023],一共有1024种可能。每次站点等待的时间都是随机数，故<strong>后一次退避时间不一定比前一次长</strong>。重传次数越多，退避窗口(即Random取值)越大，从而<strong>降低冲突概率</strong>。<br>如果连续发生<strong>16次</strong>碰撞后，认为网络繁忙或故障，不再尝试发送。</p><p>例题1：</p><p>采用CSMA&#x2F;CD进行介质访问，两个站点连续冲突3次后再次冲突的概率(63)。<br>A.1&#x2F;2 B.1&#x2F;4 C.1&#x2F;8 D.1&#x2F;16<br>【参考答案】C<br>【summer解析】本题考查二进制指数退避算法，原理如下:<br>(1)检测到冲突后，马上停止发送数据，并等待随机时间再发送数据。<br>(2)等待的随机时间&#x3D;τ<em>Random[0,1,…2k-1],其中Random表示随机函数。</em></p><p>注:T是基本退避时间，可以看作固定值，k&#x3D;min[重传次数，10],如果重传16次后，还不能正常发送数据，认为网络拥塞，不再尝试。</p><p>冲突1次后，k&#x3D;min[1,10]&#x3D;1,那么等待时间τ<em>Random[0,1],有2个可选数字。<br>冲突2次后，k&#x3D;min[2,10]&#x3D;2,那么等待时间τ</em>Random[0,1,2,3],有4个可选数字。<br>冲突3次后，k&#x3D;min[3,10]&#x3D;3,那么等待时间τ*Random[0,1,2,3,4,5,6,7],有8个可选数字<br>即两个站点连续冲突3次后再次冲突的概率是1&#x2F;8。<br>也可以得出简化公式:冲突概率为1&#x2F;2n( n表示已经发生冲突的次数，n≤10)</p><p>例题2</p><p>以太网采用的CSMA&#x2F;CD协议，当冲突发生时要通过二进制指数后退算法计算后退时延，关于这个算法，以下论述中错误的是(62)。 A<br>A.冲突次数越多，后退的时间越短<br>C.后退时延的平均值与负载大小有关<br>B.平均后退次数的多少与负载大小有关<br>D.重发次数达到一定极限后放弃发送</p><p>原因：后退的时间是τ*Random[0，1023],随机时间</p><p>负载大小就是网络的繁忙程度。</p><p>例题3</p><p>以下关于二进制指数退避算法的描述中，正确的是(64)。C</p><p>A.每次站点等待的时间是固定的，即上次的2倍<br>B.后一次退避时间一定比前一次长<br>C.发生冲突不一定是站点发生了资源抢占<br>D.通过扩大退避窗口杜绝了再次冲突</p><p>退避窗口—-即Random取值</p><h2 id="最小帧长计算"><a href="#最小帧长计算" class="headerlink" title="最小帧长计算"></a>最小帧长计算</h2><p>最小帧长公式： Lmin &#x3D; 2R * d&#x2F;v</p><p>R：网络数据速率</p><p>d：最大距离</p><p>v：传播速度(光纤是30km&#x2F;s，电缆是20km&#x2F;s)</p><p>L：最小数据帧的长度</p><p>推导</p><p><img src="/../../../../images/image-20240327164422570-17116151954542.png" alt="image-20240327164422570"></p><p>不冲突条件：</p><p>发送时间 &gt;&#x3D; 传送时间 + 确认时间</p><p>L&#x2F;R  &gt;&#x3D;  2d&#x2F;v  + 0</p><p>2d&#x2F;v：因为两地发送过程时间是一样的。</p><p>0：因为确认帧是小帧(64),太小，忽略不计</p><p>例题：</p><p>采用CSMA&#x2F;CD协议的基带总线，段长为1000M，数据速率为10Mb&#x2F;s，信号传播速度为200m&#x2F;us则该网络上的最小帧长应为(57)比特。 B<br>A.50<br>B.100<br>C.150<br>D.200</p><p>解释：</p><p>L&#x2F;R &#x3D; 2 * d&#x2F;v</p><p>L&#x2F;10M&#x2F;b &#x3D; 2 * 1000M&#x2F;200m&#x2F;us</p><p>转换单位</p><p>L &#x3D;  2R * d&#x2F;v</p><p>L &#x3D; 2 * (10* 10^6bit&#x2F;s) * 1000M&#x2F;(200 * 10^6m&#x2F;s)</p><h2 id="以太网帧帧与物理层规范"><a href="#以太网帧帧与物理层规范" class="headerlink" title="以太网帧帧与物理层规范"></a>以太网帧帧与物理层规范</h2><h3 id="以太网帧结构"><a href="#以太网帧结构" class="headerlink" title="以太网帧结构"></a>以太网帧结构</h3><p><img src="/../../../../images/image-20240327173105749-17116152080235.png" alt="image-20240327173105749"></p><p>注意: 长度是指类型字段</p><p>前面7+1字节用于时钟同步，不算入帧长。<br>数据(mtu)46-1500字节，不够至少填充到46字节。<br>校验位4字节，CRC循环冗余校验 32位。<br>最小帧长<strong>64字节</strong>:  6+6+2+46+4&#x3D;64。<br>最大帧长<strong>1518字节</strong>:  6+6+2+1500+4&#x3D;1518.</p><p>以太网最小利用率： 48&#x2F;64</p><p>以太网最大利用率： 1500&#x2F;1518</p><h3 id="以太网报文封装"><a href="#以太网报文封装" class="headerlink" title="以太网报文封装"></a>以太网报文封装</h3><p><img src="/../../../../images/image-20240327174627166-17116152189748.png" alt="image-20240327174627166"></p><p>例题1：</p><p>以太网可以传送最大的TCP段为(21)字节。</p><p>A.1480</p><p>B.1500<br>C.1518<br>D.2000<br>【参考答案】A<br>以太网帧数据部分长度最大为1500B，上层IP头部至少为20B，因此传输层最大为1480B。</p><p><img src="/../../../../images/image-20240327175057743-171161523184911.png" alt="image-20240327175057743"></p><h3 id="802-3以太网-10M"><a href="#802-3以太网-10M" class="headerlink" title="802.3以太网(10M)"></a>802.3以太网(10M)</h3><p>物理介质命名规范</p><p>&lt;传输速率Mbps&gt;&lt;信号方式&gt;&lt;最大传输距离(百米)或介质类型&gt;</p><p>100BASET  </p><p>100Mbps   BASE表示基带传输(数字信号) </p><p>T表示双线，F表示光纤，如果有数字，例如5表示500米</p><h3 id="快速以太网802-3u-100M"><a href="#快速以太网802-3u-100M" class="headerlink" title="快速以太网802.3u(100M)"></a>快速以太网802.3u(100M)</h3><p>UTP ：非屏蔽双绞线  STP：屏蔽双绞线</p><p><img src="/../../../../images/image-20240328173651049.png" alt="image-20240328173651049"></p><h3 id="千兆以太网-1000M"><a href="#千兆以太网-1000M" class="headerlink" title="千兆以太网(1000M)"></a>千兆以太网(1000M)</h3><p>千兆以太网两个标准<strong>802.3z和802.3ab</strong>(100BASE-T)；</p><p><strong>千兆需要4对双绞线</strong>，达到100米传输</p><p>100BASE-LX标准可以使用<strong>单模和多模</strong>光纤传输</p><p>千兆以太网编码方法： 4B&#x2F;5B或8B&#x2F;9B</p><p><img src="/../../../../images/image-20240328174018423.png" alt="image-20240328174018423"></p><h3 id="万兆以太网802-3ae-10G"><a href="#万兆以太网802-3ae-10G" class="headerlink" title="万兆以太网802.3ae(10G)"></a>万兆以太网802.3ae(10G)</h3><p>万兆以太网标准：IEEE802.3ae，支持10G速率，可以用光纤或双绞线传输。</p><p>万兆以太网基本应用于点到点线路，<strong>不再共享带宽，没有冲突检测</strong></p><p><img src="/../../../../images/image-20240328174518700.png" alt="image-20240328174518700"></p><h2 id="虚拟局域网VLAN-上午-下午"><a href="#虚拟局域网VLAN-上午-下午" class="headerlink" title="虚拟局域网VLAN(上午+下午)"></a>虚拟局域网VLAN(上午+下午)</h2><h3 id="VLAN是什么？"><a href="#VLAN是什么？" class="headerlink" title="VLAN是什么？"></a>VLAN是什么？</h3><p>全称：Virtual Local Area Network，VLAN</p><p>根据管理功能，组织机构等对交换局域网进行分段而形成逻辑网络。</p><p>不同VLAN通信必须经过三层设备: 路由器,三层交换机,防火墙等。</p><p>虚拟局域网工作站可以不属于同一物理网段，任何交换端口都可以分配给某个VLAN，属于同一VLAN的所有端口构成一个广播域。</p><p>冲突域和广播域，<strong>一个中继器和集线器是一个冲突域,一个VLAN为一个广播域，交换机的一个接口为一个冲突域</strong>。</p><hr><p>为什么交换机的一个接口为一个冲突域，而一个中继器和集线器是一个冲突域？</p><p>中继器和集线器：</p><p>当一个设备向集线器发送数据时，集线器会将这个数据复制并发送到所有其他连接的设备上。</p><p>如果两个设备同时尝试发送数据，它们的数据帧就会在集线器上碰撞，这个碰撞会影响到所有连接到集线器的设备，因此集线器是一个冲突域</p><p>交换机：</p><p>每个交换机端口都是一个独立的冲突域。</p><p>如果一个设备通过交换机发送数据，只有目标设备所在的端口会受到影响。其他端口上的数据传输不会受到这个碰撞的影响</p><hr><h3 id="冲突域"><a href="#冲突域" class="headerlink" title="冲突域"></a>冲突域</h3><p>冲突域是指连接在同一共享介质上的所有节点的集合，<strong>冲突域内所有节点竞争同一带宽</strong>，一个节点发出的报文(无论是单播、组播、广播)，其余节点都可以收到。</p><p><img src="/../../../../images/image-20240328175932211.png" alt="image-20240328175932211"></p><h3 id="广播域"><a href="#广播域" class="headerlink" title="广播域"></a>广播域</h3><p>广播报文所能到达的整个访问范围称为二层广播域，简称广播域，<strong>同一广播域内的主机都能收到广播报文</strong></p><p><img src="/../../../../images/image-20240328180335886.png" alt="image-20240328180335886"></p><p><img src="/../../../../images/image-20240328180826716.png" alt="image-20240328180826716"></p><h3 id="交换机VLAN划分"><a href="#交换机VLAN划分" class="headerlink" title="交换机VLAN划分"></a>交换机VLAN划分</h3><p>静态划分VLAN：<strong>基于交换机端口</strong></p><p>动态划分VLAN：<strong>基于MAC地址、基于策略、基于网络层协议，基于网络层地址</strong></p><p><img src="/../../../../images/image-20240328181027509.png" alt="image-20240328181027509"></p><h3 id="VLAN划分配置"><a href="#VLAN划分配置" class="headerlink" title="VLAN划分配置"></a>VLAN划分配置</h3><h4 id="静态划分VLAN"><a href="#静态划分VLAN" class="headerlink" title="静态划分VLAN"></a>静态划分VLAN</h4><p><img src="/../../../../images/image-20240328181247451.png" alt="image-20240328181247451"></p><h4 id="动态划分VLAN"><a href="#动态划分VLAN" class="headerlink" title="动态划分VLAN"></a>动态划分VLAN</h4><p><img src="/../../../../images/image-20240328181300986.png" alt="image-20240328181300986"></p><h4 id="基于策略划分VLAN"><a href="#基于策略划分VLAN" class="headerlink" title="基于策略划分VLAN"></a>基于策略划分VLAN</h4><p><img src="/../../../../images/image-20240328181310895.png" alt="image-20240328181310895"></p><h3 id="VLAN作用"><a href="#VLAN作用" class="headerlink" title="VLAN作用"></a>VLAN作用</h3><p>(1)控制网络流量。一个VLAN 内部的通信(包括广播通信)不会转发到其他VLAN 中去，从而有助于控制广播风暴，<strong>减小冲突域，提高网络带宽的利用率</strong>。</p><p>(2)提高网络的安全性。可以通过配置VLAN 之间的路由来提供广播过滤、安全和流量控制等功能.不同VLAN 之间的通信受到限制，<strong>提高了企业网络的安全性</strong>。</p><p>(3)灵活的网络管理。VLAN 机制使得工作组可以<strong>突破地理位置的限制而根据管理功能来划分</strong>。如果根据MAC地址划分VLAN，用户可以在任何地方接入交换网络，实现移动办公。</p><h3 id="802-1Q标签"><a href="#802-1Q标签" class="headerlink" title="802.1Q标签"></a>802.1Q标签</h3><p>是什么？</p><p>是一种网络标准，802.1Q是IEEE802.1标准系统中的一个子标准，定义了在以太网帧中添加VLAN标识符的方法。</p><p><img src="/../../../../images/image-20240328230523487.png" alt="image-20240328230523487"></p><p>以太网帧+802.1Q标签 &#x3D;&#x3D; 802.1Q帧</p><p>PRI(3位)：Priority表示优先级，提供0~7共8个优先级，当有多个帧等待发送时，按优先级顺序发送数据包。</p><p>VID(12 位):即VLAN 标识符，最多可以表示212&#x3D;4096个VLAN,其中VID0用于识别优先级，VID 4095 保留未用，所以<strong>最多可配置4094 个VLAN。默认管理VLAN是1，不能删除</strong>。</p><p>什么叫做识别优先级？</p><p>其实是对网络中的数据流或数据包进行分类，标记或标识，以便网络设备可以根据其重要性或服务质量需求进行适当的处理和传输。这种分类通常涉及到给数据流或数据包分配一个优先级等级，使得网络设备能够根据这些等级进行流量控制、调度和传输。</p><p>就比如，打电话，看你就会标记其数据包为高优先级，确保低延迟和最小的丢包率。</p><p>文件下载，网络可以将其数据包标记为低优先级，以便在网络拥挤时让出带宽给更重要的流量。</p><p><strong>交换机添加和删除VLAN标签的过程由专用硬件自动实现，处理速度很快，不会引入太大的延迟</strong>。</p><p>从用户角度看，数据源产生标准的以太帧，目标接收的也是标准的以太帧，<strong>VLAN标记对用户是透明的</strong>。</p><h3 id="交换机端口类型"><a href="#交换机端口类型" class="headerlink" title="交换机端口类型"></a>交换机端口类型</h3><p>Access接口:只能传送单个VLAN数据，一般用于连接PC&#x2F;摄像头等终端。<br>Trunk接口:能传送多个VLAN数据，一般用于交换机之间互联。<br>Hybrid接口:混合接口，包含access和trunk属性。<br>QinQ:双层标签，一般用于运营商城域网。</p><p>Trunk接口和Hybrid接口区别:</p><p>Trunk 接口通常用于连接交换机之间，可用于发送和接收多个 VLAN 的数据，所有数据帧都会被标记。</p><p>Hybrid接口能够发送和接收多个VLAN的数据，可用于交换机链路和终端设备</p><p>与trunk接口的区别是，发送数据时trunk接口只会摘掉PVID标签，而Hybrid接口能够不携带VLAN标签发送多个VLAN数据。</p><h2 id="STP生成树-上午-下午"><a href="#STP生成树-上午-下午" class="headerlink" title="STP生成树(上午+下午)"></a>STP生成树(上午+下午)</h2><h3 id="STP技术背景"><a href="#STP技术背景" class="headerlink" title="STP技术背景"></a>STP技术背景</h3><p>1、交换机单链路上，存在<strong>单点故障</strong>，线路和设备不具备冗余性。</p><p>任何一条链路或设备故障，网络将面临断网。</p><p><img src="/../../../../images/image-20240329091908658.png" alt="image-20240329091908658"></p><p>2、冗余拓扑能够解决单点故障问题</p><p>但是冗余拓扑带来了二层环路问题</p><p>实际网络环境中，经常产生二层环路从而引发网络故障。</p><p><img src="/../../../../images/image-20240329091944048.png" alt="image-20240329091944048"></p><h3 id="二层环路带来的问题"><a href="#二层环路带来的问题" class="headerlink" title="二层环路带来的问题"></a>二层环路带来的问题</h3><p><strong>广播风暴</strong></p><p>网络中若存在二层环路，一旦出现广播数据帧，这些数据帧将被交换机不断泛洪，造成广播风暴。<br>广播风暴对网络危害非常大，将严重消耗设备CPU资源及网络带宽，需要格外注意。<br>广播风暴现象:<strong>网络慢、所有指示灯高速闪烁、CPU使用率高、CLI卡顿</strong>。</p><p><img src="/../../../../images/image-20240329092121499.png" alt="image-20240329092121499"></p><p>MAC表震荡</p><p>PC发送数据帧给Server</p><p>SW3没有目的MAC表项，于是将数据帧进行<strong>泛洪</strong></p><p>SW1和SW2都收到这个帧并学习源MAC，同时将数据帧进一步泛洪</p><p><strong>SW3将从GE0&#x2F;0&#x2F;1 和GE0&#x2F;0&#x2F;2都收到这个帧并学习源MAC</strong>，更新MAC地址表</p><p><img src="/../../../../images/image-20240329092313059.png" alt="image-20240329092313059"></p><h3 id="STP基本概念"><a href="#STP基本概念" class="headerlink" title="STP基本概念"></a>STP基本概念</h3><p>采用生成树(Spanning-tree)技术，能够在网络中存在二层环路时，通过<strong>逻辑阻塞</strong>(Block)特定端口，从而<strong>打破环路</strong>，并且在网络出现拓扑变更时及时收敛，<strong>保障网络冗余性</strong>。</p><p><img src="/../../../../images/image-20240329092606785.png" alt="image-20240329092606785"></p><p>当网络出现拓扑变更时及时收敛，<strong>保障网络冗余性</strong></p><p>例如下图的SW1故障，STP会重新计算，打开原来的阻塞的端口</p><p><img src="/../../../../images/image-20240329092723349.png" alt="image-20240329092723349"></p><h3 id="网桥ID-Bridge-ID"><a href="#网桥ID-Bridge-ID" class="headerlink" title="网桥ID(Bridge ID)"></a>网桥ID(Bridge ID)</h3><ul><li><p>桥ID一共8个字节，由2个字节优先级和6个字节的MAC地址构成</p></li><li><p>桥优先级默认为 <strong>32768</strong>，可以手工修改。</p></li><li><p>AC地址为交换机背板MAC。</p></li></ul><p><img src="/../../../../images/image-20240329093108655.png" alt="image-20240329093108655"></p><h3 id="路径开销-Path-Cost"><a href="#路径开销-Path-Cost" class="headerlink" title="路径开销(Path Cost)"></a>路径开销(Path Cost)</h3><p>路径开销是一个端口量，是STP&#x2F;RSTP协议用于选择链路的参考值。<br>端口路径开销的默认值及取值范围由选定的路径开销算法决定，<strong>路径开销与端口带宽成反比</strong>。<br>华为设备路径开销标准有:802.1d-1998、802.1t及私有的legacy，默认为802.1t标准。</p><p><img src="/../../../../images/image-20240329093246807.png" alt="image-20240329093246807"></p><h3 id="STP选举操作"><a href="#STP选举操作" class="headerlink" title="STP选举操作"></a>STP选举操作</h3><p>1.确定一个根桥(Root Bridge)【选优先级和MAC地址最小的网桥)</p><p>2.确定其他网桥的根端口(Root Port)【非根桥的端口到根桥最近的端口】</p><p>3.每个段选择一个指定端口(Designated Port)【先选指定桥，指定桥上为指定端口】</p><p>4.选出非指定端口(NonDesignated Port)</p><p><img src="/../../../../images/image-20240329093426272.png" alt="image-20240329093426272"></p><p>所有选举都是选择离根桥距离最近的。</p><p>根桥上的所有接口都是指定端口</p><p>指定桥上的接口就是指定端口</p><h3 id="常见几种生成树协议"><a href="#常见几种生成树协议" class="headerlink" title="常见几种生成树协议"></a>常见几种生成树协议</h3><ul><li>生成树协议:802.1d STP(<strong>慢，拓扑收敛需要30-50s</strong>)</li><li>快速生成树协议 802.1W RSTP(<strong>快，6s内完成收敛</strong>)</li><li>多生成树协议 802.1SMSTP(<strong>实现多个VLAN负载均衡</strong>)</li></ul><p><img src="/../../../../images/image-20240329094230603.png" alt="image-20240329094230603"></p><p>解题：</p><p>1、确定SWA为根桥，所以只能阻断SWB的其中一个接口</p><p>2、根据接口的数字大小决定谁先优先，SWA的g0&#x2F;0&#x2F;1优先，会先发数据给0&#x2F;0&#x2F;2.所以SWB的g0&#x2F;0&#x2F;1阻塞</p><h3 id="城域网"><a href="#城域网" class="headerlink" title="城域网"></a>城域网</h3><p>(1)E-LAN技术是802.1Q的VLAN帧标记，双层标记，打了<strong>两层VLAN标签</strong>，这种技术被定义为<strong>IEEE802.1ad</strong>，也称为<strong>QinQ技术</strong>。</p><ul><li>QinQ实际是把<strong>用户VLAN</strong>嵌套在<strong>运营商城域以太网VLAN</strong>中传送。</li></ul><p>(2)IEEE802.1ah，也称为PBB，也叫<strong>MAC-IN-MAC技术</strong></p><p><img src="/../../../../images/image-20240329100407328.png" alt="image-20240329100407328"></p>]]></content>
      
      
      <categories>
          
          <category> Network - 网工中级 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Network </tag>
            
            <tag> 网工中级 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据通信基础</title>
      <link href="/2024/05/29/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80/"/>
      <url>/2024/05/29/%E7%AC%94%E8%AE%B0/Network/%E7%BD%91%E5%B7%A5%E4%B8%AD%E7%BA%A7/%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="1-数据通信基础"><a href="#1-数据通信基础" class="headerlink" title="1.数据通信基础"></a>1.数据通信基础</h1><h2 id="信道特性"><a href="#信道特性" class="headerlink" title="信道特性"></a>信道特性</h2><p>通信目的：<strong>传递信息</strong></p><p>通信中产生和发送信息的一端叫信源，接收信息的一端叫信宿，信源和信宿之间的<strong>通信线路称为信道</strong>。</p><p><img src="/../../../../images/image-20240422144616602.png" alt="image-20240422144616602"></p><p><img src="/../../../../images/image-20240422144702544.png" alt="image-20240422144702544"></p><p>什么是模拟信号，什么是数据信号？</p><p>假设你要传输一段音乐。在模拟信号中，这段音乐将以连续的波形形式存在。当你录制音乐时，声音信号被转换成模拟电压信号，其数值随着时间的变化而连续变化，就像波形一样。这个模拟电压信号随着时间变化，可以通过一个模拟电路传输到扬声器，扬声器就会根据信号的变化而产生相应的声音，从而还原出原始的音乐。</p><p>而在数字信号中，这段音乐将被转换成离散的二进制数字。当音乐被数字化时，声音信号会被离散采样，即在固定的时间间隔内（比如每秒采样一定次数），将声音信号的振幅转换为一个数字。这些数字可以用来表示音乐的声音强度。然后，这些数字信号可以通过数字通信系统传输，比如通过互联网或者蓝牙。在接收端，这些数字信号再被解码，转换回模拟信号，然后扬声器再根据这些信号产生声音。</p><hr><h3 id="信道带宽W"><a href="#信道带宽W" class="headerlink" title="信道带宽W"></a>信道带宽W</h3><p>直接理解为，我们所说的带宽</p><p>模拟信道：**W &#x3D; f1 - f2 **(f2和f1表示：信道能通过的最高&#x2F;最低频率，单位赫兹HZ)</p><p>数字信道：数字信道是离散信道，带宽为信道能够达到的<strong>最大数据传输速率</strong>，单位是bit&#x2F;s。</p><h3 id="码元和码元速率"><a href="#码元和码元速率" class="headerlink" title="码元和码元速率"></a>码元和码元速率</h3><p>码元是什么？</p><p>码元是数字通信中的一个基本单位，它代表着一种离散的状态或符号。</p><p>通俗地说：</p><p>想象一下你在玩电话游戏，你要把一句话传给旁边的人，但你只能通过传递单个字给他。这些单词就像通信中的码元，它们是信息传递的基本单位。而传递单词时，有可能会有误解或错误，就像在通信中可能会有误差一样。</p><p>码元的作用就像是在电话游戏中传递单个字一样，它们帮助我们传递信息，并且有助于我们发现和纠正错误。</p><p>码元速率：单位时间内信道传送的码元个数。</p><p>如果码元宽度(冲脉周期)为T，则码元速率(波特率0)为</p><p><strong>B &#x3D; 1&#x2F;T，单位是波特Baud</strong></p><p>一个码元携带信息量n(位)与码元种类数(N)的关系 <strong>n&#x3D;log2^N</strong></p><p>好比这样记：</p><p>N&#x3D;4,n&#x3D;2, 00 01 10 11  </p><p>N&#x3D;8,n&#x3D;3, 000 001 010 011 ….. 111 </p><p>什么是码元宽度？</p><p>码元宽度是指在数字通信中，每个码元所持续的时间长度。</p><p>通俗地说：</p><p>码元宽度就像是你用闪光灯发送信息一样。如果你每秒闪一次，那么每个码元（每个闪光）的宽度就是一秒钟。但如果你闪得更快，比如每半秒一次，那么每个码元的宽度就是半秒钟。这个宽度决定了你发送信息的速度，就像闪光灯频率决定了你发送信息的快慢一样。</p>]]></content>
      
      
      <categories>
          
          <category> Network - 网工中级 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Network </tag>
            
            <tag> 网工中级 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
